import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KCiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIgojICAgIE11Y2ggb2YgdGhpcyBjb2RlIGlzIHRha2VuIGZyb20gdGhlIHNvdXJjZSBjb2RlIG9mIHRoZSBhZGRvbiB0aGUgbWFjaGluZS4KIyBDcmVkaXRzIGZvciBpdHMgY3JlYXRvcnMgYW5kIGNvbGxhYm9yYXRvcnMuCgojICAgIENyZWF0ZWQgYnkgeXVyaSBzYWthbW90byBmb3IgdGhlIGZyZWUgd29ybGQuIC0gVGhpcyBwcm9ncmFtIGxpbmtzIGxpc3RzIAojIGZyb20gcHVibGljIGludGVybmV0IHNpdGVzLgoiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIKCmltcG9ydCB1cmxsaWIsIHVybGxpYjIsIHN5cywgcmUsIG9zLCB1bmljb2RlZGF0YQppbXBvcnQgeGJtYywgeGJtY2d1aSwgeGJtY3BsdWdpbiwgeGJtY2FkZG9uCgpwbHVnaW5faGFuZGxlID0gaW50KHN5cy5hcmd2WzFdKQoKbXlzZXR0aW5ncyA9IHhibWNhZGRvbi5BZGRvbihpZCA9ICdwbHVnaW4udmlkZW8ubGl2ZS5pcHR2JykKcHJvZmlsZSA9IG15c2V0dGluZ3MuZ2V0QWRkb25JbmZvKCdwcm9maWxlJykKaG9tZSA9IG15c2V0dGluZ3MuZ2V0QWRkb25JbmZvKCdwYXRoJykKZmFuYXJ0ID0geGJtYy50cmFuc2xhdGVQYXRoKG9zLnBhdGguam9pbihob21lLCAnZmFuYXJ0LmpwZycpKQppY29uID0geGJtYy50cmFuc2xhdGVQYXRoKG9zLnBhdGguam9pbihob21lLCAnaWNvbi5wbmcnKSkKCiMjIFRIRVNFIEFSRSBZT1VSIFNPVVJDRVMKbGl2ZV9zb3VyY2UgPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3LzVyaDNYdkJjIgpsaXZlX3NvdXJjZTIgPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L1NOcWp5aVR2IgpsaXZlX3NvdXJjZTMgPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L0dGSE56ZkxZIgpsaXZlX3NvdXJjZTQgPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3LzRyTmtuNFoxIgpsaXZlX3NvdXJjZTUgPSAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L201Y1lhUXpyIgojbW92aWVfc291cmNlID0gImh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy9wYnpmelJISyIKI2RvY3Nfc291cmNlID0gImh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy8wUkJuTlNkUCIKCiMjIFRIRVNFIEFSRSBZT1VSIFJFR0VYJ1MKcmVnZXggPSAnbmFtZT0oLis/KXVybD0oLispbG9nbz0oLis/KScKbTN1X3RodW1iX3JlZ2V4ID0gJ3R2Zy1sb2dvPVtcJyJdKC4qPylbXCciXScKbTN1X3JlZ2V4ID0gJyMoLis/KSwoLispXHMqKC4rKVxzKicKCiMjIFRISVMgSVMgSlVTVCBBIEZJTExFUiBGT1IgVEhFIFVSTCBPTiBNQUlOIENBVEVHT1JJRVMKdV90dWJlID0gJ2h0dHA6Ly93d3cueW91dHViZS5jb20nCgpkZWYgcmVtb3ZlQWNjZW50cyhzKToKIyMgVEhJUyBSRU1PVkVTIEFDQ0VOVFMgRlJPTSBURVhUIFNPIFRIQVQgUFlUSE9OIENBTiBSRUFEIElUCglyZXR1cm4gJycuam9pbigoYyBmb3IgYyBpbiB1bmljb2RlZGF0YS5ub3JtYWxpemUoJ05GRCcsIHMuZGVjb2RlKCd1dGYtOCcpKSBpZiB1bmljb2RlZGF0YS5jYXRlZ29yeShjKSAhPSAnTW4nKSkKCQkJCQkKZGVmIHJlYWRfZmlsZShmaWxlKToKIyMgVEhJUyBGVU5DVElPTiBSRUFEUyBUSEUgU09VUkNFIEZJTEVTCiAgICB0cnk6CiAgICAgICAgZiA9IG9wZW4oZmlsZSwgJ3InKQogICAgICAgIGNvbnRlbnQgPSBmLnJlYWQoKQogICAgICAgIGYuY2xvc2UoKQogICAgICAgIHJldHVybiBjb250ZW50CiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKZGVmIG1ha2VfcmVxdWVzdCh1cmwpOgojIyBUSElTIEZVTkNUSU9OIEdFVFMgVEhFIEZJTEVTIEZST00gVVJMIEFORCBSRUFEUyBUSEVNIFRPIENBQ0hFL01FTQoJdHJ5OgoJCXJlcSA9IHVybGxpYjIuUmVxdWVzdCh1cmwpCgkJcmVxLmFkZF9oZWFkZXIoJ1VzZXItQWdlbnQnLCAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgcnY6MTkuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xOS4wJykKCQlyZXNwb25zZSA9IHVybGxpYjIudXJsb3BlbihyZXEpCSAgCgkJbGluayA9IHJlc3BvbnNlLnJlYWQoKQoJCXJlc3BvbnNlLmNsb3NlKCkgIAoJCXJldHVybiBsaW5rCglleGNlcHQgdXJsbGliMi5VUkxFcnJvciwgZToKCQlwcmludCAnV2UgZmFpbGVkIHRvIG9wZW4gIiVzIi4nICUgdXJsCgkJaWYgaGFzYXR0cihlLCAnY29kZScpOgoJCQlwcmludCAnV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICVzLicgJSBlLmNvZGUJCgkJaWYgaGFzYXR0cihlLCAncmVhc29uJyk6CgkJCXByaW50ICdXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuJwoJCQlwcmludCAnUmVhc29uOiAnLCBlLnJlYXNvbgoJCQkKZGVmIG1haW4oKToKIyMJVEhFU0UgQVJFIFRIRSBNRU5VUwoJYWRkX2xpbmtfaW5mbygnW0JdW0NPTE9SIGdvbGRdKiogSVBUViBMSVNUQVMgKipbL0NPTE9SXVsvQl0nLGljb24sIGZhbmFydCkKCWFkZF9kaXIoJ1tDT0xPUiB3aGl0ZV1bQl0gK0JVU0NBUiAgIFsvQl1bL0NPTE9SXScsICdzZWFyY2hsaW5rJywgOTgsIGljb24sIGZhbmFydCkKCWFkZF9kaXIoJ1tDT0xPUiBibHVlXVtCXSBDYW5hbGVzOiBUViBQUkVNSVVNIFNQQUlOICBbL0JdWy9DT0xPUl0nLCB1X3R1YmUsIDIsIGljb24sIGZhbmFydCkKCWFkZF9kaXIoJ1tDT0xPUiBibHVlXVtCXSBDYW5hbGVzOiBUViBTUE9SVCBTUEFJTiAgWy9CXVsvQ09MT1JdJywgdV90dWJlLCA1LCBpY29uLCBmYW5hcnQpCglhZGRfZGlyKCdbQ09MT1IgYmx1ZV1bQl0gQ2FuYWxlczogVFYgVVNBLUxBVElOT1NbL0JdWy9DT0xPUl0nLCB1X3R1YmUsIDYsIGljb24sIGZhbmFydCkKCWFkZF9kaXIoJ1tDT0xPUiBibHVlXVtCXSBMSVZFIFRWIC0gVVNBIFsvQl1bL0NPTE9SXScsIHVfdHViZSwgNywgaWNvbiwgZmFuYXJ0KQoJYWRkX2RpcignW0NPTE9SIGJsdWVdW0JdIExpdmUgVFYgLSBVSyBbL0JdWy9DT0xPUl0nLCB1X3R1YmUsIDgsIGljb24sIGZhbmFydCkKCQojCWFkZF9saW5rX2R1bW15KGljb24sIGZhbmFydCkKIwlhZGRfbGlua19pbmZvKCdbQl1bQ09MT1IgZ29sZF0qKiBNT1ZJRS9ET0NTIENBVEVHT1JJRVMgKipbL0NPTE9SXVsvQl0nLGljb24sIGZhbmFydCkKIwlhZGRfZGlyKCdbQ09MT1Igd2hpdGVdW0JdPj4gIFNFQVJDSCAgPDxbL0JdWy9DT0xPUl0nLCAnc2VhcmNobGluaycsIDk5LCBpY29uLCBmYW5hcnQpCiMJYWRkX2RpcignW0NPTE9SIGJsdWVdW0JdPj4gTW92aWVzIDw8Wy9CXVsvQ09MT1JdJywgdV90dWJlLCAzLCBpY29uLCBmYW5hcnQpCQkKIwlhZGRfZGlyKCdbQ09MT1IgYmx1ZV1bQl0+PiBEb2N1bWVudGFyaWVzIDw8Wy9CXVsvQ09MT1JdJywgdV90dWJlLCA0LCBpY29uLCBmYW5hcnQpCgoKCmRlZiBzZWFyY2h0digpOiAJCiMjIFRISVMgSVMgVEhFIFNFQVJDSCBGVU5DVElPTiBXSElDSCBTRUFSQ0hFUyBUSEUgTElWRSBUViAKCXRyeToKCQlrZXliID0geGJtYy5LZXlib2FyZCgnJywgJ0NhbmFsIGEgYnVzY2FyPycpCgkJa2V5Yi5kb01vZGFsKCkKCQlpZiAoa2V5Yi5pc0NvbmZpcm1lZCgpKToKCQkJc2VhcmNoVGV4dCA9IHVybGxpYi5xdW90ZV9wbHVzKGtleWIuZ2V0VGV4dCgpKS5yZXBsYWNlKCcrJywgJyAnKQoJCQljb250ZW50MSA9IG1ha2VfcmVxdWVzdChsaXZlX3NvdXJjZSkKCQkJY29udGVudDIgPSBtYWtlX3JlcXVlc3QobGl2ZV9zb3VyY2UyKQoJCQljb250ZW50MyA9IG1ha2VfcmVxdWVzdChsaXZlX3NvdXJjZTMpCgkJCWNvbnRlbnQ0ID0gbWFrZV9yZXF1ZXN0KGxpdmVfc291cmNlNCkKCQkJY29udGVudDUgPSBtYWtlX3JlcXVlc3QobGl2ZV9zb3VyY2U1KQoJCQltYXRjaDEgPSByZS5jb21waWxlKG0zdV9yZWdleCkuZmluZGFsbChjb250ZW50MSkKCQkJbWF0Y2gyID0gcmUuY29tcGlsZShtM3VfcmVnZXgpLmZpbmRhbGwoY29udGVudDIpCgkJCW1hdGNoMyA9IHJlLmNvbXBpbGUobTN1X3JlZ2V4KS5maW5kYWxsKGNvbnRlbnQzKQoJCQltYXRjaDQgPSByZS5jb21waWxlKG0zdV9yZWdleCkuZmluZGFsbChjb250ZW50NCkKCQkJbWF0Y2g1ID0gcmUuY29tcGlsZShtM3VfcmVnZXgpLmZpbmRhbGwoY29udGVudDUpCgkJCWZvciB0aHVtYiwgbmFtZSwgdXJsIGluIG1hdGNoMSttYXRjaDIrbWF0Y2gzK21hdGNoNCttYXRjaDU6CgkJCQlpZiByZS5zZWFyY2goc2VhcmNoVGV4dCwgcmVtb3ZlQWNjZW50cyhuYW1lLnJlcGxhY2UoJ8SQJywgJ0QnKSksIHJlLklHTk9SRUNBU0UpOgoJCQkJCW0zdV9wbGF5bGlzdChuYW1lLCB1cmwsIHRodW1iKQoJZXhjZXB0OgoJCXBhc3MKCQkJCQkKZGVmIHNlYXJjaCgpOiAJCiMjIFRISVMgSVMgVEhFIFNFQVJDSCBGVU5DVElPTiBXSElDSCBTRUFSQ0hFUyBNT1ZJRVMgQU5EIERPQ1MKCXRyeToKCQlrZXliID0geGJtYy5LZXlib2FyZCgnJywgJ0VudGVyIHNlYXJjaCB0ZXh0JykKCQlrZXliLmRvTW9kYWwoKQoJCWlmIChrZXliLmlzQ29uZmlybWVkKCkpOgoJCQlzZWFyY2hUZXh0ID0gdXJsbGliLnF1b3RlX3BsdXMoa2V5Yi5nZXRUZXh0KCkpLnJlcGxhY2UoJysnLCAnICcpCgkJCWNvbnRlbnRNID0gbWFrZV9yZXF1ZXN0KG1vdmllX3NvdXJjZSkKCQkJY29udGVudEQgPSBtYWtlX3JlcXVlc3QoZG9jc19zb3VyY2UpCgkJCW1hdGNoMiA9IHJlLmNvbXBpbGUocmVnZXgpLmZpbmRhbGwoY29udGVudE0pCgkJCW1hdGNoMyA9IHJlLmNvbXBpbGUocmVnZXgpLmZpbmRhbGwoY29udGVudEQpCgkJCWZvciBuYW1lLCB1cmwsIHRodW1iIGluIG1hdGNoMittYXRjaDM6CgkJCQlpZiByZS5zZWFyY2goc2VhcmNoVGV4dCwgcmVtb3ZlQWNjZW50cyhuYW1lLnJlcGxhY2UoJ8SQJywgJ0QnKSksIHJlLklHTk9SRUNBU0UpOgoJCQkJCXBsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpCQoJZXhjZXB0OgoJCXBhc3MKCQkKZGVmIGxpdmV0dl9vbmxpbmUoKToKIyMgR0VUIFRIRSBMSVZFIFRWIAoJY29udGVudCA9IG1ha2VfcmVxdWVzdChsaXZlX3NvdXJjZSkKCW1hdGNoID0gcmUuY29tcGlsZShtM3VfcmVnZXgpLmZpbmRhbGwoY29udGVudCkKCWZvciB0aHVtYiwgbmFtZSwgdXJsIGluIG1hdGNoOgoJCXRyeToKCQkJbTN1X3BsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpCgkJZXhjZXB0OgoJCQlwYXNzCgpkZWYgbGl2ZXR2X29ubGluZTIoKToKIyMgR0VUIFRIRSBMSVZFIFRWIAoJY29udGVudCA9IG1ha2VfcmVxdWVzdChsaXZlX3NvdXJjZTIpCgltYXRjaCA9IHJlLmNvbXBpbGUobTN1X3JlZ2V4KS5maW5kYWxsKGNvbnRlbnQpCglmb3IgdGh1bWIsIG5hbWUsIHVybCBpbiBtYXRjaDoKCQl0cnk6CgkJCW0zdV9wbGF5bGlzdChuYW1lLCB1cmwsIHRodW1iKQoJCWV4Y2VwdDoKCQkJcGFzcwkJCQoKZGVmIGxpdmV0dl9vbmxpbmUzKCk6CiMjIEdFVCBUSEUgTElWRSBUViAKCWNvbnRlbnQgPSBtYWtlX3JlcXVlc3QobGl2ZV9zb3VyY2UzKQoJbWF0Y2ggPSByZS5jb21waWxlKG0zdV9yZWdleCkuZmluZGFsbChjb250ZW50KQoJZm9yIHRodW1iLCBuYW1lLCB1cmwgaW4gbWF0Y2g6CgkJdHJ5OgoJCQltM3VfcGxheWxpc3QobmFtZSwgdXJsLCB0aHVtYikKCQlleGNlcHQ6CgkJCXBhc3MJCQkKCmRlZiBsaXZldHZfb25saW5lNCgpOgojIyBHRVQgVEhFIExJVkUgVFYgCgljb250ZW50ID0gbWFrZV9yZXF1ZXN0KGxpdmVfc291cmNlNCkKCW1hdGNoID0gcmUuY29tcGlsZShtM3VfcmVnZXgpLmZpbmRhbGwoY29udGVudCkKCWZvciB0aHVtYiwgbmFtZSwgdXJsIGluIG1hdGNoOgoJCXRyeToKCQkJbTN1X3BsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpCgkJZXhjZXB0OgoJCQlwYXNzCgpkZWYgbGl2ZXR2X29ubGluZTUoKToKIyMgR0VUIFRIRSBMSVZFIFRWIAoJY29udGVudCA9IG1ha2VfcmVxdWVzdChsaXZlX3NvdXJjZTUpCgltYXRjaCA9IHJlLmNvbXBpbGUobTN1X3JlZ2V4KS5maW5kYWxsKGNvbnRlbnQpCglmb3IgdGh1bWIsIG5hbWUsIHVybCBpbiBtYXRjaDoKCQl0cnk6CgkJCW0zdV9wbGF5bGlzdChuYW1lLCB1cmwsIHRodW1iKQoJCWV4Y2VwdDoKCQkJcGFzcwoKCQkKZGVmIG1vdmllc19vbmxpbmUoKToKIyMgR0VUIFRIRSBNT1ZJRVMKCWNvbnRlbnQgPSBtYWtlX3JlcXVlc3QobW92aWVfc291cmNlKQoJbWF0Y2ggPSByZS5jb21waWxlKHJlZ2V4KS5maW5kYWxsKGNvbnRlbnQpCglmb3IgbmFtZSwgdXJsLCB0aHVtYiBpbiBtYXRjaDoKCQl0cnk6CgkJCXBsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpCgkJZXhjZXB0OgoJCQlwYXNzCgpkZWYgZG9jc19vbmxpbmUoKToKIyMgR0VUIFRIRSBET0NVTUVOVEFSSUVTCgljb250ZW50ID0gbWFrZV9yZXF1ZXN0KGRvY3Nfc291cmNlKQoJbWF0Y2ggPSByZS5jb21waWxlKHJlZ2V4KS5maW5kYWxsKGNvbnRlbnQpCglmb3IgbmFtZSwgdXJsLCB0aHVtYiBpbiBtYXRjaDoKCQl0cnk6CgkJCXBsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpCgkJZXhjZXB0OgoJCQlwYXNzCgkJCQkKZGVmIHBsYXlsaXN0KG5hbWUsIHVybCwgdGh1bWIpOgkKIyMgQUZURVIgR0VUVElORyBUSEUgTU9WSUVTIE9SIERPQ1MgQ0FURUdPUklFIE9SIFNFQVJDSElORyBUSEVTRSBUSElTIFdJTEwgU09SVCBBTkQgTElTVCBUSEVNIEFTIERJUlMgT1IgTElOS1MgRVRDCgluYW1lID0gcmUuc3ViKCdccysnLCAnICcsIG5hbWUpLnN0cmlwKCkJCQkKCXVybCA9IHVybC5yZXBsYWNlKCciJywgJyAnKS5yZXBsYWNlKCcmYW1wOycsICcmJykuc3RyaXAoKQoJaWYgKCd5b3V0dWJlLmNvbS91c2VyLycgaW4gdXJsKSBvciAoJ3lvdXR1YmUuY29tL2NoYW5uZWwvJyBpbiB1cmwpIG9yICgneW91dHViZS91c2VyLycgaW4gdXJsKSBvciAoJ3lvdXR1YmUvY2hhbm5lbC8nIGluIHVybCk6CgkJaWYgJ3R2Zy1sb2dvJyBpbiB0aHVtYjoKCQkJdGh1bWIgPSByZS5jb21waWxlKG0zdV90aHVtYl9yZWdleCkuZmluZGFsbChzdHIodGh1bWIpKVswXS5yZXBsYWNlKCcgJywgJyUyMCcpCQkJCgkJCWFkZF9kaXIobmFtZSwgdXJsLCAnJywgdGh1bWIsIHRodW1iKQkJCQoJCWVsc2U6CQoJCQlhZGRfZGlyKG5hbWUsIHVybCwgJycsIGljb24sIGZhbmFydCkKCWVsc2U6CgkJaWYgJ3lvdXR1YmUuY29tL3dhdGNoP3Y9JyBpbiB1cmw6CgkJCXVybCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz92aWRlb19pZD0lcycgJSAodXJsLnNwbGl0KCc9JylbLTFdKQoJCWVsaWYgJ2RhaWx5bW90aW9uLmNvbS92aWRlby8nIGluIHVybDoKCQkJdXJsID0gdXJsLnNwbGl0KCcvJylbLTFdLnNwbGl0KCdfJylbMF0KCQkJdXJsID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5kYWlseW1vdGlvbl9jb20vP21vZGU9cGxheVZpZGVvJnVybD0lcycgJSB1cmwJCgkJZWxzZToJCQkKCQkJdXJsID0gdXJsCgkJaWYgJ3R2Zy1sb2dvJyBpbiB0aHVtYjoJCQkJCgkJCXRodW1iID0gcmUuY29tcGlsZShtM3VfdGh1bWJfcmVnZXgpLmZpbmRhbGwoc3RyKHRodW1iKSlbMF0ucmVwbGFjZSgnICcsICclMjAnKQoJCQlhZGRfbGluayhuYW1lLCB1cmwsIDEsIHRodW1iLCB0aHVtYikJCQkKCQllbHNlOgkJCQkKCQkJYWRkX2xpbmsobmFtZSwgdXJsLCAxLCBpY29uLCBmYW5hcnQpCQoKZGVmIG0zdV9wbGF5bGlzdChuYW1lLCB1cmwsIHRodW1iKToJCiMjIEFGVEVSIEdFVFRJTkcgVEhFIExJVkVUViBDQVRFR09SSUUgT1IgU0VBUkNISU5HIExJVkVUViBUSEVOIFRISVMgV0lMTCBTT1JUIEFORCBMSVNUIFRIRU0gQVMgRElSUyBPUiBMSU5LUyBFVEMKCW5hbWUgPSByZS5zdWIoJ1xzKycsICcgJywgbmFtZSkuc3RyaXAoKQkJCQoJdXJsID0gdXJsLnJlcGxhY2UoJyInLCAnICcpLnJlcGxhY2UoJyZhbXA7JywgJyYnKS5zdHJpcCgpCglpZiAoJ3lvdXR1YmUuY29tL3VzZXIvJyBpbiB1cmwpIG9yICgneW91dHViZS5jb20vY2hhbm5lbC8nIGluIHVybCkgb3IgKCd5b3V0dWJlL3VzZXIvJyBpbiB1cmwpIG9yICgneW91dHViZS9jaGFubmVsLycgaW4gdXJsKToKCQlpZiAndHZnLWxvZ28nIGluIHRodW1iOgoJCQl0aHVtYiA9IHJlLmNvbXBpbGUobTN1X3RodW1iX3JlZ2V4KS5maW5kYWxsKHN0cih0aHVtYikpWzBdLnJlcGxhY2UoJyAnLCAnJTIwJykJCQkKCQkJYWRkX2RpcihuYW1lLCB1cmwsICcnLCB0aHVtYiwgdGh1bWIpCQkJCgkJZWxzZToJCgkJCWFkZF9kaXIobmFtZSwgdXJsLCAnJywgaWNvbiwgZmFuYXJ0KQoJZWxzZToKCQlpZiAneW91dHViZS5jb20vd2F0Y2g/dj0nIGluIHVybDoKCQkJdXJsID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPSVzJyAlICh1cmwuc3BsaXQoJz0nKVstMV0pCgkJZWxpZiAnZGFpbHltb3Rpb24uY29tL3ZpZGVvLycgaW4gdXJsOgoJCQl1cmwgPSB1cmwuc3BsaXQoJy8nKVstMV0uc3BsaXQoJ18nKVswXQoJCQl1cmwgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmRhaWx5bW90aW9uX2NvbS8/bW9kZT1wbGF5VmlkZW8mdXJsPSVzJyAlIHVybAkKCQllbHNlOgkJCQoJCQl1cmwgPSB1cmwKCQlpZiAndHZnLWxvZ28nIGluIHRodW1iOgkJCQkKCQkJdGh1bWIgPSByZS5jb21waWxlKG0zdV90aHVtYl9yZWdleCkuZmluZGFsbChzdHIodGh1bWIpKVswXS5yZXBsYWNlKCcgJywgJyUyMCcpCgkJCWFkZF9saW5rKG5hbWUsIHVybCwgMSwgdGh1bWIsIHRodW1iKQkJCQoJCWVsc2U6CQkJCQoJCQlhZGRfbGluayhuYW1lLCB1cmwsIDEsIGljb24sIGZhbmFydCkJCgpkZWYgcGxheV92aWRlbyh1cmwpOgojIyBUSElTIEhBUFBFTlMgV0hFTiBBIExJTksgSVMgQ0xJQ0tFRCBPTiBJRiBUSEUgVVJMIENPTlRBSU5TIC5NM1U4IFRIRU4gSVQgV0lMTCBETyBUSEUgIklGIiBQQVJUIEFOIElGIE5PVCBJVCBXSUxMIERPIFRIRSAiRUxTRSIgQklUIQoJaWYgJy5tM3U4JyAgb3IgJy50cycgaW4gdXJsOgoJCXVybCA9IHVybC5yZXBsYWNlKCJodHRwOi8vIiwicGx1Z2luOi8vcGx1Z2luLnZpZGVvLmY0bVRlc3Rlci8/dXJsPWh0dHA6Ly8iKS5yZXBsYWNlKCIubTN1OCIsIi50cyIpCgkJdXJsID0gdXJsICsgIiZhbXA7c3RyZWFtdHlwZT1UU0RPV05MT0FERVIiCgkJbWVkaWFfdXJsID0gdXJsCgkJaXRlbSA9IHhibWNndWkuTGlzdEl0ZW0obmFtZSwgcGF0aCA9IG1lZGlhX3VybCkKCQl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGl0ZW0pCgkJcmV0dXJuCgllbHNlOgoJCW1lZGlhX3VybCA9IHVybAoJCWl0ZW0gPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIHBhdGggPSBtZWRpYV91cmwpCgkJeGJtY3BsdWdpbi5zZXRSZXNvbHZlZFVybChpbnQoc3lzLmFyZ3ZbMV0pLCBUcnVlLCBpdGVtKQoJCXJldHVybgkKCmRlZiBnZXRfcGFyYW1zKCk6CglwYXJhbSA9IFtdCglwYXJhbXN0cmluZyA9IHN5cy5hcmd2WzJdCglpZiBsZW4ocGFyYW1zdHJpbmcpPj0gMjoKCQlwYXJhbXMgPSBzeXMuYXJndlsyXQoJCWNsZWFuZWRwYXJhbXMgPSBwYXJhbXMucmVwbGFjZSgnPycsICcnKQoJCWlmIChwYXJhbXNbbGVuKHBhcmFtcyktMV0gPT0gJy8nKToKCQkJcGFyYW1zID0gcGFyYW1zWzA6bGVuKHBhcmFtcyktMl0KCQlwYWlyc29mcGFyYW1zID0gY2xlYW5lZHBhcmFtcy5zcGxpdCgnJicpCgkJcGFyYW0gPSB7fQoJCWZvciBpIGluIHJhbmdlKGxlbihwYWlyc29mcGFyYW1zKSk6CgkJCXNwbGl0cGFyYW1zID0ge30KCQkJc3BsaXRwYXJhbXMgPSBwYWlyc29mcGFyYW1zW2ldLnNwbGl0KCc9JykKCQkJaWYgKGxlbihzcGxpdHBhcmFtcykpID09IDI6CgkJCQlwYXJhbVtzcGxpdHBhcmFtc1swXV0gPSBzcGxpdHBhcmFtc1sxXQoJcmV0dXJuIHBhcmFtCgpkZWYgYWRkX2RpcihuYW1lLCB1cmwsIG1vZGUsIGljb25pbWFnZSwgZmFuYXJ0KToKIyMgQUREUyBUSEUgRElSRUNUT1JJRVMKCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyB1cmxsaWIucXVvdGVfcGx1cyh1cmwpICsgIiZtb2RlPSIgKyBzdHIobW9kZSkgKyAiJm5hbWU9IiArIHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpICsgIiZpY29uaW1hZ2U9IiArIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkKCW9rID0gVHJ1ZQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2UgPSAiRGVmYXVsdEZvbGRlci5wbmciLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSkKCWxpei5zZXRJbmZvKCB0eXBlID0gIlZpZGVvIiwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIjogbmFtZSB9ICkKCWxpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgZmFuYXJ0KQoJaWYgKCd5b3V0dWJlLmNvbS91c2VyLycgaW4gdXJsKSBvciAoJ3lvdXR1YmUuY29tL2NoYW5uZWwvJyBpbiB1cmwpIG9yICgneW91dHViZS91c2VyLycgaW4gdXJsKSBvciAoJ3lvdXR1YmUvY2hhbm5lbC8nIGluIHVybCk6CgkJdSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS8lcy8lcy8nICUgKHVybC5zcGxpdCggJy8nIClbLTJdLCB1cmwuc3BsaXQoICcvJyApWy0xXSkKCQlvayA9IHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGUgPSBpbnQoc3lzLmFyZ3ZbMV0pLCB1cmwgPSB1LCBsaXN0aXRlbSA9IGxpeiwgaXNGb2xkZXIgPSBUcnVlKQoJCXJldHVybiBvawkJCglvayA9IHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGUgPSBpbnQoc3lzLmFyZ3ZbMV0pLCB1cmwgPSB1LCBsaXN0aXRlbSA9IGxpeiwgaXNGb2xkZXIgPSBUcnVlKQoJcmV0dXJuIG9rCgpkZWYgYWRkX2xpbmsobmFtZSwgdXJsLCBtb2RlLCBpY29uaW1hZ2UsIGZhbmFydCk6CiMjIEFERFMgVEhFIExJTktTCgl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgdXJsbGliLnF1b3RlX3BsdXModXJsKSArICImbW9kZT0iICsgc3RyKG1vZGUpICsgIiZuYW1lPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpCQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2UgPSAiRGVmYXVsdFZpZGVvLnBuZyIsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlKQoJbGl6LnNldEluZm8oIHR5cGUgPSAiVmlkZW8iLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiOiBuYW1lIH0gKQoJbGl6LnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBmYW5hcnQpCglsaXouc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAndHJ1ZScpIAoJb2sgPSB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlID0gaW50KHN5cy5hcmd2WzFdKSwgdXJsID0gdSwgbGlzdGl0ZW0gPSBsaXopIAoKZGVmIGFkZF9saW5rX2luZm8obmFtZSwgaWNvbmltYWdlLCBmYW5hcnQpOgojIyBBRERTIFRIRSBURVhUIE9OTFkgTElOS1MgV0lUSCBOTyBDTElDSyBBQ1RJT04KCXUgPSBzeXMuYXJndlswXSArICImbmFtZT0iICsgdXJsbGliLnF1b3RlX3BsdXMobmFtZSkgKyAiJmljb25pbWFnZT0iICsgdXJsbGliLnF1b3RlX3BsdXMoaWNvbmltYWdlKQkKCWxpeiA9IHhibWNndWkuTGlzdEl0ZW0obmFtZSwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSkKCWxpei5zZXRJbmZvKCB0eXBlID0gIlZpZGVvIiwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIjogbmFtZSB9ICkKCWxpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgZmFuYXJ0KQoJbGl6LnNldFByb3BlcnR5KCdJc1BsYXlhYmxlJywgJ2ZhbHNlJykgCglvayA9IHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGUgPSBpbnQoc3lzLmFyZ3ZbMV0pLCB1cmwgPSB1LCBsaXN0aXRlbSA9IGxpeikgCgkKZGVmIGFkZF9saW5rX2R1bW15KGljb25pbWFnZSwgZmFuYXJ0KToKIyMgQUREUyBUSEUgQkxBTksgU1BBQ0VSIElOIE1FTlUgV0lUSCBOTyBDTElDSyBBQ1RJT04KCXUgPSBzeXMuYXJndlswXSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpCQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbShpY29uSW1hZ2UgPSAiRGVmYXVsdFZpZGVvLnBuZyIsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlKQoJbGl6LnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBmYW5hcnQpCglsaXouc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAnZmFsc2UnKSAKCW9rID0geGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZSA9IGludChzeXMuYXJndlsxXSksIHVybCA9IHUsIGxpc3RpdGVtID0gbGl6KSAgCgpwYXJhbXMgPSBnZXRfcGFyYW1zKCkKdXJsID0gTm9uZQpuYW1lID0gTm9uZQptb2RlID0gTm9uZQppY29uaW1hZ2UgPSBOb25lCgp0cnk6Cgl1cmwgPSB1cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidXJsIl0pCmV4Y2VwdDoKCXBhc3MKdHJ5OgoJbmFtZSA9IHVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJuYW1lIl0pCmV4Y2VwdDoKCXBhc3MKdHJ5OgoJbW9kZSA9IGludChwYXJhbXNbIm1vZGUiXSkKZXhjZXB0OgoJcGFzcwp0cnk6CglpY29uaW1hZ2UgPSB1cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siaWNvbmltYWdlIl0pCmV4Y2VwdDoKCXBhc3MgIAoKcHJpbnQgIk1vZGU6ICIgKyBzdHIobW9kZSkKcHJpbnQgIlVSTDogIiArIHN0cih1cmwpCnByaW50ICJOYW1lOiAiICsgc3RyKG5hbWUpCnByaW50ICJpY29uaW1hZ2U6ICIgKyBzdHIoaWNvbmltYWdlKQkJCgojIyBUSEVTRSBCRUxPVyBBUkUgRElGRkVSRU5UIE1PREVTIFdISUNIIFRFTExTIEVBQ0ggQ0xJQ0sgV0hFUkUgVE8gR08gSU4gVEhFIEFCT1ZFIENPREUKCmlmIG1vZGUgPT0gTm9uZSBvciB1cmwgPT0gTm9uZSBvciBsZW4odXJsKSA8IDE6CgltYWluKCkKCmVsaWYgbW9kZSA9PSAxOgoJcGxheV92aWRlbyh1cmwpCgplbGlmIG1vZGUgPT0gMjoKCWxpdmV0dl9vbmxpbmUoKQoKZWxpZiBtb2RlID09IDM6Cgltb3ZpZXNfb25saW5lKCkKCQplbGlmIG1vZGUgPT0gNDoKCWRvY3Nfb25saW5lKCkKCmVsaWYgbW9kZSA9PSA5ODoKCXNlYXJjaHR2KCkKCmVsaWYgbW9kZSA9PSA5OToKCXNlYXJjaCgpCgplbGlmIG1vZGUgPT0gNToKCWxpdmV0dl9vbmxpbmUyKCkKCmVsaWYgbW9kZSA9PSA2OgoJbGl2ZXR2X29ubGluZTMoKQoKZWxpZiBtb2RlID09IDc6CglsaXZldHZfb25saW5lNCgpCgplbGlmIG1vZGUgPT0gODoKCWxpdmV0dl9vbmxpbmU1KCkKCgp4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KHBsdWdpbl9oYW5kbGUp') 