import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KaW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgcmUKaW1wb3J0IG9zCmltcG9ydCB4Ym1jcGx1Z2luCmltcG9ydCB4Ym1jZ3VpCmltcG9ydCB4Ym1jYWRkb24KaW1wb3J0IHhibWN2ZnMKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgY29va2llbGliICwgYmFzZTY0CmlmIDk3IC0gOTc6IE9Pb09vTzBvMG8wT08gKyBJSUlJIC4gSWkgJSBvT08KZnJvbSBCZWF1dGlmdWxTb3VwIGltcG9ydCBCZWF1dGlmdWxTdG9uZVNvdXAgLCBCZWF1dGlmdWxTb3VwICwgQmVhdXRpZnVsU09BUApJaUlpSUlJSTEgPSBOb25lCnRyeSA6CiBmcm9tIHhtbCAuIHNheCAuIHNheHV0aWxzIGltcG9ydCBlc2NhcGUKZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQp0cnkgOgogaW1wb3J0IGpzb24KZXhjZXB0IDoKIGltcG9ydCBzaW1wbGVqc29uIGFzIGpzb24KaW1wb3J0IFNpbXBsZURvd25sb2FkZXIgYXMgZG93bmxvYWRlcgppbXBvcnQgdGltZQppZiAyMCAtIDIwOiBJMUlpICsgb28wMG9Pb08wbzBvIC8gaWlpSTFpaUkxaQp0cnkgOgogaW1wb3J0IHNzbAogc3NsIC4gX2NyZWF0ZV9kZWZhdWx0X2h0dHBzX2NvbnRleHQgPSBzc2wgLiBfY3JlYXRlX3VudmVyaWZpZWRfY29udGV4dApleGNlcHQgOgogcGFzcwogaWYgNjQgLSA2NDogb29vIC4gSUkxaTExMWlJMWlpICUgTzAwb28wbyAqIE9vbzBPb09vME9PT08KaW1wb3J0IHppcGZpbGUKaWYgMjUgLSAyNTogb28wT29PCmRlZiBJaUkxaTEgKCBfaW4gLCBfb3V0ICkgOgogdHJ5IDoKICBpMTFJaSA9IHppcGZpbGUgLiBaaXBGaWxlICggX2luICwgJ3InICkKICBpMTFJaSAuIGV4dHJhY3RhbGwgKCBfb3V0ICkKIGV4Y2VwdCBFeGNlcHRpb24gLCBpaTExaUkxaSA6CiAgcHJpbnQgc3RyICggaWkxMWlJMWkgKQogIHJldHVybiBGYWxzZQogIGlmIDEgLSAxOiBpMTFJaUkxSUkgKyBPMDBPIC0gaWlJICUgSWlpSUlpSUkgKiBvTzAwb29vMG8wT08KIHJldHVybiBUcnVlCiBpZiA0MCAtIDQwOiBJSTFpaUkxaWkxaWlpICUgTzAwMDBPIC8gTzAwME9vbzBvME9PbwogaWYgNTQgLSA1NDogT09vT29PMG8wbzBPTyAlIG9PMDBvb28wbzBPTyAtIElpIC8gb28wT29PIC4gb29vIC8gTzAwME9vbzBvME9PbwogaWYgNjEgLSA2MTogaTExSWlJMUlJIC8gSUkxaTExMWlJMWlpICUgT09vT29PMG8wbzBPTyAqIG9PTwpkZWYgb28wb28wT09vTzBvICggKSA6CiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBvcyAuIHBhdGggLiBqb2luICggeGJtYyAuIHRyYW5zbGF0ZVBhdGggKCAic3BlY2lhbDovL2hvbWUvYWRkb25zLyIgKSAuIGRlY29kZSAoICJ1dGYtOCIgKSAsICdyZXBvc2l0b3J5Lk1hbmlhYycgKSApIDoKICByZXR1cm4KICBpZiA4NyAtIDg3OiBJaWlJSWlJSSAlIElJMWlpSTFpaTFpaWkgLSBvbzAwb09vTzBvMG8gJSBPMDBvbzBvICUgaTExSWlJMUlJICUgSUkxaWlJMWlpMWlpaQogSWlJID0gImh0dHA6Ly9jYXRvYWwub3JnL1JlcG9zaXRvcmlvcy9yZXBvc2l0b3J5Lk1hbmlhYy56aXAiCiBpMUlpSTFpaWkgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIG9zIC4gcGF0aCAuIGpvaW4gKCAnc3BlY2lhbDovL2hvbWUnICwgJ2FkZG9ucycgKSApIC4gZGVjb2RlICggInV0Zi04IiApCiBpaWkxSUkgPSBvcyAuIHBhdGggLiBqb2luICggaTFJaUkxaWlpICwgJ3BhY2thZ2VzJyAsICdpc3IuemlwJyApCiBpZiAzIC0gMzogSWlpSUlpSUkgJSBPMDAwME8gKiBPMDAwT29vMG8wT09vIC8gSUkxaTExMWlJMWlpICogTzAwME9vbzBvME9PbwogdXJsbGliIC4gdXJscmV0cmlldmUgKCBJaUkgLCBpaWkxSUkgKQogSWlJMWkxICggaWlpMUlJICwgaTFJaUkxaWlpICkKIGlmIDUxIC0gNTE6IG9vMDBvT29PMG8wbyAuIE8wMDBPb28wbzBPT28gJSBPT29Pb08wbzBvME9PCiB0cnkgOgogIG9zIC4gcmVtb3ZlICggaWlpMUlJICkKIGV4Y2VwdCA6CiAgcGFzcwogIGlmIDMxIC0gMzE6IE8wMG9vMG8gLyBPMDBvbzBvICUgSTFJaSAqIE8wMDBPb28wbzBPT28gLSBJMUlpCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiVXBkYXRlTG9jYWxBZGRvbnMiICkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJVcGRhdGVBZGRvblJlcG9zIiApCiBpZiA3OSAtIDc5OiBvbzBPb08gLSBvTzAwb29vMG8wT08gLyBJaWlJSWlJSSAqIElpICUgTzAwb28wbwogaWYgNDggLSA0ODogb28wMG9Pb08wbzBvICUgSUkxaTExMWlJMWlpCm9vMG9vME9Pb08wbyAoICkKb29PMCA9IEZhbHNlCk9PMDBPMDAwMDBvID0gRmFsc2UKT09vbzBPID0gWyAnMTgwdXBsb2FkLmNvbScgLCAnYWxsbXl2aWRlb3MubmV0JyAsICdiZXN0cmVhbXMubmV0JyAsICdjbGlja251cGxvYWQuY29tJyAsICdjbG91ZHppbGxhLnRvJyAsICdtb3ZzaGFyZS5uZXQnICwgJ25vdmFtb3YuY29tJyAsICdub3d2aWRlby5zeCcgLCAndmlkZW93ZWVkLmVzJyAsICdkYWNsaXBzLmluJyAsICdkYXRlbXVsZS5jb20nICwgJ2Zhc3R2aWRlby5pbicgLCAnZmFzdHN0cmVhbS5pbicgLCAnZmlsZWhvb3QuY29tJyAsICdmaWxlbnVrZS5jb20nICwgJ3NoYXJlc2l4LmNvbScgLCAncGx1cy5nb29nbGUuY29tJyAsICdwaWNhc2F3ZWIuZ29vZ2xlLmNvbScgLCAnZ29yaWxsYXZpZC5jb20nICwgJ2dvcmlsbGF2aWQuaW4nICwgJ2dyaWZ0aG9zdC5jb20nICwgJ2h1Z2VmaWxlcy5uZXQnICwgJ2lwaXRob3MudG8nICwgJ2lzaGFyZWQuZXUnICwgJ2tpbmdmaWxlcy5uZXQnICwgJ21haWwucnUnICwgJ215Lm1haWwucnUnICwgJ3ZpZGVvYXBpLm15Lm1haWwucnUnICwgJ21pZ2h0eXVwbG9hZC5jb20nICwgJ21vb3NoYXJlLmJpeicgLCAnbW92ZGl2eC5jb20nICwgJ21vdnBvZC5uZXQnICwgJ21vdnBvZC5pbicgLCAnbW92cmVlbC5jb20nICwgJ21yZmlsZS5tZScgLCAnbm9zdmlkZW8uY29tJyAsICdvcGVubG9hZC5pbycgLCAncGxheWVkLnRvJyAsICdiaXRzaGFyZS5jb20nICwgJ2ZpbGVmYWN0b3J5LmNvbScgLCAnazJzLmNjJyAsICdvYm9vbS5jb20nICwgJ3JhcGlkZ2F0b3IubmV0JyAsICdwcmltZXNoYXJlLnR2JyAsICdiaXRzaGFyZS5jb20nICwgJ2ZpbGVmYWN0b3J5LmNvbScgLCAnazJzLmNjJyAsICdvYm9vbS5jb20nICwgJ3JhcGlkZ2F0b3IubmV0JyAsICdzaGFyZXJlcG8uY29tJyAsICdzdGFnZXZ1LmNvbScgLCAnc3RyZWFtY2xvdWQuZXUnICwgJ3N0cmVhbWluLnRvJyAsICd0aGVmaWxlLm1lJyAsICd0aGV2aWRlby5tZScgLCAndHVzZmlsZXMubmV0JyAsICd1cGxvYWRjLmNvbScgLCAnemFsYWEuY29tJyAsICd1cGxvYWRyb2NrZXQubmV0JyAsICd1cHRvYm94LmNvbScgLCAndi12aWRzLmNvbScgLCAndmVlaGQuY29tJyAsICd2aWRidWxsLmNvbScgLCAndmlkZW9tZWdhLnR2JyAsICd2aWRwbGF5Lm5ldCcgLCAndmlkc3BvdC5uZXQnICwgJ3ZpZHRvLm1lJyAsICd2aWR6aS50dicgLCAndmltZW8uY29tJyAsICd2ay5jb20nICwgJ3ZvZGxvY2tlci5jb20nICwgJ3hmaWxlbG9hZC5jb20nICwgJ3h2aWRzdGFnZS5jb20nICwgJ3pldHRhaG9zdC50dicgXQpJaUkxaWkxSTExaUkgPSBbICdwbHVnaW4udmlkZW8uZHJhbWFzb25saW5lJyAsICdwbHVnaW4udmlkZW8uZjRtVGVzdGVyJyAsICdwbHVnaW4udmlkZW8uc2hhaGlkbWJjbmV0JyAsICdwbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwnICwgJ3BsdWdpbi5zdHJlYW0udmF1Z2hubGl2ZS50dicgLCAncGx1Z2luLnZpZGVvLlplbVRWLXNoYW5pJyBdCmdsb2JhbCBJaWlpaUkxCklpaWlpSTEgPSAwCmNsYXNzIGlpSW9vMDAwT29PT08wT28gKCB1cmxsaWIyIC4gSFRUUEVycm9yUHJvY2Vzc29yICkgOgogZGVmIGh0dHBfcmVzcG9uc2UgKCBzZWxmICwgcmVxdWVzdCAsIHJlc3BvbnNlICkgOgogIHJldHVybiByZXNwb25zZQogaHR0cHNfcmVzcG9uc2UgPSBodHRwX3Jlc3BvbnNlCiBpZiA3MyAtIDczOiBJaWlJSWlJSSAvIE8wME8Kb08wbzBvTzAgPSBGYWxzZSA7CmlmIG9PMG8wb08wIDoKIGlmIDYzIC0gNjM6IElJMWkxMTFpSTFpaSAlIElJMWlpSTFpaTFpaWkgLSBPMDBvbzBvCiBpZiAzNiAtIDM2OiBPMDAwT29vMG8wT09vIC8gaWlJICsgb09PIC8gSUkxaWlJMWlpMWlpaSArIElpICsgSUlJSQogdHJ5IDoKICBpbXBvcnQgcHlzcmMgLiBweWRldmQgYXMgcHlkZXZkCiAgaWYgNTkgLSA1OTogTzAwTyAvIE9vbzBPb09vME9PT08gKyBPMDBPICsgb08wMG9vbzBvME9PCiAgcHlkZXZkIC4gc2V0dHJhY2UgKCAnbG9jYWxob3N0JyAsIHN0ZG91dFRvU2VydmVyID0gVHJ1ZSAsIHN0ZGVyclRvU2VydmVyID0gVHJ1ZSApCiBleGNlcHQgSW1wb3J0RXJyb3IgOgogIHN5cyAuIHN0ZGVyciAuIHdyaXRlICggIkVycm9yOiAiICsKICJZb3UgbXVzdCBhZGQgb3JnLnB5dGhvbi5weWRldi5kZWJ1Zy5weXNyYyB0byB5b3VyIFBZVEhPTlBBVEguIiApCiAgc3lzIC4gZXhpdCAoIDEgKQogIGlmIDU1IC0gNTU6IG9PTyAtIElpCk9vMDBPID0geGJtY2FkZG9uIC4gQWRkb24gKCAncGx1Z2luLnZpZGVvLlBsYW5ldGEnICkKaTFpMUlpaTFJMWkgPSBPbzAwTyAuIGdldEFkZG9uSW5mbyAoICd2ZXJzaW9uJyApCm8wMCA9IHhibWMgLiB0cmFuc2xhdGVQYXRoICggT28wME8gLiBnZXRBZGRvbkluZm8gKCAncHJvZmlsZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCkkxMUlpaTExaTFJaTEgPSB4Ym1jIC4gdHJhbnNsYXRlUGF0aCAoIE9vMDBPIC4gZ2V0QWRkb25JbmZvICggJ3BhdGgnICkgLiBkZWNvZGUgKCAndXRmLTgnICkgKQppaUlJID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICdmYXZvcml0ZXMnICkKb29vTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnaGlzdG9yeScgKQppSUkxSTFJID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICdsaXN0X3JldmlzaW9uJyApCk9PMDBPb28wbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBJMTFJaWkxMWkxSWkxICwgJ2ljb24ucG5nJyApCm9PID0gImh0dHBzOi8vaS5pbWd1ci5jb20vQVNYZHFqYS5wbmciCmlpMWlJMTExaUlpMSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBJMTFJaWkxMWkxSWkxICwgJ2ZhbmFydC5qcGcnICkKTzBPID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICdzb3VyY2VfZmlsZScgKQpPbyA9IG8wMAppZiA1MyAtIDUzOiBJSTFpMTExaUkxaWkKaWlpMTFpMUlJaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnTGl2ZXdlYlRWJyApCmRvd25sb2FkZXIgPSBkb3dubG9hZGVyIC4gU2ltcGxlRG93bmxvYWRlciAoICkKaTFJaWlpMTFpaSA9IE9vMDBPIC4gZ2V0U2V0dGluZyAoICdkZWJ1ZycgKQppZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpaUlJICkgPT0gVHJ1ZSA6CiBJaUlpaWlJID0gb3BlbiAoIGlpSUkgKSAuIHJlYWQgKCApCmVsc2UgOiBJaUlpaWlJID0gWyBdCmlmIDIzIC0gMjM6IE8wMDAwTyArIElpICsgTzAwMDBPIC4gTzAwb28wbyAuIElJMWkxMTFpSTFpaSAqIEkxSWkKT29PTzAgPSBbIHsgInVybCIgOiAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01hbmlhYzIwMTcvUGxhbmV0YS9tYXN0ZXIvcGxhbmV0YS54bWwiICwgImZhbmFydCIgOiAiaHR0cDovL2kuaW1ndXIuY29tL25IaU8xS0guanBnIiB9IF0KaWYgNDUgLSA0NTogb08wMG9vbzBvME9PCmlmIDQ1IC0gNDU6IE8wMG9vMG8gLiBPb28wT29PbzBPT09PIC8gaTExSWlJMUlJICUgTzAwME9vbzBvME9PbwpkZWYgaTFpSWlpICggc3RyaW5nICkgOgogaWYgaTFJaWlpMTFpaSA9PSAndHJ1ZScgOgogIHhibWMgLiBsb2cgKCAiW2FkZG9uLlBsYW5ldGEtJXNdOiAlcyIgJSAoIGkxaTFJaWkxSTFpICwgc3RyaW5nICkgKQogIGlmIDc5IC0gNzk6IG9vMDBvT29PMG8wbyAtIE9vbzBPb09vME9PT08gJSBJSTFpMTExaUkxaWkKICBpZiAzOSAtIDM5OiBvT08gLSBJSTFpMTExaUkxaWkgLyBPMDAwME8gLiBvTzAwb29vMG8wT08gLiBvTzAwb29vMG8wT08gLiBJaQogIGlmIDg4IC0gODg6IE9vbzBPb09vME9PT08gJSBJMUlpIC0gTzAwMDBPCiAgaWYgNzcgLSA3NzogTzAwTyAvIE9vbzBPb09vME9PT08gLSBPb28wT29PbzBPT09PCmRlZiBPMG8gKCB1cmwgLCBoZWFkZXJzID0gTm9uZSApIDoKIHRyeSA6CiAgaWYgaGVhZGVycyBpcyBOb25lIDoKICAgaGVhZGVycyA9IHsgJ1VzZXItYWdlbnQnIDogJ05FVEFJJyB9CiAgIGlmIDU0IC0gNTQ6IG9vbyArIElJSUkgKiBJaWlJSWlJSSArIElJMWlpSTFpaTFpaWkKICAgaWYgODggLSA4ODogb28wT29PICsgT09vT29PMG8wbzBPTyAvIElpaUlJaUlJIC0gTzAwMDBPICsgSWkKICAgaWYgMTAgLSAxMDogSUlJSSAuIElJSUkgKyBvTzAwb29vMG8wT08gLSBJaSAtIGlpaUkxaWlJMWkKICAgaWYgNzQgLSA3NDogT29vME9vT28wT09PTyAtIG9PMDBvb28wbzBPTyAvIE8wMDBPb28wbzBPT28KICAgaWYgNTAgLSA1MDogT09vT29PMG8wbzBPTyAvIGlpSSAvIElJMWlpSTFpaTFpaWkgLiBJaSAlIE8wME8KICAgaWYgMzYgLSAzNjogaTExSWlJMUlJICUgSUkxaWlJMWlpMWlpaQogICBpZiAzOCAtIDM4OiBJSTFpMTExaUkxaWkgKiBJaQogICBpZiA2IC0gNjogaWlJICUgSUkxaWlJMWlpMWlpaSAuIElpaUlJaUlJICsgaTExSWlJMUlJIC4gaWlJICUgb28wT29PCiAgIGlmIDE3IC0gMTc6IE9Pb09vTzBvMG8wT08gLSBvb28gKyBvbzAwb09vTzBvMG8KICAgaWYgMTEgLSAxMTogSWlpSUlpSUkgKyBvb28gLSBJaWlJSWlJSQogICBpZiA1MCAtIDUwOiBpaWlJMWlpSTFpIC8gb28wT29PIC0gTzAwb28wbyArIElpaUlJaUlJIC4gSWkgLiBJSUlJCiAgaWYgJ3wnIGluIHVybCA6CiAgIHVybCAsIGlpaTFpSUlJMTExMUkgPSB1cmwgLiBzcGxpdCAoICd8JyApCiAgIGlpaTFpSUlJMTExMUkgPSBpaWkxaUlJSTExMTFJIC4gc3BsaXQgKCAnJicgKQogICBpZiAyMiAtIDIyOiBPMDBPIC8gTzAwMDBPCiAgIGZvciBJSWlJMTEgaW4gaWlpMWlJSUkxMTExSSA6CiAgICBpZiBsZW4gKCBJSWlJMTEgLiBzcGxpdCAoICc9JyApICkgPT0gMiA6CiAgICAgSTExMTFJSWkxaSAsIElJMUkxMUkxSUlJMSA9IElJaUkxMSAuIHNwbGl0ICggJz0nICkKICAgIGVsc2UgOgogICAgIGlJaWkgPSBJSWlJMTEgLiBzcGxpdCAoICc9JyApCiAgICAgSTExMTFJSWkxaSA9IGlJaWkgWyAwIF0KICAgICBJSTFJMTFJMUlJSTEgPSAnPScgLiBqb2luICggaUlpaSBbIDEgOiBdICkKICAgICBpZiA1NCAtIDU0OiBPT29Pb08wbzBvME9PIC0gb29vIC0gaTExSWlJMUlJICUgSTFJaQogICAgcHJpbnQgSTExMTFJSWkxaSAsIElJMUkxMUkxSUlJMQogICAgaGVhZGVycyBbIEkxMTExSUlpMWkgXSA9IElJMUkxMUkxSUlJMQogICAgaWYgMjEgLSAyMTogSWlpSUlpSUkgKiBJMUlpIC4gSWkKICBvME9Pb28wID0gdXJsbGliMiAuIFJlcXVlc3QgKCB1cmwgLCBOb25lICwgaGVhZGVycyApCiAgaWkxSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIG8wT09vbzAgKQogIE9PT08wID0gaWkxSWkgLiByZWFkICggKQogIGlpMUlpIC4gY2xvc2UgKCApCiAgcmV0dXJuIE9PT08wCiBleGNlcHQgdXJsbGliMiAuIFVSTEVycm9yICwgaWkxMWlJMWkgOgogIGkxaUlpaSAoICdVUkw6ICcgKyB1cmwgKQogIGlmIGhhc2F0dHIgKCBpaTExaUkxaSAsICdjb2RlJyApIDoKICAgaTFpSWlpICggJ1dlIGZhaWxlZCB3aXRoIGVycm9yIGNvZGUgLSAlcy4nICUgaWkxMWlJMWkgLiBjb2RlICkKICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBsYW5ldGEsV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICIgKyBzdHIgKCBpaTExaUkxaSAuIGNvZGUgKSArICIsMTAwMDAsIiArIE9PMDBPb28wbyArICIpIiApCiAgIGlmIDQyIC0gNDI6IElpaUlJaUlJICogaTExSWlJMUlJIC4gTzAwTyArIElJSUkgKiBPT29Pb08wbzBvME9PCiAgZWxpZiBoYXNhdHRyICggaWkxMWlJMWkgLCAncmVhc29uJyApIDoKICAgaTFpSWlpICggJ1dlIGZhaWxlZCB0byByZWFjaCBhIHNlcnZlci4nICkKICAgaTFpSWlpICggJ1JlYXNvbjogJXMnICUgaWkxMWlJMWkgLiByZWFzb24gKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGxhbmV0YSxXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuIC0gIiArIHN0ciAoIGlpMTFpSTFpIC4gcmVhc29uICkgKyAiLDEwMDAwLCIgKyBPTzAwT29vMG8gKyAiKSIgKQogICBpZiA3NyAtIDc3OiBJSUlJIC4gaWlpSTFpaUkxaQogICBpZiA5NCAtIDk0OiBvb28gKyBpMTFJaUkxSUkKICAgaWYgNTYgLSA1NjogTzAwMDBPICUgTzAwTyAuIEkxSWkgLyBJSTFpMTExaUkxaWkKICAgaWYgMjYgLSAyNjogTzAwMDBPIC4gSUlJSSAlIElpaUlJaUlJCmRlZiBJMUlpSTFpaTFpMWkxICggKSA6CiB0cnkgOgogIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIGlpSUkgKSA9PSBUcnVlIDoKICAgSWlJaWlpSSA9IG9wZW4gKCBpaUlJICkgLiByZWFkICggKQogICBpZiBJaUlpaWlJID09ICJbXSIgOgogICAgb3MgLiByZW1vdmUgKCBpaUlJICkKICAgZWxzZSA6CiAgICBpZiAyMyAtIDIzOiBJMUlpIC8gb09PIC8gTzAwTyAtIE8wMDBPb28wbzBPT28gLSBpaUkgJSBpaUkKICAgIE9PME9vT29PMDAgKCAnW0NPTE9SIG9yYW5nZV1GYXZvcml0b3NbL0NPTE9SXScgLCAndXJsJyAsIDQgLCBvTyAsIGlpMWlJMTExaUlpMSAsICcnICwgJycgLCAnJyAsICcnICkKICAgIGlmIDIgLSAyOiBPMDAwME8gLSBpaWlJMWlpSTFpIC0gSTFJaSAlIGlpSQogIG8wT29vT08wMDAgPSBPb09PMAogIGlmIDI3IC0gMjc6IElpCiAgaWYgbGVuICggbzBPb29PTzAwMCApID4gMSA6CiAgIGZvciBvME8wT28wMCBpbiBvME9vb09PMDAwIDoKICAgIHRyeSA6CiAgICAgaWYgMjkgLSAyOTogSTFJaSAtIG9vbyAlIElJMWlpSTFpaTFpaWkgLyBJMUlpICogTzAwMDBPICUgSTFJaQogICAgIGlmIGlzaW5zdGFuY2UgKCBvME8wT28wMCAsIGxpc3QgKSA6CiAgICAgIE9PME9vT29PMDAgKCBvME8wT28wMCBbIDAgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIG8wTzBPbzAwIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIE9PMDBPb28wbyAsIGlpMWlJMTExaUlpMSAsICcnICwgJycgLCAnJyAsICcnICwgJ3NvdXJjZScgKQogICAgIGVsc2UgOgogICAgICBvb09PMDBPID0gT08wME9vbzBvCiAgICAgIGkxSWkxID0gaWkxaUkxMTFpSWkxCiAgICAgIE8wMCA9ICcnCiAgICAgIEkxaUlpMSA9ICcnCiAgICAgIE9vT28wTzBPTzAwTyA9ICdDYXRuZXInCiAgICAgIG8wMDAgPSAnJwogICAgICBpZiBvME8wT28wMCAuIGhhc19rZXkgKCAndGh1bWJuYWlsJyApIDoKICAgICAgIG9vT08wME8gPSBvME8wT28wMCBbICd0aHVtYm5haWwnIF0KICAgICAgaWYgbzBPME9vMDAgLiBoYXNfa2V5ICggJ2ZhbmFydCcgKSA6CiAgICAgICBpMUlpMSA9IG8wTzBPbzAwIFsgJ2ZhbmFydCcgXQogICAgICBpZiBvME8wT28wMCAuIGhhc19rZXkgKCAnZGVzY3JpcHRpb24nICkgOgogICAgICAgTzAwID0gbzBPME9vMDAgWyAnZGVzY3JpcHRpb24nIF0KICAgICAgaWYgbzBPME9vMDAgLiBoYXNfa2V5ICggJ2RhdGUnICkgOgogICAgICAgSTFpSWkxID0gbzBPME9vMDAgWyAnZGF0ZScgXQogICAgICBpZiBvME8wT28wMCAuIGhhc19rZXkgKCAnZ2VucmUnICkgOgogICAgICAgbzAwMCA9IG8wTzBPbzAwIFsgJ2dlbnJlJyBdCiAgICAgIGlmIG8wTzBPbzAwIC4gaGFzX2tleSAoICdjcmVkaXRzJyApIDoKICAgICAgIE9vT28wTzBPTzAwTyA9IG8wTzBPbzAwIFsgJ2NyZWRpdHMnIF0KICAgICAgT08wT29Pb08wMCAoIG8wTzBPbzAwIFsgJ3RpdGxlJyBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgbzBPME9vMDAgWyAndXJsJyBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIG9vT08wME8gLCBpMUlpMSAsIE8wMCAsIG8wMDAgLCBJMWlJaTEgLCBPb09vME8wT08wME8gLCAnc291cmNlJyApCiAgICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiAgZWxzZSA6CiAgIGlmIGxlbiAoIG8wT29vT08wMDAgKSA9PSAxIDoKICAgIGlmIGlzaW5zdGFuY2UgKCBvME9vb09PMDAwIFsgMCBdICwgbGlzdCApIDoKICAgICBPb29vb28wT08gKCBvME9vb09PMDAwIFsgMCBdIFsgMSBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgaWkxaUkxMTFpSWkxICkKICAgIGVsc2UgOgogICAgIE9vb29vbzBPTyAoIG8wT29vT08wMDAgWyAwIF0gWyAndXJsJyBdICwgbzBPb29PTzAwMCBbIDAgXSBbICdmYW5hcnQnIF0gKQogZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogaWYgNTMgLSA1MzogT29vME9vT28wT09PTyAtIEkxSWkgLyBPMDBvbzBvIC0gaTExSWlJMUlJICUgT29vME9vT28wT09PTwpkZWYgb09vbzBvME9vTyAoIHVybCA9IE5vbmUgKSA6CiBpZiB1cmwgaXMgTm9uZSA6CiAgaWYgbm90IE9vMDBPIC4gZ2V0U2V0dGluZyAoICJuZXdfZmlsZV9zb3VyY2UiICkgPT0gIiIgOgogICBPT08wME9vMDBPb29PID0gT28wME8gLiBnZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKQogIGVsaWYgbm90IE9vMDBPIC4gZ2V0U2V0dGluZyAoICJuZXdfdXJsX3NvdXJjZSIgKSA9PSAiIiA6CiAgIE9PTzAwT28wME9vb08gPSBPbzAwTyAuIGdldFNldHRpbmcgKCAnbmV3X3VybF9zb3VyY2UnICkgLiBkZWNvZGUgKCAndXRmLTgnICkKIGVsc2UgOgogIE9PTzAwT28wME9vb08gPSB1cmwKIGlmIE9PTzAwT28wME9vb08gPT0gJycgb3IgT09PMDBPbzAwT29vTyBpcyBOb25lIDoKICByZXR1cm4KIGkxaUlpaSAoICdBZGRpbmcgTmV3IFNvdXJjZTogJyArIE9PTzAwT28wME9vb08gLiBlbmNvZGUgKCAndXRmLTgnICkgKQogaWYgMjcgLSAyNzogSUlJSSAuIElJSUkgJSBPT29Pb08wbzBvME9PCiBvb29pMUkgPSBOb25lCiBpZiA2NiAtIDY2OiBJSTFpMTExaUkxaWkgLiBpMTFJaUkxSUkKIE9PT08wID0gb08wT08gKCBPT08wME9vMDBPb29PICkKIGlmIDIyIC0gMjI6IGlpSSAvIG9vbyAtIE8wMDBPb28wbzBPT28KIGlmIGlzaW5zdGFuY2UgKCBPT09PMCAsIEJlYXV0aWZ1bFNPQVAgKSA6CiAgaWYgT09PTzAgLiBmaW5kICggJ2NoYW5uZWxzX2luZm8nICkgOgogICBvb29pMUkgPSBPT09PMCAuIGNoYW5uZWxzX2luZm8KICBlbGlmIE9PT08wIC4gZmluZCAoICdpdGVtc19pbmZvJyApIDoKICAgb29vaTFJID0gT09PTzAgLiBpdGVtc19pbmZvCiBpZiBvb29pMUkgOgogIGlpSWlJaWlpSSA9IHsgfQogIGlpSWlJaWlpSSBbICd1cmwnIF0gPSBPT08wME9vMDBPb29PCiAgdHJ5IDogaWlJaUlpaWlJIFsgJ3RpdGxlJyBdID0gb29vaTFJIC4gdGl0bGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogaWlJaUlpaWlJIFsgJ3RodW1ibmFpbCcgXSA9IG9vb2kxSSAuIHRodW1ibmFpbCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBpaUlpSWlpaUkgWyAnZmFuYXJ0JyBdID0gb29vaTFJIC4gZmFuYXJ0IC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWlJaWlpSSBbICdnZW5yZScgXSA9IG9vb2kxSSAuIGdlbnJlIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWlJaWlpSSBbICdkZXNjcmlwdGlvbicgXSA9IG9vb2kxSSAuIGRlc2NyaXB0aW9uIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlpSWlJaWlpSSBbICdkYXRlJyBdID0gb29vaTFJIC4gZGF0ZSAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBpaUlpSWlpaUkgWyAnY3JlZGl0cycgXSA9IG9vb2kxSSAuIGNyZWRpdHMgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiBlbHNlIDoKICBpZiAnLycgaW4gT09PMDBPbzAwT29vTyA6CiAgIEkxSSA9IE9PTzAwT28wME9vb08gLiBzcGxpdCAoICcvJyApIFsgLSAxIF0gLiBzcGxpdCAoICcuJyApIFsgMCBdCiAgaWYgJ1xcJyBpbiBPT08wME9vMDBPb29PIDoKICAgSTFJID0gT09PMDBPbzAwT29vTyAuIHNwbGl0ICggJ1xcJyApIFsgLSAxIF0gLiBzcGxpdCAoICcuJyApIFsgMCBdCiAgaWYgJyUnIGluIEkxSSA6CiAgIEkxSSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIEkxSSApCiAgb28wTyA9IHhibWMgLiBLZXlib2FyZCAoIEkxSSAsICdEaXNwbGF5ZWQgTmFtZSwgUmVuYW1lPycgKQogIG9vME8gLiBkb01vZGFsICggKQogIGlmICggb28wTyAuIGlzQ29uZmlybWVkICggKSA9PSBGYWxzZSApIDoKICAgcmV0dXJuCiAgSUlpMWkgPSBvbzBPIC4gZ2V0VGV4dCAoICkKICBpZiBsZW4gKCBJSWkxaSApID09IDAgOgogICByZXR1cm4KICBpaUlpSWlpaUkgPSB7IH0KICBpaUlpSWlpaUkgWyAndGl0bGUnIF0gPSBJSWkxaQogIGlpSWlJaWlpSSBbICd1cmwnIF0gPSBPT08wME9vMDBPb29PCiAgaWlJaUlpaWlJIFsgJ2ZhbmFydCcgXSA9IGkxSWkxCiAgaWYgNiAtIDY6IE8wMDAwTwogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggTzBPICkgPT0gRmFsc2UgOgogIE8wTzAwMG8gPSBbIF0KICBPME8wMDBvIC4gYXBwZW5kICggaWlJaUlpaWlJICkKICBpSUlpSUlJMWkgPSBvcGVuICggTzBPICwgInciICkKICBpSUlpSUlJMWkgLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIE8wTzAwMG8gKSApCiAgaUlJaUlJSTFpIC4gY2xvc2UgKCApCiBlbHNlIDoKICBvME9vb09PMDAwID0ganNvbiAuIGxvYWRzICggb3BlbiAoIE8wTyAsICJyIiApIC4gcmVhZCAoICkgKQogIG8wT29vT08wMDAgLiBhcHBlbmQgKCBpaUlpSWlpaUkgKQogIGlJSWlJSUkxaSA9IG9wZW4gKCBPME8gLCAidyIgKQogIGlJSWlJSUkxaSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggbzBPb29PTzAwMCApICkKICBpSUlpSUlJMWkgLiBjbG9zZSAoICkKIE9vMDBPIC4gc2V0U2V0dGluZyAoICduZXdfdXJsX3NvdXJjZScgLCAiIiApCiBPbzAwTyAuIHNldFNldHRpbmcgKCAnbmV3X2ZpbGVfc291cmNlJyAsICIiICkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQbGFuZXRhLE5ldyBzb3VyY2UgYWRkZWQuLDUwMDAsIiArIE9PMDBPb28wbyArICIpIiApCiBpZiBub3QgdXJsIGlzIE5vbmUgOgogIGlmICd4Ym1jcGx1cy54Yi5mdW5waWMuZGUnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xNCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKICBlbGlmICdjb21tdW5pdHktbGlua3MnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xMCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKIGVsc2UgOiBPbzAwTyAuIG9wZW5TZXR0aW5ncyAoICkKIGlmIDkgLSA5OiBPMDBvbzBvIC4gTzAwb28wbwpkZWYgaWkgKCBuYW1lICkgOgogbzBPb29PTzAwMCA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBPME8gLCAiciIgKSAuIHJlYWQgKCApICkKIGZvciBJMUlpMWlpSTExaTEgaW4gcmFuZ2UgKCBsZW4gKCBvME9vb09PMDAwICkgKSA6CiAgaWYgaXNpbnN0YW5jZSAoIG8wT29vT08wMDAgWyBJMUlpMWlpSTExaTEgXSAsIGxpc3QgKSA6CiAgIGlmIG8wT29vT08wMDAgWyBJMUlpMWlpSTExaTEgXSBbIDAgXSA9PSBuYW1lIDoKICAgIGRlbCBvME9vb09PMDAwIFsgSTFJaTFpaUkxMWkxIF0KICAgIGlJSWlJSUkxaSA9IG9wZW4gKCBPME8gLCAidyIgKQogICAgaUlJaUlJSTFpIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBvME9vb09PMDAwICkgKQogICAgaUlJaUlJSTFpIC4gY2xvc2UgKCApCiAgICBicmVhawogIGVsc2UgOgogICBpZiBvME9vb09PMDAwIFsgSTFJaTFpaUkxMWkxIF0gWyAndGl0bGUnIF0gPT0gbmFtZSA6CiAgICBkZWwgbzBPb29PTzAwMCBbIEkxSWkxaWlJMTFpMSBdCiAgICBpSUlpSUlJMWkgPSBvcGVuICggTzBPICwgInciICkKICAgIGlJSWlJSUkxaSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggbzBPb29PTzAwMCApICkKICAgIGlJSWlJSUkxaSAuIGNsb3NlICggKQogICAgYnJlYWsKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5SZWZyZXNoIiApCiBpZiAyNyAtIDI3OiBvbzBPb08gKyBvb28gLSBpaUkKZGVmIG9vTzBvMG9PMG8gKCB1cmwgLCBicm93c2UgPSBGYWxzZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICB1cmwgPSAnaHR0cDovL3hibWNwbHVzLnhiLmZ1bnBpYy5kZS93d3ctZGF0YS9maWxlc3lzdGVtLycKIG9vMDBvb08wTzAgPSBCZWF1dGlmdWxTb3VwICggTzBvICggdXJsICkgLCBjb252ZXJ0RW50aXRpZXMgPSBCZWF1dGlmdWxTb3VwIC4gSFRNTF9FTlRJVElFUyApCiBmb3IgbzBPME9vMDAgaW4gb28wMG9vTzBPMCAoICdhJyApIDoKICBPT29PID0gbzBPME9vMDAgWyAnaHJlZicgXQogIGlmIG5vdCBPT29PIC4gc3RhcnRzd2l0aCAoICc/JyApIDoKICAgaUlJMUlpMWlpMTEgPSBvME8wT28wMCAuIHN0cmluZwogICBpZiBpSUkxSWkxaWkxMSBub3QgaW4gWyAnUGFyZW50IERpcmVjdG9yeScgLCAncmVjeWNsZV9iaW4vJyBdIDoKICAgIGlmIE9Pb08gLiBlbmRzd2l0aCAoICcvJyApIDoKICAgICBpZiBicm93c2UgOgogICAgICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgLCB1cmwgKyBPT29PICwgMTUgLCBPTzAwT29vMG8gLCBpMUlpMSAsICcnICwgJycgLCAnJyApCiAgICAgZWxzZSA6CiAgICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAsIHVybCArIE9Pb08gLCAxNCAsIE9PMDBPb28wbyAsIGkxSWkxICwgJycgLCAnJyAsICcnICkKICAgIGVsaWYgT09vTyAuIGVuZHN3aXRoICggJy54bWwnICkgOgogICAgIGlmIGJyb3dzZSA6CiAgICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAsIHVybCArIE9Pb08gLCAxICwgT08wME9vbzBvICwgaTFJaTEgLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgIGVsc2UgOgogICAgICBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPME8gKSA9PSBUcnVlIDoKICAgICAgIGlmIGlJSTFJaTFpaTExIGluIE9vT08wIDoKICAgICAgICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgKyAnIChpbiB1c2UpJyAsIHVybCArIE9Pb08gLCAxMSAsIE9PMDBPb28wbyAsIGkxSWkxICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgIGVsc2UgOgogICAgICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAsIHVybCArIE9Pb08gLCAxMSAsIE9PMDBPb28wbyAsIGkxSWkxICwgJycgLCAnJyAsICcnICwgJycgLCAnZG93bmxvYWQnICkKICAgICAgZWxzZSA6CiAgICAgICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgLCB1cmwgKyBPT29PICwgMTEgLCBPTzAwT29vMG8gLCBpMUlpMSAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBpZiAxNSAtIDE1OiBpaUkgLSBJSTFpaUkxaWkxaWlpIC8gSUkxaTExMWlJMWlpIC4gb28wMG9Pb08wbzBvIC0gSUkxaTExMWlJMWlpICsgTzAwb28wbwogICAgICAgaWYgMTcgLSAxNzogSUkxaWlJMWlpMWlpaSAtIE8wMDBPb28wbzBPT28gKyBPMDBPICogTzAwME9vbzBvME9PbwpkZWYgT29vTzBPT28wICggYnJvd3NlID0gRmFsc2UgKSA6CiBJaUkgPSAnaHR0cDovL2NvbW11bml0eS1saW5rcy5nb29nbGVjb2RlLmNvbS9zdm4vdHJ1bmsvJwogb28wMG9vTzBPMCA9IEJlYXV0aWZ1bFNvdXAgKCBPMG8gKCBJaUkgKSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFNvdXAgLiBIVE1MX0VOVElUSUVTICkKIGlJaUlJaWkxID0gb28wMG9vTzBPMCAoICd1bCcgKSBbIDAgXSAoICdsaScgKSBbIDEgOiBdCiBmb3IgbzBPME9vMDAgaW4gaUlpSUlpaTEgOgogIGlJSTFJaTFpaTExID0gbzBPME9vMDAgKCAnYScgKSBbIDAgXSBbICdocmVmJyBdCiAgaWYgYnJvd3NlIDoKICAgT08wT29Pb08wMCAoIGlJSTFJaTFpaTExICwgSWlJICsgaUlJMUlpMWlpMTEgLCAxICwgT08wME9vbzBvICwgaTFJaTEgLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogIGVsc2UgOgogICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgLCBJaUkgKyBpSUkxSWkxaWkxMSAsIDExICwgT08wME9vbzBvICwgaTFJaTEgLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICBpZiA0NiAtIDQ2OiBJMUlpICogTzAwb28wbyArIEkxSWkKZGVmIG9PME9PICggdXJsICwgZGF0YSA9IE5vbmUgKSA6CiBnbG9iYWwgSWlJaUlJSUkxICwgb29PMCAsIE9PMDBPMDAwMDBvCiBvb08wID0gRmFsc2UKIE9PMDBPMDAwMDBvID0gRmFsc2UKIGlmIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cDovLycgKSBvciB1cmwgLiBzdGFydHN3aXRoICggJ2h0dHBzOi8vJyApIDoKICBpMUlJMUlpSTFpSSA9IEZhbHNlCiAgaWYgJyQkVFNET1dOTE9BREVSJCQnIGluIHVybCA6CiAgIG9vTzAgPSBUcnVlCiAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJCRUU0RPV05MT0FERVIkJCIgLCAiIiApCiAgaWYgJyQkSExTUkVUUlkkJCcgaW4gdXJsIDoKICAgT08wME8wMDAwMG8gPSBUcnVlCiAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJCRITFNSRVRSWSQkIiAsICIiICkKICBpZiAnJCRMU1Byb0VuY0tleT0nIGluIHVybCA6CiAgIGkxSUkxSWlJMWlJID0gdXJsIC4gc3BsaXQgKCAnJCRMU1Byb0VuY0tleT0nICkgWyAxIF0gLiBzcGxpdCAoICckJCcgKSBbIDAgXQogICBpSSA9ICckJExTUHJvRW5jS2V5PSVzJCQnICUgaTFJSTFJaUkxaUkKICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoIGlJICwgIiIgKQogICBpZiA0IC0gNDogTzAwMDBPIC8gT09vT29PMG8wbzBPTyAtIElpaUlJaUlJIC0gb08wMG9vbzBvME9PCiAgZGF0YSA9IE8wbyAoIHVybCApCiAgaWYgaTFJSTFJaUkxaUkgOgogICBpbXBvcnQgcHlhZXMKICAgaTFJSTFJaUkxaUkgPSBpMUlJMUlpSTFpSSAuIGVuY29kZSAoICJhc2NpaSIgKQogICBwcmludCBpMUlJMUlpSTFpSQogICBJMWlpSTFJSUlpSWkgPSAxNiAtIGxlbiAoIGkxSUkxSWlJMWlJICkKICAgaTFJSTFJaUkxaUkgPSBpMUlJMUlpSTFpSSArICggY2hyICggMCApICogKCBJMWlpSTFJSUlpSWkgKSApCiAgIHByaW50IHJlcHIgKCBpMUlJMUlpSTFpSSApCiAgIGRhdGEgPSBiYXNlNjQgLiBiNjRkZWNvZGUgKCBkYXRhICkKICAgaUkxaUkxSTEgPSBweWFlcyAuIG5ldyAoIGkxSUkxSWlJMWlJICwgcHlhZXMgLiBNT0RFX0VDQiAsIElWID0gTm9uZSApCiAgIGRhdGEgPSBpSTFpSTFJMSAuIGRlY3J5cHQgKCBkYXRhICkgLiBzcGxpdCAoICdcMCcgKSBbIDAgXQogICBpZiAxMDAgLSAxMDA6IE8wMG9vMG8gLiBJaSAtIE9Pb09vTzBvMG8wT08gLSBJSTFpMTExaUkxaWkgLSBpMTFJaUkxSUkKICBpZiByZSAuIHNlYXJjaCAoICIjRVhUTTNVIiAsIGRhdGEgKSBvciAnbTN1JyBpbiB1cmwgOgogICBpZiA2IC0gNjogTzAwTyAlIE9Pb09vTzBvMG8wT08gKyBvb28gKiBJMUlpCiAgIHJldHVybiBkYXRhCiBlbGlmIGRhdGEgPT0gTm9uZSA6CiAgaWYgbm90ICcvJyBpbiB1cmwgb3Igbm90ICdcXCcgaW4gdXJsIDoKICAgaWYgNDUgLSA0NTogTzAwTyAvIElpICUgb29vCiAgIHVybCA9IG9zIC4gcGF0aCAuIGpvaW4gKCBpaWkxMWkxSUlpICwgdXJsICkKICBpZiB4Ym1jdmZzIC4gZXhpc3RzICggdXJsICkgOgogICBpZiB1cmwgLiBzdGFydHN3aXRoICggInNtYjovLyIgKSBvciB1cmwgLiBzdGFydHN3aXRoICggIm5mczovLyIgKSA6CiAgICBjb3B5ID0geGJtY3ZmcyAuIGNvcHkgKCB1cmwgLCBvcyAuIHBhdGggLiBqb2luICggbzAwICwgJ3RlbXAnICwgJ3NvcmNlX3RlbXAudHh0JyApICkKICAgIGlmIGNvcHkgOgogICAgIGRhdGEgPSBvcGVuICggb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSAsICJyIiApIC4gcmVhZCAoICkKICAgICB4Ym1jdmZzIC4gZGVsZXRlICggb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICd0ZW1wJyAsICdzb3JjZV90ZW1wLnR4dCcgKSApCiAgICBlbHNlIDoKICAgICBpMWlJaWkgKCAiZmFpbGVkIHRvIGNvcHkgZnJvbSBzbWI6IiApCiAgIGVsc2UgOgogICAgZGF0YSA9IG9wZW4gKCB1cmwgLCAncicgKSAuIHJlYWQgKCApCiAgICBpZiByZSAuIG1hdGNoICggIiNFWFRNM1UiICwgZGF0YSApIG9yICdtM3UnIGluIHVybCA6CiAgICAgaWYgNjQgLSA2NDogT09vT29PMG8wbzBPTyAuIEkxSWkgJSBJSUlJCiAgICAgcmV0dXJuIGRhdGEKICBlbHNlIDoKICAgaTFpSWlpICggIlNvdXAgRGF0YSBub3QgZm91bmQhIiApCiAgIHJldHVybgogaWYgJzxTZXRWaWV3TW9kZT4nIGluIGRhdGEgOgogIHRyeSA6CiAgIElpSWlJSUlJMSA9IHJlIC4gZmluZGFsbCAoICc8U2V0Vmlld01vZGU+KC4qPyk8JyAsIGRhdGEgKSBbIDAgXQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiQ29udGFpbmVyLlNldFZpZXdNb2RlKCVzKSIgJSBJaUlpSUlJSTEgKQogICBwcmludCAnZG9uZSBzZXR2aWV3JyAsIElpSWlJSUlJMQogIGV4Y2VwdCA6IHBhc3MKIHJldHVybiBCZWF1dGlmdWxTT0FQICggZGF0YSAsIGNvbnZlcnRFbnRpdGllcyA9IEJlYXV0aWZ1bFN0b25lU291cCAuIFhNTF9FTlRJVElFUyApCiBpZiAxNiAtIDE2OiBPMDBPICogaWlpSTFpaUkxaSAqIGlpaUkxaWlJMWkKZGVmIG9vb28wbyAoIGRhdGEgKSA6CiB0cnkgOgogIGlmIGRhdGEgYW5kIGxlbiAoIGRhdGEgKSA+IDAgYW5kIGRhdGEgLiBzdGFydHN3aXRoICggJyRweUZ1bmN0aW9uOicgKSA6CiAgIGRhdGEgPSBvb09PICggZGF0YSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsICcnICwgTm9uZSAsIE5vbmUgKQogZXhjZXB0IDogcGFzcwogaWYgMTQgLSAxNDogSUkxaTExMWlJMWlpICogTzAwTyArIElJMWkxMTFpSTFpaSAlIElpaUlJaUlJIC0gSWlpSUlpSUkKIHJldHVybiBkYXRhCiBpZiA1OSAtIDU5OiBPMDAwT29vMG8wT09vICogb29vICsgTzAwME9vbzBvME9PbyAqIG9vbyAvIE8wME8gKiBJSTFpMTExaUkxaWkKZGVmIE9vb29vbzBPTyAoIHVybCAsIGZhbmFydCAsIGRhdGEgPSBOb25lICkgOgogaW1wb3J0IGNoZWNrYmFkCiBjaGVja2JhZCAuIGRvX2Jsb2NrX2NoZWNrICggRmFsc2UgKQogb28wMG9vTzBPMCA9IG9PME9PICggdXJsICwgZGF0YSApCiBpZiAxNiAtIDE2OiBJMUlpICUgaWlJICsgSTFJaSAlIEkxSWkKIGlmIGlzaW5zdGFuY2UgKCBvbzAwb29PME8wICwgQmVhdXRpZnVsU09BUCApIDoKICBpZiA2MyAtIDYzOiBPMDBPIC8gb29vIC0gb28wT29PIC4gSUkxaTExMWlJMWlpIC8gaTExSWlJMUlJCiAgaWYgbGVuICggb28wMG9vTzBPMCAoICdjaGFubmVscycgKSApID4gMCBhbmQgT28wME8gLiBnZXRTZXR0aW5nICggJ2Rvbm90c2hvd2J5Y2hhbm5lbHMnICkgPT0gJ2ZhbHNlJyA6CiAgIGlJMTExMUlpMUlJaSA9IG9vMDBvb08wTzAgKCAnY2hhbm5lbCcgKQogICBmb3IgSUlpMUkxMUkxSWlpSSBpbiBpSTExMTFJaTFJSWkgOgogICAgaWYgODkgLSA4OTogSUlJSQogICAgaWYgODYgLSA4NjogSWlpSUlpSUkgJSBPb28wT29PbzBPT09PICogSTFJaSAqIE8wMG9vMG8KICAgIGkxMWlpID0gJycKICAgIG8wb09PT08wT28gPSAwCiAgICB0cnkgOgogICAgIGkxMWlpID0gSUlpMUkxMUkxSWlpSSAoICdleHRlcm5hbGxpbmsnICkgWyAwIF0gLiBzdHJpbmcKICAgICBvMG9PT09PME9vID0gbGVuICggSUlpMUkxMUkxSWlpSSAoICdleHRlcm5hbGxpbmsnICkgKQogICAgZXhjZXB0IDogcGFzcwogICAgaWYgNjQgLSA2NDogSUlJSSAuIE9Pb09vTzBvMG8wT08gJSBpaUkgLyBpMTFJaUkxSUkgJSBPMDBvbzBvCiAgICBpZiBvMG9PT09PME9vID4gMSA6IGkxMWlpID0gJycKICAgIGlmIDYwIC0gNjA6IE8wMG9vMG8gKiBPT29Pb08wbzBvME9PICUgaWlJICUgSWkgLiBJSTFpMTExaUkxaWkKICAgIGlJSTFJaTFpaTExID0gSUlpMUkxMUkxSWlpSSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgICB0cnkgOgogICAgIGlJSTFJaTFpaTExID0gb29vbzBvICggaUlJMUlpMWlpMTEgKQogICAgZXhjZXB0IDogcGFzcwogICAgSTExaUkgPSBJSWkxSTExSTFJaWlJICggJ3RodW1ibmFpbCcgKSBbIDAgXSAuIHN0cmluZwogICAgaWYgSTExaUkgPT0gTm9uZSA6CiAgICAgSTExaUkgPSAnJwogICAgSTExaUkgPSBvb29vMG8gKCBJMTFpSSApCiAgICB0cnkgOgogICAgIGlmIG5vdCBJSWkxSTExSTFJaWlJICggJ2ZhbmFydCcgKSA6CiAgICAgIGlmIE9vMDBPIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICAgIGkxMTEgPSBJMTFpSQogICAgICBlbHNlIDoKICAgICAgIGkxMTEgPSBmYW5hcnQKICAgICBlbHNlIDoKICAgICAgaTExMSA9IElJaTFJMTFJMUlpaUkgKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgaTExMSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgaTExMSA9IGZhbmFydAogICAgIGlmIDk4IC0gOTg6IElJMWlpSTFpaTFpaWkgJSBJMUlpIC8gaWlJIC8gTzAwMDBPCiAgICB0cnkgOgogICAgIE8wMCA9IElJaTFJMTFJMUlpaUkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE8wMCA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgTzAwID0gJycKICAgICBpZiA1NyAtIDU3OiBJSUlJIC4gSTFJaQogICAgdHJ5IDoKICAgICBvMDAwID0gSUlpMUkxMUkxSWlpSSAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIG8wMDAgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIG8wMDAgPSAnJwogICAgIGlmIDUzIC0gNTM6IElJSUkgKyBpaUkgKiBPMDBvbzBvIC4gb09PIC0gTzAwTyAuIElJSUkKICAgIHRyeSA6CiAgICAgSTFpSWkxID0gSUlpMUkxMUkxSWlpSSAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgSTFpSWkxID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBJMWlJaTEgPSAnJwogICAgIGlmIDgwIC0gODA6IElpIC0gb08wMG9vbzBvME9PICUgSUkxaWlJMWlpMWlpaSAvIGlpSSAqIElJMWlpSTFpaTFpaWkgKyBPb28wT29PbzBPT09PCiAgICB0cnkgOgogICAgIE9vT28wTzBPTzAwTyA9IElJaTFJMTFJMUlpaUkgKCAnY3JlZGl0cycgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIE9vT28wTzBPTzAwTyA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgT29PbzBPME9PMDBPID0gJycKICAgICBpZiAzNSAtIDM1OiBvbzBPb08gJSBJSUlJCiAgICB0cnkgOgogICAgIGlmIGkxMWlpID09ICcnIDoKICAgICAgT08wT29Pb08wMCAoIGlJSTFJaTFpaTExIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAyICwgSTExaUkgLCBpMTExICwgTzAwICwgbzAwMCAsIEkxaUlpMSAsIE9vT28wTzBPTzAwTyAsIFRydWUgKQogICAgIGVsc2UgOgogICAgICBpZiA5MCAtIDkwOiBvTzAwb29vMG8wT08gKyBpMTFJaUkxSUkgLyBPb28wT29PbzBPT09PCiAgICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGkxMWlpIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIEkxMWlJICwgaTExMSAsIE8wMCAsIG8wMDAgLCBJMWlJaTEgLCBOb25lICwgJ3NvdXJjZScgKQogICAgZXhjZXB0IDoKICAgICBpMWlJaWkgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IGZyb20gZ2V0RGF0YSgpOiAnICsgaUlJMUlpMWlpMTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgZWxzZSA6CiAgIGkxaUlpaSAoICdObyBDaGFubmVsczogZ2V0SXRlbXMnICkKICAgaWlpaSAoIG9vMDBvb08wTzAgKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBpSTExSUlpMTEgKCBvbzAwb29PME8wICkKICBpZiAyNyAtIDI3OiBvT08KICBpZiA3OCAtIDc4OiBPMDAwT29vMG8wT09vIC4gSUlJSSAuIG9vME9vTwpkZWYgaUkxMUlJaTExICggZGF0YSApIDoKIGlpaTExID0gZGF0YSAuIHJzdHJpcCAoICkKIG9PT09vbyA9IHJlIC4gY29tcGlsZSAoIHInI0VYVElORjooLis/KSwoLio/KVtcblxyXSsoW15cclxuXSspJyApIC4gZmluZGFsbCAoIGlpaTExICkKIG9vME9PME9vMCA9IGxlbiAoIG9PT09vbyApCiBwcmludCAndHNkb3dubG9hZGVyJyAsIG9vTzAKIGlmIDgzIC0gODM6IElJSUkgKiBJSUlJCiBmb3IgSUlJaTFJMTExaUkxICwgT09PMCAsIG9vMG8wb29PIGluIG9PT09vbyA6CiAgaWYgMjAgLSAyMDogb28wMG9Pb08wbzBvICUgb28wT29PIC8gSUlJSQogIGlmICd0dmctbG9nbycgaW4gSUlJaTFJMTExaUkxIDoKICAgSTExaUkgPSBvT2lpSUlJaUlpMTExaSAoIElJSWkxSTExMWlJMSAsICd0dmctbG9nbz1bXCciXSguKj8pW1wnIl0nICkKICAgaWYgSTExaUkgOgogICAgaWYgSTExaUkgLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIEkxMWlJID0gSTExaUkKICAgICBpZiA0IC0gNDogb28wMG9Pb08wbzBvIC4gTzAwTyArIElpIC0gSUkxaTExMWlJMWlpCiAgICBlbGlmIG5vdCBPbzAwTyAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApID09ICIiIDoKICAgICBJMUlpSUkgPSBPbzAwTyAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApCiAgICAgSTExaUkgPSBJMUlpSUkgKyBJMTFpSQogICAgIGlmIDEwMCAtIDEwMDogb29vICogSWkgKyBPb28wT29PbzBPT09PICsgaTExSWlJMUlJCiAgICBlbHNlIDoKICAgICBJMTFpSSA9IEkxMWlJCiAgICAgaWYgNDggLSA0ODogSTFJaSAlIElpaUlJaUlJCiAgICAgaWYgMzEgLSAzMTogT29vME9vT28wT09PTyAuIElpaUlJaUlJIC4gSWlpSUlpSUkKICBlbHNlIDoKICAgSTExaUkgPSAnJwogICBpZiA3NCAtIDc0OiBJSUlJICogSWkgKiBvbzAwb09vTzBvMG8gLSBvb28KICBpZiAndHlwZScgaW4gSUlJaTFJMTExaUkxIDoKICAgaTFpSUlJaWlpMSA9IG9PaWlJSUlpSWkxMTFpICggSUlJaTFJMTExaUkxICwgJ3R5cGU9W1wnIl0oLio/KVtcJyJdJyApCiAgIGlmIGkxaUlJSWlpaTEgPT0gJ3l0LWRsJyA6CiAgICBvbzBvMG9vTyA9IG9vMG8wb29PICsgIiZtb2RlPTE4IgogICBlbGlmIGkxaUlJSWlpaTEgPT0gJ3JlZ2V4JyA6CiAgICBJaUkgPSBvbzBvMG9vTyAuIHNwbGl0ICggJyZyZWdleHM9JyApCiAgICBpZiAyNyAtIDI3OiBJaSAlIElpIC0gb09PIC0gTzAwMDBPCiAgICBpSTFpMWlJSUkxSUkgPSBPME8wb09PTzBPMDAgKCBvTzBPTyAoICcnICwgZGF0YSA9IElpSSBbIDEgXSApICkKICAgIGlmIDI2IC0gMjY6IElJMWlpSTFpaTFpaWkgLSBJaSAuIElJMWkxMTFpSTFpaSAvIG9PMDBvb28wbzBPTyArIE8wME8gJSBvb28KICAgIElpaWlJMTFJICggSWlJIFsgMCBdICwgT09PMCAsIEkxMWlJICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCBpSTFpMWlJSUkxSUkgLCBvbzBPTzBPbzAgKQogICAgY29udGludWUKICAgZWxpZiBpMWlJSUlpaWkxID09ICdmdHYnIDoKICAgIG9vMG8wb29PID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5GLlQuVi8/bmFtZT0nICsgdXJsbGliIC4gcXVvdGUgKCBPT08wICkgKyAnJnVybD0nICsgb28wbzBvb08gKyAnJm1vZGU9MTI1JmNoX2ZhbmFydD1uYScKICBlbGlmIG9vTzAgYW5kICcudHMnIGluIG9vMG8wb29PIDoKICAgb28wbzBvb08gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmY0bVRlc3Rlci8/dXJsPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggb28wbzBvb08gKSArICcmYW1wO3N0cmVhbXR5cGU9VFNET1dOTE9BREVSJm5hbWU9JyArIHVybGxpYiAuIHF1b3RlICggT09PMCApCiAgZWxpZiBPTzAwTzAwMDAwbyBhbmQgJy5tM3U4JyBpbiBvbzBvMG9vTyA6CiAgIG9vMG8wb29PID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG9vMG8wb29PICkgKyAnJmFtcDtzdHJlYW10eXBlPUhMU1JFVFJZJm5hbWU9JyArIHVybGxpYiAuIHF1b3RlICggT09PMCApCiAgSWlpaUkxMUkgKCBvbzBvMG9vTyAsIE9PTzAgLCBJMTFpSSAsICcnICwgJycgLCAnJyAsICcnICwgJycgLCBOb25lICwgJycgLCBvbzBPTzBPbzAgKQpkZWYgSTExaTFJaSAoIG5hbWUgLCB1cmwgLCBmYW5hcnQgKSA6CiBvbzAwb29PME8wID0gb08wT08gKCB1cmwgKQogSWlpMSA9IG9vMDBvb08wTzAgLiBmaW5kICggJ2NoYW5uZWwnICwgYXR0cnMgPSB7ICduYW1lJyA6IG5hbWUgLiBkZWNvZGUgKCAndXRmLTgnICkgfSApCiBpdGVtcyA9IElpaTEgKCAnaXRlbScgKQogdHJ5IDoKICBpMTExID0gSWlpMSAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICBpZiBpMTExID09IE5vbmUgOgogICByYWlzZQogZXhjZXB0IDoKICBpMTExID0gZmFuYXJ0CiBmb3IgSUlpMUkxMUkxSWlpSSBpbiBJaWkxICggJ3N1YmNoYW5uZWwnICkgOgogIG5hbWUgPSBJSWkxSTExSTFJaWlJICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcKICB0cnkgOgogICBuYW1lID0gb29vbzBvICggbmFtZSApCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6CiAgIEkxMWlJID0gSUlpMUkxMUkxSWlpSSAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgSTExaUkgPT0gTm9uZSA6CiAgICByYWlzZQogICBJMTFpSSA9IG9vb28wbyAoIEkxMWlJICkKICBleGNlcHQgOgogICBJMTFpSSA9ICcnCiAgdHJ5IDoKICAgaWYgbm90IElJaTFJMTFJMUlpaUkgKCAnZmFuYXJ0JyApIDoKICAgIGlmIE9vMDBPIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBpMTExID0gSTExaUkKICAgZWxzZSA6CiAgICBpMTExID0gSUlpMUkxMUkxSWlpSSAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaTExMSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgcGFzcwogIHRyeSA6CiAgIE8wMCA9IElJaTFJMTFJMUlpaUkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPMDAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE8wMCA9ICcnCiAgIGlmIDYyIC0gNjI6IE8wMDBPb28wbzBPT28KICB0cnkgOgogICBvMDAwID0gSUlpMUkxMUkxSWlpSSAoICdnZW5yZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvMDAwID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBvMDAwID0gJycKICAgaWYgNTMgLSA1Mzogb09PICUgSWlpSUlpSUkgJSBJSTFpaUkxaWkxaWlpICogb29vIC0gaTExSWlJMUlJICUgSTFJaQogIHRyeSA6CiAgIEkxaUlpMSA9IElJaTFJMTFJMUlpaUkgKCAnZGF0ZScgKSBbIDAgXSAuIHN0cmluZwogICBpZiBJMWlJaTEgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIEkxaUlpMSA9ICcnCiAgIGlmIDQ0IC0gNDQ6IE9vbzBPb09vME9PT08gJSBvTzAwb29vMG8wT08gLiBJaWlJSWlJSQogIHRyeSA6CiAgIE9vT28wTzBPTzAwTyA9IElJaTFJMTFJMUlpaUkgKCAnY3JlZGl0cycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPb09vME8wT08wME8gPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9vT28wTzBPTzAwTyA9ICcnCiAgIGlmIDQgLSA0OiBPMDBPIC4gb29vIC4gTzAwME9vbzBvME9PbyAtIEkxSWkgKyBJMUlpICogTzAwb28wbwogIHRyeSA6CiAgIE9PME9vT29PMDAgKCBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAzICwgSTExaUkgLCBpMTExICwgTzAwICwgbzAwMCAsIE9vT28wTzBPTzAwTyAsIEkxaUlpMSApCiAgZXhjZXB0IDoKICAgaTFpSWlpICggJ1RoZXJlIHdhcyBhIHByb2JsZW0gYWRkaW5nIGRpcmVjdG9yeSAtICcgKyBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogaWlpaSAoIGl0ZW1zICwgaTExMSApCiBpZiA0NiAtIDQ2OiBpaWlJMWlpSTFpIC8gb09PIC0gb09PICsgTzAwTwogaWYgMTYgLSAxNjogSWlpSUlpSUkKZGVmIE9PICggbmFtZSAsIHVybCAsIGZhbmFydCApIDoKIG9vMDBvb08wTzAgPSBvTzBPTyAoIHVybCApCiBJaWkxID0gb28wMG9vTzBPMCAuIGZpbmQgKCAnc3ViY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIGl0ZW1zID0gSWlpMSAoICdzdWJpdGVtJyApCiBpaWlpICggaXRlbXMgLCBmYW5hcnQgKQogaWYgNTkgLSA1OTogb29vIC0gT09vT29PMG8wbzBPTyAqIG9vME9vTyArIG9vME9vTyAqIElJSUkgKiBvb28KZGVmIGlpaWkgKCBpdGVtcyAsIGZhbmFydCAsIGRvbnRMaW5rID0gRmFsc2UgKSA6CiBvbzBPTzBPbzAgPSBsZW4gKCBpdGVtcyApCiBpMWlJaWkgKCAnVG90YWwgSXRlbXM6ICVzJyAlIG9vME9PME9vMCApCiBJaTEgPSBPbzAwTyAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApCiBPb29PME9Pb28wTzAgPSBPbzAwTyAuIGdldFNldHRpbmcgKCAnYXNrX3BsYXlsaXN0X2l0ZW1zJyApCiBpSWlpaUkgPSBPbzAwTyAuIGdldFNldHRpbmcgKCAndXNlX3RodW1iJyApCiBPb09vME8gPSBPbzAwTyAuIGdldFNldHRpbmcgKCAncGFyZW50YWxibG9ja2VkJyApCiBPb09vME8gPSBPb09vME8gPT0gInRydWUiCiBmb3IgaUlpSSBpbiBpdGVtcyA6CiAgaTFpMTEgPSBGYWxzZQogIGlpSUlJMUlpaWkxaUkgPSBGYWxzZQogIGlmIDkxIC0gOTE6IE9vbzBPb09vME9PT08gKyBvbzAwb09vTzBvMG8gLSBJaSAtIG9vME9vTyAqIElJMWlpSTFpaTFpaWkgKiBPMDAwME8KICBPT08wb28gPSAnZmFsc2UnCiAgdHJ5IDoKICAgT09PMG9vID0gaUlpSSAoICdwYXJlbnRhbGJsb2NrJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDoKICAgaTFpSWlpICggJ3BhcmVudGFsYmxvY2sgRXJyb3InICkKICAgT09PMG9vID0gJycKICBpZiBPT08wb28gPT0gJ3RydWUnIGFuZCBPb09vME8gOiBjb250aW51ZQogIGlmIDkyIC0gOTI6IElJMWlpSTFpaTFpaWkgLiBpaWlJMWlpSTFpCiAgdHJ5IDoKICAgaUlJMUlpMWlpMTEgPSBpSWlJICggJ3RpdGxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlJSTFJaTFpaTExIGlzIE5vbmUgOgogICAgaUlJMUlpMWlpMTEgPSAndW5rbm93bj8nCiAgIHRyeSA6CiAgICBpSUkxSWkxaWkxMSA9IG9vb28wbyAoIGlJSTFJaTFpaTExICkKICAgZXhjZXB0IDogcGFzcwogICBpZiA5OCAtIDk4OiBPMDBPCiAgZXhjZXB0IDoKICAgaTFpSWlpICggJ05hbWUgRXJyb3InICkKICAgaUlJMUlpMWlpMTEgPSAnJwogICBpZiA5MiAtIDkyOiBPb28wT29PbzBPT09PIC0gSUkxaTExMWlJMWlpICogSWkKICAgaWYgOTcgLSA5Nzogb29vICUgSTFJaSAtIGlpSSAvIE8wMG9vMG8gKiBvT08gJSBpaUkKICB0cnkgOgogICBpZiBpSWlJICggJ2VwZycgKSA6CiAgICBpZiBpSWlJIC4gZXBnX3VybCA6CiAgICAgaTFpSWlpICggJ0dldCBFUEcgUmVnZXgnICkKICAgICBJMUlpSTExMTExMTEgPSBpSWlJIC4gZXBnX3VybCAuIHN0cmluZwogICAgIElpMTFJMTFJaTExSSA9IGlJaUkgLiBlcGdfcmVnZXggLiBzdHJpbmcKICAgICBvb29PTzBPTzAgPSBJSTFJSTFJMTEgKCBJMUlpSTExMTExMTEgLCBJaTExSTExSWkxMUkgKQogICAgIGlmIG9vb09PME9PMCA6CiAgICAgIGlJSTFJaTFpaTExICs9ICcgLSAnICsgb29vT08wT08wCiAgICBlbGlmIGlJaUkgKCAnZXBnJyApIFsgMCBdIC4gc3RyaW5nID4gMSA6CiAgICAgaUlJMUlpMWlpMTEgKz0gSTFJaWlpSUlJSUkxICggaUlpSSAoICdlcGcnICkgWyAwIF0gLiBzdHJpbmcgKQogICBlbHNlIDoKICAgIHBhc3MKICBleGNlcHQgOgogICBpMWlJaWkgKCAnRVBHIEVycm9yJyApCiAgdHJ5IDoKICAgSWlJID0gWyBdCiAgIGlmIGxlbiAoIGlJaUkgKCAnbGluaycgKSApID4gMCA6CiAgICBpZiA2IC0gNjogb09PICUgSUkxaWlJMWlpMWlpaSAqIE8wMDBPb28wbzBPT28gLiBJSTFpMTExaUkxaWkKICAgIGlmIDc0IC0gNzQ6IE8wMDAwTwogICAgZm9yIG8wTzBPbzAwIGluIGlJaUkgKCAnbGluaycgKSA6CiAgICAgaWYgbm90IG8wTzBPbzAwIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBJaUkgLiBhcHBlbmQgKCBvME8wT28wMCAuIHN0cmluZyApCiAgICAgIGlmIDk5IC0gOTk6IG9vMDBvT29PMG8wbyArIGkxMUlpSTFJSSAlIG9vME9vTyAuIG9PTwogICBlbGlmIGxlbiAoIGlJaUkgKCAnc3BvcnRzZGV2aWwnICkgKSA+IDAgOgogICAgZm9yIG8wTzBPbzAwIGluIGlJaUkgKCAnc3BvcnRzZGV2aWwnICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgb08wT29vT08wMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwvP21vZGU9MSZhbXA7aXRlbT1jYXRjaGVyJTNkc3RyZWFtcyUyNnVybD0nICsgbzBPME9vMDAgLiBzdHJpbmcKICAgICAgbzAwMDBPMDBvb28wbyA9IGlJaUkgKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICAgICBpZiBvMDAwME8wMG9vbzBvIDoKICAgICAgIGlmIDgyIC0gODI6IE9Pb09vTzBvMG8wT08gKyBvbzAwb09vTzBvMG8gLiBJMUlpIC8gSTFJaQogICAgICAgb08wT29vT08wMCA9IG9PME9vb09PMDAgKyAnJTI2cmVmZXJlcj0nICsgbzAwMDBPMDBvb28wbwogICAgICBJaUkgLiBhcHBlbmQgKCBvTzBPb29PTzAwICkKICAgZWxpZiBsZW4gKCBpSWlJICggJ3AycCcgKSApID4gMCA6CiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICdwMnAnICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJ3NvcDovLycgaW4gbzBPME9vMDAgLiBzdHJpbmcgOgogICAgICAgSWkxaUlpMUlpMSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucDJwLXN0cmVhbXMvP21vZGU9MnVybD0nICsgbzBPME9vMDAgLiBzdHJpbmcgKyAnJicgKyAnbmFtZT0nICsgaUlJMUlpMWlpMTEKICAgICAgIElpSSAuIGFwcGVuZCAoIElpMWlJaTFJaTEgKQogICAgICBlbHNlIDoKICAgICAgIG9PT29PMG9Pb08wID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5wMnAtc3RyZWFtcy8/bW9kZT0xJnVybD0nICsgbzBPME9vMDAgLiBzdHJpbmcgKyAnJicgKyAnbmFtZT0nICsgaUlJMUlpMWlpMTEKICAgICAgIElpSSAuIGFwcGVuZCAoIG9PT29PMG9Pb08wICkKICAgZWxpZiBsZW4gKCBpSWlJICggJ3ZhdWdobicgKSApID4gMCA6CiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICd2YXVnaG4nICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgT09vMDAwT28gPSAncGx1Z2luOi8vcGx1Z2luLnN0cmVhbS52YXVnaG5saXZlLnR2Lz9tb2RlPVBsYXlMaXZlU3RyZWFtJmFtcDtjaGFubmVsPScgKyBvME8wT28wMCAuIHN0cmluZwogICAgICBJaUkgLiBhcHBlbmQgKCBPT28wMDBPbyApCiAgIGVsaWYgbGVuICggaUlpSSAoICdpbGl2ZScgKSApID4gMCA6CiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICdpbGl2ZScgKSA6CiAgICAgaWYgbm90IG8wTzBPbzAwIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiBub3QgJ2h0dHAnIGluIG8wTzBPbzAwIC4gc3RyaW5nIDoKICAgICAgIG8wTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8udGJoLmlsaXZlLz91cmw9aHR0cDovL3d3dy5zdHJlYW1saXZlLnRvL3ZpZXcvJyArIG8wTzBPbzAwIC4gc3RyaW5nICsgJyZhbXA7bGluaz05OSZhbXA7bW9kZT1pTGl2ZVBsYXknCiAgICAgIGVsc2UgOgogICAgICAgbzBPID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby50YmguaWxpdmUvP3VybD0nICsgbzBPME9vMDAgLiBzdHJpbmcgKyAnJmFtcDtsaW5rPTk5JmFtcDttb2RlPWlMaXZlUGxheScKICAgZWxpZiBsZW4gKCBpSWlJICggJ3l0LWRsJyApICkgPiAwIDoKICAgIGZvciBvME8wT28wMCBpbiBpSWlJICggJ3l0LWRsJyApIDoKICAgICBpZiBub3QgbzBPME9vMDAgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIG9vb09vMDBPb08wb28gPSBvME8wT28wMCAuIHN0cmluZyArICcmbW9kZT0xOCcKICAgICAgSWlJIC4gYXBwZW5kICggb29vT28wME9vTzBvbyApCiAgIGVsaWYgbGVuICggaUlpSSAoICdkbScgKSApID4gMCA6CiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICdkbScgKSA6CiAgICAgaWYgbm90IG8wTzBPbzAwIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBPb09vT08wMCA9ICJwbHVnaW46Ly9wbHVnaW4udmlkZW8uZGFpbHltb3Rpb25fY29tLz9tb2RlPXBsYXlWaWRlbyZ1cmw9IiArIG8wTzBPbzAwIC4gc3RyaW5nCiAgICAgIElpSSAuIGFwcGVuZCAoIE9vT29PTzAwICkKICAgZWxpZiBsZW4gKCBpSWlJICggJ2RtbGl2ZScgKSApID4gMCA6CiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICdkbWxpdmUnICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgT29Pb09PMDAgPSAicGx1Z2luOi8vcGx1Z2luLnZpZGVvLmRhaWx5bW90aW9uX2NvbS8/bW9kZT1wbGF5TGl2ZVZpZGVvJnVybD0iICsgbzBPME9vMDAgLiBzdHJpbmcKICAgICAgSWlJIC4gYXBwZW5kICggT29Pb09PMDAgKQogICBlbGlmIGxlbiAoIGlJaUkgKCAndXR1YmUnICkgKSA+IDAgOgogICAgZm9yIG8wTzBPbzAwIGluIGlJaUkgKCAndXR1YmUnICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgJyAnIGluIG8wTzBPbzAwIC4gc3RyaW5nIDoKICAgICAgIE9vbzBPb08wbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9zZWFyY2gvP3E9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBvME8wT28wMCAuIHN0cmluZyApCiAgICAgICBpaUlJSTFJaWlpMWlJID0gT29vME9vTzBvCiAgICAgIGVsaWYgbGVuICggbzBPME9vMDAgLiBzdHJpbmcgKSA9PSAxMSA6CiAgICAgICBPb28wT29PMG8gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JyArIG8wTzBPbzAwIC4gc3RyaW5nCiAgICAgIGVsaWYgKCBvME8wT28wMCAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnUEwnICkgYW5kIG5vdCAnJm9yZGVyPScgaW4gbzBPME9vMDAgLiBzdHJpbmcgKSBvciBvME8wT28wMCAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnVVUnICkgOgogICAgICAgT29vME9vTzBvID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvPyZvcmRlcj1kZWZhdWx0JnBsYXlsaXN0X2lkPScgKyBvME8wT28wMCAuIHN0cmluZwogICAgICBlbGlmIG8wTzBPbzAwIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdQTCcgKSBvciBvME8wT28wMCAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnVVUnICkgOgogICAgICAgT29vME9vTzBvID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3BsYXlsaXN0X2lkPScgKyBvME8wT28wMCAuIHN0cmluZwogICAgICBlbGlmIG8wTzBPbzAwIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdVQycgKSBhbmQgbGVuICggbzBPME9vMDAgLiBzdHJpbmcgKSA+IDEyIDoKICAgICAgIE9vbzBPb08wbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9jaGFubmVsLycgKyBvME8wT28wMCAuIHN0cmluZyArICcvJwogICAgICAgaWlJSUkxSWlpaTFpSSA9IE9vbzBPb08wbwogICAgICBlbGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnVUMnICkgYW5kIG5vdCAoIG8wTzBPbzAwIC4gc3RyaW5nIC4gc3RhcnRzd2l0aCAoICdQTCcgKSApIDoKICAgICAgIE9vbzBPb08wbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS91c2VyLycgKyBvME8wT28wMCAuIHN0cmluZyArICcvJwogICAgICAgaWlJSUkxSWlpaTFpSSA9IE9vbzBPb08wbwogICAgIElpSSAuIGFwcGVuZCAoIE9vbzBPb08wbyApCiAgIGVsaWYgbGVuICggaUlpSSAoICdpbWRiJyApICkgPiAwIDoKICAgIGZvciBvME8wT28wMCBpbiBpSWlJICggJ2ltZGInICkgOgogICAgIGlmIG5vdCBvME8wT28wMCAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWYgT28wME8gLiBnZXRTZXR0aW5nICggJ2dlbmVzaXNvcnB1bHNhcicgKSA9PSAnMCcgOgogICAgICAgb09vb29vb28wME9vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249cGxheSZpbWRiPScgKyBvME8wT28wMCAuIHN0cmluZwogICAgICBlbHNlIDoKICAgICAgIG9Pb29vb29vMDBPbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllL3R0JyArIG8wTzBPbzAwIC4gc3RyaW5nICsgJy9wbGF5JwogICAgICBJaUkgLiBhcHBlbmQgKCBvT29vb29vbzAwT28gKQogICBlbGlmIGxlbiAoIGlJaUkgKCAnZjRtJyApICkgPiAwIDoKICAgIGZvciBvME8wT28wMCBpbiBpSWlJICggJ2Y0bScgKSA6CiAgICAgaWYgbm90IG8wTzBPbzAwIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiAnLmY0bScgaW4gbzBPME9vMDAgLiBzdHJpbmcgOgogICAgICAgaWlpMUlpSTExMTEgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmY0bVRlc3Rlci8/dXJsPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbzBPME9vMDAgLiBzdHJpbmcgKQogICAgICBlbGlmICcubTN1OCcgaW4gbzBPME9vMDAgLiBzdHJpbmcgOgogICAgICAgaWlpMUlpSTExMTEgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLmY0bVRlc3Rlci8/dXJsPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbzBPME9vMDAgLiBzdHJpbmcgKSArICcmYW1wO3N0cmVhbXR5cGU9SExTJwogICAgICAgaWYgNzIgLSA3Mjogb08wMG9vbzBvME9PIC0gTzAwMDBPIC0gb08wMG9vbzBvME9PICsgb08wMG9vbzBvME9PICsgb28wMG9Pb08wbzBvICsgTzAwME9vbzBvME9PbwogICAgICBlbHNlIDoKICAgICAgIGlpaTFJaUkxMTExID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG8wTzBPbzAwIC4gc3RyaW5nICkgKyAnJmFtcDtzdHJlYW10eXBlPVNJTVBMRScKICAgICBJaUkgLiBhcHBlbmQgKCBpaWkxSWlJMTExMSApCiAgIGVsaWYgbGVuICggaUlpSSAoICdmdHYnICkgKSA+IDAgOgogICAgZm9yIG8wTzBPbzAwIGluIGlJaUkgKCAnZnR2JyApIDoKICAgICBpZiBub3QgbzBPME9vMDAgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIE8wMDBPb29PT08wTyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uRi5ULlYvP25hbWU9JyArIHVybGxpYiAuIHF1b3RlICggaUlJMUlpMWlpMTEgKSArICcmdXJsPScgKyBvME8wT28wMCAuIHN0cmluZyArICcmbW9kZT0xMjUmY2hfZmFuYXJ0PW5hJwogICAgIElpSSAuIGFwcGVuZCAoIE8wMDBPb29PT08wTyApCiAgIGVsaWYgbGVuICggaUlpSSAoICd1cmxzb2x2ZScgKSApID4gMCA6CiAgICBpZiA4OSAtIDg5OiBPMDBvbzBvIC4gTzAwME9vbzBvME9PbyAtIElpaUlJaUlJCiAgICBmb3IgbzBPME9vMDAgaW4gaUlpSSAoICd1cmxzb2x2ZScgKSA6CiAgICAgaWYgbm90IG8wTzBPbzAwIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBJaWlJMUkgPSBvME8wT28wMCAuIHN0cmluZyArICcmbW9kZT0xOScKICAgICAgSWlJIC4gYXBwZW5kICggSWlpSTFJICkKICAgaWYgbGVuICggSWlJICkgPCAxIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaTFpSWlpICggJ0Vycm9yIDxsaW5rPiBlbGVtZW50LCBQYXNzaW5nOicgKyBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICAgY29udGludWUKICB0cnkgOgogICBpMWkxMSA9IGlJaUkgKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIDk3IC0gOTc6IElpIC4gT29vME9vT28wT09PTyAqIElJSUkgLiBPT29Pb08wbzBvME9PCiAgaWYgaTFpMTEgOgogICBpSUkgPSBbIGkxaTExIF0KICAgaTFpMTEgPSBUcnVlCiAgZWxzZSA6CiAgIGkxaTExID0gRmFsc2UKICB0cnkgOgogICBpaUlJSTFJaWlpMWlJID0gaUlpSSAoICdqc29ucnBjJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIGlpSUlJMUlpaWkxaUkgOgogICBpZiA5MiAtIDkyOiBvTzAwb29vMG8wT08KICAgaUlJID0gWyBpaUlJSTFJaWlpMWlJIF0KICAgaWYgMzYgLSAzNjogaTExSWlJMUlJCiAgIGlpSUlJMUlpaWkxaUkgPSBUcnVlCiAgZWxzZSA6CiAgIGlpSUlJMUlpaWkxaUkgPSBGYWxzZQogIHRyeSA6CiAgIEkxMWlJID0gaUlpSSAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgSTExaUkgPT0gTm9uZSA6CiAgICByYWlzZQogICBJMTFpSSA9IG9vb28wbyAoIEkxMWlJICkKICBleGNlcHQgOgogICBJMTFpSSA9ICcnCiAgdHJ5IDoKICAgaWYgbm90IGlJaUkgKCAnZmFuYXJ0JyApIDoKICAgIGlmIE9vMDBPIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBpMTExID0gSTExaUkKICAgIGVsc2UgOgogICAgIGkxMTEgPSBmYW5hcnQKICAgZWxzZSA6CiAgICBpMTExID0gaUlpSSAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaTExMSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaTExMSA9IGZhbmFydAogIHRyeSA6CiAgIE8wMCA9IGlJaUkgKCAnaW5mbycgKSBbIDAgXSAuIHN0cmluZwogICBpZiBPMDAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE8wMCA9ICcnCiAgIGlmIDYyIC0gNjI6IE9Pb09vTzBvMG8wT08gKiBJSUlJCiAgdHJ5IDoKICAgbzAwMCA9IGlJaUkgKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgbzAwMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgbzAwMCA9ICcnCiAgIGlmIDkwIC0gOTA6IElJSUkgLSBvTzAwb29vMG8wT08gLyBPT29Pb08wbzBvME9PICogb28wMG9Pb08wbzBvICUgaTExSWlJMUlJIC4gaWlJCiAgdHJ5IDoKICAgSTFpSWkxID0gaUlpSSAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIEkxaUlpMSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgSTFpSWkxID0gJycKICAgaWYgMzYgLSAzNjogSWkgLiBvT08gLSBJSTFpMTExaUkxaWkgLiBvbzBPb08gKyBvTzAwb29vMG8wT08KICBpSTFpMWlJSUkxSUkgPSBOb25lCiAgaWYgaUlpSSAoICdyZWdleCcgKSA6CiAgIHRyeSA6CiAgICBPT08gPSBpSWlJICggJ3JlZ2V4JyApCiAgICBpSTFpMWlJSUkxSUkgPSBPME8wb09PTzBPMDAgKCBPT08gKQogICBleGNlcHQgOgogICAgcGFzcwogIHRyeSA6CiAgIGlmIDgwIC0gODA6IE9vbzBPb09vME9PT08gLiBPb28wT29PbzBPT09PICUgSUkxaWlJMWlpMWlpaSAlIG9PMDBvb28wbzBPTwogICBpZiBsZW4gKCBJaUkgKSA+IDEgOgogICAgTzAwT29PID0gMAogICAgaUlpSTFpSUlpaTExSSA9IFsgXQogICAgSTExaTExSUlpaWkgPSBUcnVlIGlmICckJExTUGxheU9ubHlPbmUkJCcgaW4gSWlJIFsgMCBdIGVsc2UgRmFsc2UKICAgIGlmIDIxIC0gMjE6IGlpaUkxaWlJMWkgLiBPMDAwT29vMG8wT09vIC8gSUlJSSAlIEkxSWkgLSBpaWlJMWlpSTFpCiAgICBmb3IgbzBPME9vMDAgaW4gSWlJIDoKICAgICBpZiBJaTEgPT0gImZhbHNlIiBhbmQgbm90IEkxMWkxMUlJaWlpIDoKICAgICAgTzAwT29PICs9IDEKICAgICAgSWlpaUkxMUkgKCBvME8wT28wMCAsICclcykgJXMnICUgKCBPMDBPb08gLCBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkgLCBJMTFpSSAsIGkxMTEgLCBPMDAgLCBvMDAwICwgSTFpSWkxICwgVHJ1ZSAsIGlJaUkxaUlJaWkxMUkgLCBpSTFpMWlJSUkxSUkgLCBvbzBPTzBPbzAgKQogICAgIGVsaWYgKCBJaTEgPT0gInRydWUiIGFuZCBPb29PME9Pb28wTzAgPT0gJ3RydWUnICkgb3IgSTExaTExSUlpaWkgOgogICAgICBpZiBpSTFpMWlJSUkxSUkgOgogICAgICAgaUlpSTFpSUlpaTExSSAuIGFwcGVuZCAoIG8wTzBPbzAwICsgJyZyZWdleHM9JyArIGlJMWkxaUlJSTFJSSApCiAgICAgIGVsaWYgYW55ICggeCBpbiBvME8wT28wMCBmb3IgeCBpbiBPT29vME8gKSBhbmQgbzBPME9vMDAgLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgICAgaUlpSTFpSUlpaTExSSAuIGFwcGVuZCAoIG8wTzBPbzAwICsgJyZtb2RlPTE5JyApCiAgICAgIGVsc2UgOgogICAgICAgaUlpSTFpSUlpaTExSSAuIGFwcGVuZCAoIG8wTzBPbzAwICkKICAgICBlbHNlIDoKICAgICAgaUlpSTFpSUlpaTExSSAuIGFwcGVuZCAoIG8wTzBPbzAwICkKICAgICAgaWYgNzggLSA3ODogb09PCiAgICBpZiBsZW4gKCBpSWlJMWlJSWlpMTFJICkgPiAxIDoKICAgICBpZiA4NyAtIDg3OiBvbzAwb09vTzBvMG8gKiBvbzBPb08gLyBvT08gJSBJSTFpMTExaUkxaWkgLyBPT29Pb08wbzBvME9PCiAgICAgSWlpaUkxMUkgKCAnJyAsIGlJSTFJaTFpaTExIC4gZW5jb2RlICggJ3V0Zi04JyApICwgSTExaUkgLCBpMTExICwgTzAwICwgbzAwMCAsIEkxaUlpMSAsIFRydWUgLCBpSWlJMWlJSWlpMTFJICwgaUkxaTFpSUlJMUlJICwgb28wT08wT28wICkKICAgZWxzZSA6CiAgICBpZiAzOCAtIDM4OiBPT29Pb08wbzBvME9PICogaWlpSTFpaUkxaSAvIElpaUlJaUlJCiAgICBpZiBkb250TGluayA6CiAgICAgcmV0dXJuIGlJSTFJaTFpaTExICwgSWlJIFsgMCBdICwgaUkxaTFpSUlJMUlJCiAgICBpZiBpMWkxMSA6CiAgICAgaWYgbm90IGlJMWkxaUlJSTFJSSA9PSBOb25lIDoKICAgICAgT08wT29Pb08wMCAoIGlJSTFJaTFpaTExIC4gZW5jb2RlICggJ3V0Zi04JyApICwgaUlJIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgMSAsIEkxMWlJICwgaTExMSAsIE8wMCAsIG8wMDAgLCBJMWlJaTEgLCBOb25lICwgJyEhdXBkYXRlJyAsIGlJMWkxaUlJSTFJSSAsIElpSSBbIDAgXSAuIGVuY29kZSAoICd1dGYtOCcgKSApCiAgICAgIGlmIDcwIC0gNzA6IGkxMUlpSTFJSSAqIE8wME8gLiBJMUlpIC4gSWlpSUlpSUkgKiBpaWlJMWlpSTFpICsgaTExSWlJMUlJCiAgICAgZWxzZSA6CiAgICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIGlJSSBbIDAgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMTFpSSAsIGkxMTEgLCBPMDAgLCBvMDAwICwgSTFpSWkxICwgTm9uZSAsICdzb3VyY2UnICwgTm9uZSAsIE5vbmUgKQogICAgICBpZiA3NyAtIDc3OiBPb28wT29PbzBPT09PICUgaWlpSTFpaUkxaQogICAgZWxpZiBpaUlJSTFJaWlpMWlJIDoKICAgICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBpSUkgWyAwIF0gLCA1MyAsIEkxMWlJICwgaTExMSAsIE8wMCAsIG8wMDAgLCBJMWlJaTEgLCBOb25lICwgJ3NvdXJjZScgKQogICAgIGlmIDcyIC0gNzI6IG9vME9vTyArIElpICogb29vICogTzAwME9vbzBvME9PbyAlIG9vMDBvT29PMG8wbwogICAgZWxzZSA6CiAgICAgdHJ5IDoKICAgICAgaWYgJyRkb3JlZ2V4JyBpbiBpSUkxSWkxaWkxMSBhbmQgbm90IE8wb08gPT0gTm9uZSA6CiAgICAgICBpZiAxIC0gMTogaWlJCiAgICAgICBpMTExT09PbyAsIElJSTExaUkxaWkxMSA9IE8wb08gKCBpSTFpMWlJSUkxSUkgLCBpSUkxSWkxaWkxMSApCiAgICAgICBpZiA3MSAtIDcxOiBpaUkgKiBJaWlJSWlJSSAlIE8wMDBPb28wbzBPT28KICAgICAgIGlmIG5vdCBpMTExT09PbyA9PSBOb25lIDoKICAgICAgICBpSUkxSWkxaWkxMSA9IGkxMTFPT09vCiAgICAgZXhjZXB0IDogcGFzcwogICAgIHRyeSA6CiAgICAgIGlmICckZG9yZWdleCcgaW4gSTExaUkgYW5kIG5vdCBPMG9PID09IE5vbmUgOgogICAgICAgaTExMU9PT28gLCBJSUkxMWlJMWlpMTEgPSBPMG9PICggaUkxaTFpSUlJMUlJICwgSTExaUkgKQogICAgICAgaWYgbm90IGkxMTFPT09vID09IE5vbmUgOgogICAgICAgIEkxMWlJID0gaTExMU9PT28KICAgICBleGNlcHQgOiBwYXNzCiAgICAgSWlpaUkxMUkgKCBJaUkgWyAwIF0gLCBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICwgSTExaUkgLCBpMTExICwgTzAwICwgbzAwMCAsIEkxaUlpMSAsIFRydWUgLCBOb25lICwgaUkxaTFpSUlJMUlJICwgb28wT08wT28wICkKICAgICBpZiAyMyAtIDIzOiBJSTFpMTExaUkxaWkKICBleGNlcHQgOgogICBpMWlJaWkgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgaXRlbSAtICcgKyBpSUkxSWkxaWkxMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICAgaWYgMTcgLSAxNzogSWlpSUlpSUkKZGVmIE8wTzBvT09PME8wMCAoIHJlZ19pdGVtICkgOgogdHJ5IDoKICBpSTFpMWlJSUkxSUkgPSB7IH0KICBmb3IgbzBPME9vMDAgaW4gcmVnX2l0ZW0gOgogICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gPSB7IH0KICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25hbWUnIF0gPSBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIDYzIC0gNjM6IE8wMG9vMG8KICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdleHByZXMnIF0gPSBvME8wT28wMCAoICdleHByZXMnICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnZXhwcmVzJyBdIDoKICAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnZXhwcmVzJyBdID0gJycKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8gUmVmZXJlciAtLSIgKQogICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncGFnZScgXSA9IG8wTzBPbzAwICggJ3BhZ2UnICkgWyAwIF0gLiBzdHJpbmcKICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyZWZlcmVyJyBdID0gbzBPME9vMDAgKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBObyBSZWZlcmVyIC0tIiApCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29ubmVjdGlvbicgXSA9IG8wTzBPbzAwICggJ2Nvbm5lY3Rpb24nICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8gY29ubmVjdGlvbiAtLSIgKQogICAgaWYgNjYgLSA2Njogb09PICogb09PIC0gb28wT29PICsgSWkgLSBvT08KICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdub3RwbGF5YWJsZScgXSA9IG8wTzBPbzAwICggJ25vdHBsYXlhYmxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vIG5vdHBsYXlhYmxlIC0tIiApCiAgICBpZiA0NCAtIDQ0OiBJMUlpICsgb28wT29PCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnbm9yZWRpcmVjdCcgXSA9IG8wTzBPbzAwICggJ25vcmVkaXJlY3QnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8gbm9yZWRpcmVjdCAtLSIgKQogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ29yaWdpbicgXSA9IG8wTzBPbzAwICggJ29yaWdpbicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBObyBvcmlnaW4gLS0iICkKICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhY2NlcHQnIF0gPSBvME8wT28wMCAoICdhY2NlcHQnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8gYWNjZXB0IC0tIiApCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaW5jbHVkZWhlYWRlcnMnIF0gPSBvME8wT28wMCAoICdpbmNsdWRlaGVhZGVycycgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBObyBpbmNsdWRlaGVhZGVycyAtLSIgKQogICAgaWYgMzUgLSAzNTogTzAwME9vbzBvME9PbyArIElJSUkgJSBPMDAwT29vMG8wT09vICUgSTFJaSAvIElJMWkxMTFpSTFpaSAlIEkxSWkKICAgIGlmIDg0IC0gODQ6IG9PTwogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2xpc3RyZXBlYXQnIF0gPSBvME8wT28wMCAoICdsaXN0cmVwZWF0JyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiA0MyAtIDQzOiBvT08gLiBpaWlJMWlpSTFpICogaWlJCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vIGxpc3RyZXBlYXQgLS0iICkKICAgIGlmIDU1IC0gNTU6IElpIC8gSUkxaWlJMWlpMWlpaSAqIGlpSSAtIGlpaUkxaWlJMWkgKyBJSUlJCiAgICBpZiA2MyAtIDYzOiBPb28wT29PbzBPT09PCiAgICBpZiA1MSAtIDUxOiBpMTFJaUkxSUkgKyBJSTFpMTExaUkxaWkKICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwcm94eScgXSA9IG8wTzBPbzAwICggJ3Byb3h5JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vIHByb3h5IC0tIiApCiAgICBpZiAyMyAtIDIzOiBJSTFpaUkxaWkxaWlpIC0gSUlJSSAvIEkxSWkgLyBJMUlpICogSUlJSSAlIG9PTwogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtcmVxJyBdID0gbzBPME9vMDAgKCAneC1yZXEnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8geC1yZXEgLS0iICkKICAgIGlmIDg0IC0gODQ6IE9Pb09vTzBvMG8wT08gLiBJaWlJSWlJSSAvIG9vMDBvT29PMG8wbwogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtYWRkcicgXSA9IG8wTzBPbzAwICggJ3gtYWRkcicgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBObyB4LWFkZHIgLS0iICkKICAgIGlmIDE4IC0gMTg6IElpIC8gT29vME9vT28wT09PTyAlIE9Pb09vTzBvMG8wT08KICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICd4LWZvcndhcmQnIF0gPSBvME8wT28wMCAoICd4LWZvcndhcmQnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8geC1mb3J3YXJkIC0tIiApCiAgICBpZiA0NSAtIDQ1OiBJSUlJICUgTzAwb28wbyArIElJMWkxMTFpSTFpaSAtIG9PTwogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2FnZW50JyBdID0gbzBPME9vMDAgKCAnYWdlbnQnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm8gVXNlciBBZ2VudCAtLSIgKQogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3Bvc3QnIF0gPSBvME8wT28wMCAoICdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vdCBhIHBvc3QiICkKICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyYXdwb3N0JyBdID0gbzBPME9vMDAgKCAncmF3cG9zdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBOb3QgYSByYXdwb3N0IiApCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaHRtbHVuZXNjYXBlJyBdID0gbzBPME9vMDAgKCAnaHRtbHVuZXNjYXBlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vdCBhIGh0bWx1bmVzY2FwZSIgKQogICAgaWYgODcgLSA4NzogSUkxaWlJMWlpMWlpaSArIE9Pb09vTzBvMG8wT08KICAgIGlmIDg4IC0gODg6IE8wMDBPb28wbzBPT28gLSBJMUlpICsgTzAwTyAuIElpaUlJaUlJICUgSWlpSUlpSUkgLyBPMDBvbzBvCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmVhZGNvb2tpZW9ubHknIF0gPSBvME8wT28wMCAoICdyZWFkY29va2llb25seScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBOb3QgYSByZWFkQ29va2llT25seSIgKQogICAgaWYgODggLSA4ODogSUkxaTExMWlJMWlpIC8gb28wMG9Pb08wbzBvICogSTFJaQogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA9IG8wTzBPbzAwICggJ2Nvb2tpZWphcicgKSBbIDAgXSAuIHN0cmluZwogICAgaWYgbm90IGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb29raWVqYXInIF0gOgogICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb29raWVqYXInIF0gPSAnJwogICBleGNlcHQgOgogICAgaTFpSWlpICggIlJlZ2V4OiAtLSBOb3QgYSBjb29raWVKYXIiICkKICAgdHJ5IDoKICAgIGlJMWkxaUlJSTFJSSBbIG8wTzBPbzAwICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdzZXRjb29raWUnIF0gPSBvME8wT28wMCAoICdzZXRjb29raWUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gTm90IGEgc2V0Y29va2llIiApCiAgIHRyeSA6CiAgICBpSTFpMWlJSUkxSUkgWyBvME8wT28wMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnYXBwZW5kY29va2llJyBdID0gbzBPME9vMDAgKCAnYXBwZW5kY29va2llJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBpMWlJaWkgKCAiUmVnZXg6IC0tIE5vdCBhIGFwcGVuZGNvb2tpZSIgKQogICAgaWYgODQgLSA4NDogb28wT29PICogSWlpSUlpSUkgLSBPb28wT29PbzBPT09PIC4gb08wMG9vbzBvME9PICsgT29vME9vT28wT09PTwogICB0cnkgOgogICAgaUkxaTFpSUlJMUlJIFsgbzBPME9vMDAgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2lnbm9yZWNhY2hlJyBdID0gbzBPME9vMDAgKCAnaWdub3JlY2FjaGUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIGkxaUlpaSAoICJSZWdleDogLS0gbm8gaWdub3JlY2FjaGUiICkKICAgIGlmIDg1IC0gODU6IE8wMG9vMG8KICAgIGlmIDc2IC0gNzY6IG9vMDBvT29PMG8wbyAlIE9Pb09vTzBvMG8wT08gLSBPT29Pb08wbzBvME9PCiAgICBpZiA2NiAtIDY2OiBPT29Pb08wbzBvME9PCiAgICBpZiA3MSAtIDcxOiBPMDAwME8gJSBvT08KICAgIGlmIDY5IC0gNjk6IGlpSSAlIE8wMG9vMG8gLiBPMDAwME8gLiBvbzBPb08KICBpSTFpMWlJSUkxSUkgPSB1cmxsaWIgLiBxdW90ZSAoIHJlcHIgKCBpSTFpMWlJSUkxSUkgKSApCiAgcmV0dXJuIGlJMWkxaUlJSTFJSQogIGlmIDc2IC0gNzY6IE8wMG9vMG8gLyBpaWlJMWlpSTFpICUgb28wMG9Pb08wbzBvIC0gTzAwb28wbwogZXhjZXB0IDoKICBpSTFpMWlJSUkxSUkgPSBOb25lCiAgaTFpSWlpICggJ3JlZ2V4IEVycm9yOiAnICsgaUlJMUlpMWlpMTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgaWYgMjQgLSAyNDogSTFJaSAlIE8wMDBPb28wbzBPT28KZGVmIE9Pb29vbzBvME8gKCB1cmwgKSA6CiB0cnkgOgogIGZvciBvME8wT28wMCBpbiByYW5nZSAoIDEgLCA1MSApIDoKICAgaTFpID0gaUlpaTFJICggdXJsICkKICAgaWYgIkVYVC1YLVNUUkVBTS1JTkYiIGluIGkxaSA6IHJldHVybiB1cmwKICAgaWYgbm90ICJFWFRNM1UiIGluIGkxaSA6IHJldHVybgogICB4Ym1jIC4gc2xlZXAgKCAyMDAwICkKICByZXR1cm4KIGV4Y2VwdCA6CiAgcmV0dXJuCiAgaWYgMzcgLSAzNzogTzAwME9vbzBvME9PbwpkZWYgTzBvTyAoIHJlZ2V4cyAsIHVybCAsIGNvb2tpZUphciA9IE5vbmUgLCBmb3JDb29raWVKYXJPbmx5ID0gRmFsc2UgLCByZWN1cnNpdmVDYWxsID0gRmFsc2UgLCBjYWNoZWRQYWdlcyA9IHsgfSAsIHJhd1Bvc3QgPSBGYWxzZSAsIGNvb2tpZV9qYXJfZmlsZSA9IE5vbmUgKSA6CiBpZiBub3QgcmVjdXJzaXZlQ2FsbCA6CiAgcmVnZXhzID0gZXZhbCAoIHVybGxpYiAuIHVucXVvdGUgKCByZWdleHMgKSApCiAgaWYgOTAgLSA5MDogT29vME9vT28wT09PTyAtIE9vbzBPb09vME9PT08gKiBpMTFJaUkxSUkgJSBvb28KICBpZiA1OSAtIDU5OiBvb28gLSBJaWlJSWlJSQogSTEgPSByZSAuIGNvbXBpbGUgKCAnXCRkb3JlZ2V4XFsoW15cXV0qKVxdJyApIC4gZmluZGFsbCAoIHVybCApCiBpZiA3NCAtIDc0OiBJSUlJIC0gSWlpSUlpSUkgLyBJMUlpCiBpSUlpSTFpID0gVHJ1ZQogZm9yIElJaUlJMTFpaWkxIGluIEkxIDoKICBpZiBJSWlJSTExaWlpMSBpbiByZWdleHMgOgogICBpZiA5NiAtIDk2OiBpaUkgLyBvbzAwb09vTzBvMG8gLyBJSTFpMTExaUkxaWkgKiBPT29Pb08wbzBvME9PIC8gTzAwME9vbzBvME9PbyAvIE9vbzBPb09vME9PT08KICAgaTFJaSA9IHJlZ2V4cyBbIElJaUlJMTFpaWkxIF0KICAgaWYgODggLSA4ODogSWkgJSBPMDAwT29vMG8wT09vIC4gb28wMG9Pb08wbzBvICogTzAwME9vbzBvME9PbwogICBpaTFpaWkxaTExID0gRmFsc2UKICAgaWYgJ2Nvb2tpZWphcicgaW4gaTFJaSA6CiAgICBpZiA2MyAtIDYzOiBJSUlJICogTzAwb28wbyAvIE8wME8gKiBvbzAwb09vTzBvMG8gLiBJSTFpMTExaUkxaWkgJSBPMDBPCiAgICBpaTFpaWkxaTExID0gaTFJaSBbICdjb29raWVqYXInIF0KICAgIGlmICckZG9yZWdleCcgaW4gaWkxaWlpMWkxMSA6CiAgICAgY29va2llSmFyID0gTzBvTyAoIHJlZ2V4cyAsIGkxSWkgWyAnY29va2llamFyJyBdICwgY29va2llSmFyICwgVHJ1ZSAsIFRydWUgLCBjYWNoZWRQYWdlcyApCiAgICAgaWYgODMgLSA4MzogTzAwMDBPCiAgICAgaWkxaWlpMWkxMSA9IFRydWUKICAgIGVsc2UgOgogICAgIGlpMWlpaTFpMTEgPSBUcnVlCiAgICAgaWYgNzUgLSA3NTogb29vIC4gb29vICsgSUkxaTExMWlJMWlpIC8gSWkgLSBJSTFpaUkxaWkxaWlpCiAgIGlmIGlpMWlpaTFpMTEgOgogICAgaWYgY29va2llSmFyID09IE5vbmUgOgogICAgIGlmIDQ5IC0gNDk6IG9PTyArIE8wMDAwTyAqIG9vbyAlIG9PMDBvb28wbzBPTyAtIG9vME9vTwogICAgIGNvb2tpZV9qYXJfZmlsZSA9IE5vbmUKICAgICBpZiAnb3BlblsnIGluIGkxSWkgWyAnY29va2llamFyJyBdIDoKICAgICAgY29va2llX2phcl9maWxlID0gaTFJaSBbICdjb29raWVqYXInIF0gLiBzcGxpdCAoICdvcGVuWycgKSBbIDEgXSAuIHNwbGl0ICggJ10nICkgWyAwIF0KICAgICAgaWYgNiAtIDY6IE8wME8gKyBpMTFJaUkxSUkgLyBpaUkgLyBpaUkgLyBPMDBPICsgaTExSWlJMUlJCiAgICAgIGlmIDUgLSA1OiBJSTFpMTExaUkxaWkgLiBPMDBPIC0gSWkKICAgICBjb29raWVKYXIgPSBpMUlpb09PME9vMG8gKCBjb29raWVfamFyX2ZpbGUgKQogICAgIGlmIDE2IC0gMTY6IGlpSSArIE9Pb09vTzBvMG8wT08gLSBpMTFJaUkxSUkgLyBvTzAwb29vMG8wT08gKyBvT08KICAgICBpZiBjb29raWVfamFyX2ZpbGUgOgogICAgICBPMG9PbyAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgIGlmIDU0IC0gNTQ6IG9vMDBvT29PMG8wbyArIE8wMG9vMG8KICAgICAgaWYgMTMgLSAxMzogSUlJSQogICAgICBpZiA1IC0gNTogSUkxaTExMWlJMWlpCiAgICBlbGlmICdzYXZlWycgaW4gaTFJaSBbICdjb29raWVqYXInIF0gOgogICAgIGNvb2tpZV9qYXJfZmlsZSA9IGkxSWkgWyAnY29va2llamFyJyBdIC4gc3BsaXQgKCAnc2F2ZVsnICkgWyAxIF0gLiBzcGxpdCAoICddJyApIFsgMCBdCiAgICAgT09Pb08gPSBvcyAuIHBhdGggLiBqb2luICggbzAwICwgY29va2llX2phcl9maWxlICkKICAgICBpZiA3OSAtIDc5OiBvT08gLSBvTzAwb29vMG8wT08gJSBJaWlJSWlJSSAtIElpaUlJaUlJCiAgICAgTzBvT28gKCBjb29raWVKYXIgLCBjb29raWVfamFyX2ZpbGUgKQogICBpZiBpMUlpIFsgJ3BhZ2UnIF0gYW5kICckZG9yZWdleCcgaW4gaTFJaSBbICdwYWdlJyBdIDoKICAgIElJaWlJaUlpID0gTzBvTyAoIHJlZ2V4cyAsIGkxSWkgWyAncGFnZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBpZiBsZW4gKCBJSWlpSWlJaSApID09IDAgOgogICAgIElJaWlJaUlpID0gJ2h0dHA6Ly9yZWdleGZhaWxlZCcKICAgIGkxSWkgWyAncGFnZScgXSA9IElJaWlJaUlpCiAgICBpZiA5IC0gOTogTzAwb28wbwogICBpZiAnc2V0Y29va2llJyBpbiBpMUlpIGFuZCBpMUlpIFsgJ3NldGNvb2tpZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBpMUlpIFsgJ3NldGNvb2tpZScgXSA6CiAgICBpMUlpIFsgJ3NldGNvb2tpZScgXSA9IE8wb08gKCByZWdleHMgLCBpMUlpIFsgJ3NldGNvb2tpZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgIGlmICdhcHBlbmRjb29raWUnIGluIGkxSWkgYW5kIGkxSWkgWyAnYXBwZW5kY29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIGkxSWkgWyAnYXBwZW5kY29va2llJyBdIDoKICAgIGkxSWkgWyAnYXBwZW5kY29va2llJyBdID0gTzBvTyAoIHJlZ2V4cyAsIGkxSWkgWyAnYXBwZW5kY29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDg3IC0gODc6IGlpaUkxaWlJMWkgLSBJaSArIE9vbzBPb09vME9PT08gKiBJMUlpICogSUkxaTExMWlJMWlpICUgTzAwb28wbwogICAgaWYgNDIgLSA0Mjogb09PICogTzAwb28wbyAlIE9vbzBPb09vME9PT08gLSBpMTFJaUkxSUkgJSBpMTFJaUkxSUkKICAgaWYgJ3Bvc3QnIGluIGkxSWkgYW5kICckZG9yZWdleCcgaW4gaTFJaSBbICdwb3N0JyBdIDoKICAgIGkxSWkgWyAncG9zdCcgXSA9IE8wb08gKCByZWdleHMgLCBpMUlpIFsgJ3Bvc3QnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgMSAtIDE6IE9vbzBPb09vME9PT08gLyBJSUlJIC0gSWlpSUlpSUkgLiBpMTFJaUkxSUkKICAgIGlmIDU5IC0gNTk6IElJMWkxMTFpSTFpaSAtIGlpaUkxaWlJMWkgKiBJaSArIE9vbzBPb09vME9PT08KICAgaWYgJ3Jhd3Bvc3QnIGluIGkxSWkgYW5kICckZG9yZWdleCcgaW4gaTFJaSBbICdyYXdwb3N0JyBdIDoKICAgIGkxSWkgWyAncmF3cG9zdCcgXSA9IE8wb08gKCByZWdleHMgLCBpMUlpIFsgJ3Jhd3Bvc3QnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgLCByYXdQb3N0ID0gVHJ1ZSApCiAgICBpZiA5NiAtIDk2OiBpaUkgLyBPT29Pb08wbzBvME9PIC8gaWlJIC8gb08wMG9vbzBvME9PICUgb08wMG9vbzBvME9PCiAgICBpZiA3NCAtIDc0OiBpaUkgLyBvTzAwb29vMG8wT08gKiBPMDBPIC4gSTFJaSArIGlpSQogICBpZiAncmF3cG9zdCcgaW4gaTFJaSBhbmQgJyRlcG9jdGltZSQnIGluIGkxSWkgWyAncmF3cG9zdCcgXSA6CiAgICBpMUlpIFsgJ3Jhd3Bvc3QnIF0gPSBpMUlpIFsgJ3Jhd3Bvc3QnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZSQnICwgT29PT09vME9PT28wME8gKCApICkKICAgIGlmIDQ4IC0gNDg6IE8wMDAwTyAuIE9Pb09vTzBvMG8wT08KICAgaWYgJ3Jhd3Bvc3QnIGluIGkxSWkgYW5kICckZXBvY3RpbWUyJCcgaW4gaTFJaSBbICdyYXdwb3N0JyBdIDoKICAgIGkxSWkgWyAncmF3cG9zdCcgXSA9IGkxSWkgWyAncmF3cG9zdCcgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgSTFpMUlJSUkxSUkgKCApICkKICAgIGlmIDIwIC0gMjA6IG9vME9vTyAtIG9PTyAqIElJMWkxMTFpSTFpaQogICAgaWYgOTEgLSA5MTogSUkxaTExMWlJMWlpIC0gTzAwMDBPICUgb28wMG9Pb08wbzBvICogSUkxaWlJMWlpMWlpaSAvIG9vMDBvT29PMG8wbwogICBPMG8wb29vbzAwID0gJycKICAgaWYgaTFJaSBbICdwYWdlJyBdIGFuZCBpMUlpIFsgJ3BhZ2UnIF0gaW4gY2FjaGVkUGFnZXMgYW5kIG5vdCAnaWdub3JlY2FjaGUnIGluIGkxSWkgYW5kIGZvckNvb2tpZUphck9ubHkgPT0gRmFsc2UgOgogICAgaWYgMTcgLSAxNzogSTFJaSAqIElpCiAgICBPMG8wb29vbzAwID0gY2FjaGVkUGFnZXMgWyBpMUlpIFsgJ3BhZ2UnIF0gXQogICBlbHNlIDoKICAgIGlmIGkxSWkgWyAncGFnZScgXSBhbmQgbm90IGkxSWkgWyAncGFnZScgXSA9PSAnJyBhbmQgaTFJaSBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiAnJGVwb2N0aW1lJCcgaW4gaTFJaSBbICdwYWdlJyBdIDoKICAgICAgaTFJaSBbICdwYWdlJyBdID0gaTFJaSBbICdwYWdlJyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUkJyAsIE9vT09PbzBPT09vMDBPICggKSApCiAgICAgaWYgJyRlcG9jdGltZTIkJyBpbiBpMUlpIFsgJ3BhZ2UnIF0gOgogICAgICBpMUlpIFsgJ3BhZ2UnIF0gPSBpMUlpIFsgJ3BhZ2UnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZTIkJyAsIEkxaTFJSUlJMUlJICggKSApCiAgICAgIGlmIDI2IC0gMjY6IE9vbzBPb09vME9PT08gKyBJSTFpMTExaUkxaWkgKyBPMDAwT29vMG8wT09vIC8gaTExSWlJMUlJIC0gb28wT29PIC8gSUlJSQogICAgICBpZiA2MCAtIDYwOiBpaUkgKiBvTzAwb29vMG8wT08gKyBvb28gJSBJSUlJIC8gaWlJIC0gTzAwME9vbzBvME9PbwogICAgIE9PMCA9IGkxSWkgWyAncGFnZScgXSAuIHNwbGl0ICggJ3wnICkKICAgICBvT09PME9PME8wb08wID0gT08wIFsgMCBdCiAgICAgaWlpMWlJSUkxMTExSSA9IE5vbmUKICAgICBpZiBsZW4gKCBPTzAgKSA+IDEgOgogICAgICBpaWkxaUlJSTExMTFJID0gT08wIFsgMSBdCiAgICAgIGlmIDY2IC0gNjY6IG9vbyAuIG9vMDBvT29PMG8wbyAvIG9vbyArIElJMWkxMTFpSTFpaSAuIE8wMDBPb28wbzBPT28gKiBpMTFJaUkxSUkKICAgICAgaWYgNzMgLSA3MzogTzAwb28wbyAlIGkxMUlpSTFJSSAtIE8wMDBPb28wbzBPT28gJSBvb28KICAgICAgaWYgMTQgLSAxNDogSTFJaSAlIElJMWlpSTFpaTFpaWkgLSBvTzAwb29vMG8wT08gJSBJSTFpMTExaUkxaWkgKiBPMDBvbzBvICUgSUkxaWlJMWlpMWlpaQogICAgICBpZiA0NCAtIDQ0OiBJaSAqIGkxMUlpSTFJSSAtIGlpaUkxaWlJMWkKICAgICAgaWYgMTkgLSAxOTogSWkgLiBPMDAwME8gLyBpMTFJaUkxSUkKICAgICAgaWYgMzcgLSAzNzogaWlJICogSWkgKyBvbzAwb09vTzBvMG8gLyBJSTFpMTExaUkxaWkgKiBvTzAwb29vMG8wT08KICAgICAgaWYgODcgLSA4NzogTzAwb28wbyAuIGlpaUkxaWlJMWkKICAgICAgaWYgOTUgLSA5NTogb28wMG9Pb08wbzBvICUgb09PICsgSWkKICAgICAgaWYgNDIgLSA0MjogaWlJIC8gSTFJaSArIGlpSQogICAgICBpZiA3NCAtIDc0OiBPT29Pb08wbzBvME9PIC4gb08wMG9vbzBvME9PCiAgICAgSWlPb28wMG8wbyA9IHVybGxpYjIgLiBQcm94eUhhbmRsZXIgKCB1cmxsaWIyIC4gZ2V0cHJveGllcyAoICkgKQogICAgIGlmIDQ3IC0gNDc6IG9vbyAqIElJMWkxMTFpSTFpaSArIG9PMDBvb28wbzBPTwogICAgIGlmIDQ0IC0gNDQ6IElJSUkgJSBJMUlpICsgSUlJSSAvIE8wME8gLyBvT08gLyBPMDBvbzBvCiAgICAgaWYgNDcgLSA0NzogTzAwTyAlIEkxSWkgLiBvb28gKiBPMDBvbzBvIC4gSUlJSQogICAgIG8wT09vbzAgPSB1cmxsaWIyIC4gUmVxdWVzdCAoIG9PT08wT08wTzBvTzAgKQogICAgIGlmICdwcm94eScgaW4gaTFJaSA6CiAgICAgIE9PME9vTzAwTzBvID0gaTFJaSBbICdwcm94eScgXQogICAgICBpZiA3OSAtIDc5OiBvbzBPb08gKiBpaUkKICAgICAgaWYgODAgLSA4MDogSWlpSUlpSUkgLiBvT08gKiBJMUlpIC0gT09vT29PMG8wbzBPTwogICAgICBpZiBvT09PME9PME8wb08wIFsgOiA1IF0gPT0gImh0dHBzIiA6CiAgICAgICBJMTFpSW9PbzBPb09vID0gdXJsbGliMiAuIFByb3h5SGFuZGxlciAoIHsgJ2h0dHBzJyA6IE9PME9vTzAwTzBvIH0gKQogICAgICAgaWYgNjMgLSA2MzogaTExSWlJMUlJICsgaWlpSTFpaUkxaSAlIE8wMDAwTwogICAgICBlbHNlIDoKICAgICAgIEkxMWlJb09vME9vT28gPSB1cmxsaWIyIC4gUHJveHlIYW5kbGVyICggeyAnaHR0cCcgOiBPTzBPb08wME8wbyB9ICkKICAgICAgIGlmIDgyIC0gODI6IEkxSWkgLSBJSTFpaUkxaWkxaWlpIC8gaWlJIC8gSTFJaSAuIE9Pb09vTzBvMG8wT08KICAgICAgbzBvT09PTzBvb29vMCA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBJMTFpSW9PbzBPb09vICkKICAgICAgdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggbzBvT09PTzBvb29vMCApCiAgICAgIGlmIDE3IC0gMTc6IE8wMDBPb28wbzBPT28gKyBpMTFJaUkxSUkKICAgICAgaWYgNjkgLSA2OTogSUkxaWlJMWlpMWlpaSAvIElJSUkKICAgICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IHJ2OjE0LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQuMC4xJyApCiAgICAgT08wT29PMDBPMG8gPSBOb25lCiAgICAgaWYgMjEgLSAyMTogTzAwMDBPIC0gSWkKICAgICBpZiAncmVmZXJlcicgaW4gaTFJaSA6CiAgICAgIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1JlZmVyZXInICwgaTFJaSBbICdyZWZlcmVyJyBdICkKICAgICBpZiAnYWNjZXB0JyBpbiBpMUlpIDoKICAgICAgbzBPT29vMCAuIGFkZF9oZWFkZXIgKCAnQWNjZXB0JyAsIGkxSWkgWyAnYWNjZXB0JyBdICkKICAgICBpZiAnYWdlbnQnIGluIGkxSWkgOgogICAgICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdVc2VyLWFnZW50JyAsIGkxSWkgWyAnYWdlbnQnIF0gKQogICAgIGlmICd4LXJlcScgaW4gaTFJaSA6CiAgICAgIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1gtUmVxdWVzdGVkLVdpdGgnICwgaTFJaSBbICd4LXJlcScgXSApCiAgICAgaWYgJ3gtYWRkcicgaW4gaTFJaSA6CiAgICAgIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ3gtYWRkcicgLCBpMUlpIFsgJ3gtYWRkcicgXSApCiAgICAgaWYgJ3gtZm9yd2FyZCcgaW4gaTFJaSA6CiAgICAgIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1gtRm9yd2FyZGVkLUZvcicgLCBpMUlpIFsgJ3gtZm9yd2FyZCcgXSApCiAgICAgaWYgJ3NldGNvb2tpZScgaW4gaTFJaSA6CiAgICAgIGlmIDg0IC0gODQ6IG9vME9vTyArIG9vMDBvT29PMG8wbwogICAgICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgaTFJaSBbICdzZXRjb29raWUnIF0gKQogICAgIGlmICdhcHBlbmRjb29raWUnIGluIGkxSWkgOgogICAgICBpZiAzMCAtIDMwOiBJSTFpaUkxaWkxaWlpICsgSUkxaTExMWlJMWlpICogTzAwME9vbzBvME9PbyAvIElJMWlpSTFpaTFpaWkKICAgICAgb09vMG8wMDBvMCA9IGkxSWkgWyAnYXBwZW5kY29va2llJyBdCiAgICAgIG9PbzBvMDAwbzAgPSBvT28wbzAwMG8wIC4gc3BsaXQgKCAnOycgKQogICAgICBmb3IgSUlpSTExIGluIG9PbzBvMDAwbzAgOgogICAgICAgSTExMTFJSWkxaSAsIElJMUkxMUkxSUlJMSA9IElJaUkxMSAuIHNwbGl0ICggJz0nICkKICAgICAgIGlpaWkxSTEgLCBJMTExMUlJaTFpID0gSTExMTFJSWkxaSAuIHNwbGl0ICggJzonICkKICAgICAgIGlJT08wb09vTzBPME8gPSBjb29raWVsaWIgLiBDb29raWUgKCB2ZXJzaW9uID0gMCAsIG5hbWUgPSBJMTExMUlJaTFpICwgdmFsdWUgPSBJSTFJMTFJMUlJSTEgLCBwb3J0ID0gTm9uZSAsIHBvcnRfc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW4gPSBpaWlpMUkxICwgZG9tYWluX3NwZWNpZmllZCA9IEZhbHNlICwgZG9tYWluX2luaXRpYWxfZG90ID0gRmFsc2UgLCBwYXRoID0gJy8nICwgcGF0aF9zcGVjaWZpZWQgPSBUcnVlICwgc2VjdXJlID0gRmFsc2UgLCBleHBpcmVzID0gTm9uZSAsIGRpc2NhcmQgPSBUcnVlICwgY29tbWVudCA9IE5vbmUgLCBjb21tZW50X3VybCA9IE5vbmUgLCByZXN0ID0geyAnSHR0cE9ubHknIDogTm9uZSB9ICwgcmZjMjEwOSA9IEZhbHNlICkKICAgICAgIGNvb2tpZUphciAuIHNldF9jb29raWUgKCBpSU9PMG9Pb08wTzBPICkKICAgICBpZiAnb3JpZ2luJyBpbiBpMUlpIDoKICAgICAgbzBPT29vMCAuIGFkZF9oZWFkZXIgKCAnT3JpZ2luJyAsIGkxSWkgWyAnb3JpZ2luJyBdICkKICAgICBpZiBpaWkxaUlJSTExMTFJIDoKICAgICAgaWlpMWlJSUkxMTExSSA9IGlpaTFpSUlJMTExMUkgLiBzcGxpdCAoICcmJyApCiAgICAgIGZvciBJSWlJMTEgaW4gaWlpMWlJSUkxMTExSSA6CiAgICAgICBpZiBJSWlJMTEgLiBzcGxpdCAoICc9JyApID09IDIgOgogICAgICAgIEkxMTExSUlpMWkgLCBJSTFJMTFJMUlJSTEgPSBJSWlJMTEgLiBzcGxpdCAoICc9JyApCiAgICAgICBlbHNlIDoKICAgICAgICBpSWlpID0gSUlpSTExIC4gc3BsaXQgKCAnPScgKQogICAgICAgIEkxMTExSUlpMWkgPSBpSWlpIFsgMCBdCiAgICAgICAgSUkxSTExSTFJSUkxID0gJz0nIC4gam9pbiAoIGlJaWkgWyAxIDogXSApCiAgICAgICAgaWYgMjIgLSAyMjogaTExSWlJMUlJCiAgICAgICBvME9Pb28wIC4gYWRkX2hlYWRlciAoIEkxMTExSUlpMWkgLCBJSTFJMTFJMUlJSTEgKQogICAgICAgaWYgMTcgLSAxNzogb28wT29PCiAgICAgaWYgbm90IGNvb2tpZUphciA9PSBOb25lIDoKICAgICAgaWYgOTMgLSA5MzogTzAwTyAuIE8wMDAwTwogICAgICBvT09Pb08wT29Pb08gPSB1cmxsaWIyIC4gSFRUUENvb2tpZVByb2Nlc3NvciAoIGNvb2tpZUphciApCiAgICAgIG8wb09PT08wb29vbzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggb09PT29PME9vT29PICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogICAgICBvMG9PT09PMG9vb28wID0gdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggbzBvT09PTzBvb29vMCApCiAgICAgIGlmIDQzIC0gNDM6IGlpaUkxaWlJMWkgJSBJMUlpIC0gSWkgJSBPMDBPIC4gSWlpSUlpSUkKICAgICAgaWYgMjYgLSAyNjogT29vME9vT28wT09PTyAuIElJMWlpSTFpaTFpaWkgLiBJMUlpICUgSUkxaTExMWlJMWlpCiAgICAgIGlmICdub3JlZGlyZWN0JyBpbiBpMUlpIDoKICAgICAgIG8wb09PT08wb29vbzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggb09PT29PME9vT29PICwgaWlJb28wMDBPb09PTzBPbyAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKICAgICAgIG8wb09PT08wb29vbzAgPSB1cmxsaWIyIC4gaW5zdGFsbF9vcGVuZXIgKCBvMG9PT09PMG9vb28wICkKICAgICBlbGlmICdub3JlZGlyZWN0JyBpbiBpMUlpIDoKICAgICAgbzBvT09PTzBvb29vMCA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBpaUlvbzAwME9vT09PME9vICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogICAgICBvMG9PT09PMG9vb28wID0gdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggbzBvT09PTzBvb29vMCApCiAgICAgIGlmIDE4IC0gMTg6IG9vME9vTyAtIGlpaUkxaWlJMWkKICAgICAgaWYgNzcgLSA3NzogaTExSWlJMUlJIC4gT09vT29PMG8wbzBPTyAuIE8wMDAwTwogICAgIGlmICdjb25uZWN0aW9uJyBpbiBpMUlpIDoKICAgICAgaWYgOTEgLSA5MTogTzAwb28wbyAvIGlpSSAuIElJMWlpSTFpaTFpaWkKICAgICAgZnJvbSBrZWVwYWxpdmUgaW1wb3J0IEhUVFBIYW5kbGVyCiAgICAgIE9vMG8wME8wb28wMDAgPSBIVFRQSGFuZGxlciAoICkKICAgICAgbzBvT09PTzBvb29vMCA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBPbzBvMDBPMG9vMDAwICkKICAgICAgdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggbzBvT09PTzBvb29vMCApCiAgICAgIGlmIDM0IC0gMzQ6IE8wMG9vMG8gLiBpaUkgKiBvb28KICAgICAgaWYgNjAgLSA2MDogT09vT29PMG8wbzBPTyAlIE9vbzBPb09vME9PT08gKiBJaWlJSWlJSSAlIE8wMDAwTwogICAgICBpZiA4NSAtIDg1OiBPMDBPICUgSUkxaTExMWlJMWlpCiAgICAgT08wbzAwT09PMDBPID0gTm9uZQogICAgIGlmIDgxIC0gODE6IElpaUlJaUlJIC0gb28wMG9Pb08wbzBvIC4gSUlJSSAvIE8wMDBPb28wbzBPT28gLiBvTzAwb29vMG8wT08KICAgICBpZiAncG9zdCcgaW4gaTFJaSA6CiAgICAgIGlJSUlpMTExID0gaTFJaSBbICdwb3N0JyBdCiAgICAgIGlmIDk2IC0gOTY6IE8wME8gLyBJSTFpMTExaUkxaWkKICAgICAgaWYgMjAgLSAyMDogSUlJSSAvIE8wMG9vMG8gLyBvT08KICAgICAgaWYgNTggLSA1ODogaWlpSTFpaUkxaSAuIG9vbwogICAgICBpZiAxOSAtIDE5OiBJaWlJSWlJSSAlIG9vMDBvT29PMG8wbyAuIElJSUkgLSBJaQogICAgICBJaUkxSUkxMSA9IGlJSUlpMTExIC4gc3BsaXQgKCAnLCcgKSA7CiAgICAgIE9PMG8wME9PTzAwTyA9IHsgfQogICAgICBmb3IgaTFJaUlpaUlJaUlJMSBpbiBJaUkxSUkxMSA6CiAgICAgICBJMTExMUlJaTFpID0gaTFJaUlpaUlJaUlJMSAuIHNwbGl0ICggJzonICkgWyAwIF0gOwogICAgICAgSUkxSTExSTFJSUkxID0gaTFJaUlpaUlJaUlJMSAuIHNwbGl0ICggJzonICkgWyAxIF0gOwogICAgICAgT08wbzAwT09PMDBPIFsgSTExMTFJSWkxaSBdID0gSUkxSTExSTFJSUkxCiAgICAgIE9PMG8wME9PTzAwTyA9IHVybGxpYiAuIHVybGVuY29kZSAoIE9PMG8wME9PTzAwTyApCiAgICAgIGlmIDQgLSA0OiBvbzBPb08gKyBPb28wT29PbzBPT09PIC0gSTFJaSAuIEkxSWkKICAgICBpZiAncmF3cG9zdCcgaW4gaTFJaSA6CiAgICAgIE9PMG8wME9PTzAwTyA9IGkxSWkgWyAncmF3cG9zdCcgXQogICAgICBpZiA0MiAtIDQyOiBvT08gLiBPMDBPCiAgICAgIGlmIDM3IC0gMzc6IElpaUlJaUlJCiAgICAgIGlmIDMxIC0gMzE6IGlpaUkxaWlJMWkKICAgICAgaWYgNCAtIDQ6IEkxSWkgLyBPMDAwME8gLSBPMDAwT29vMG8wT09vICsgSUlJSQogICAgIE8wbzBvb29vMDAgPSAnJwogICAgIHRyeSA6CiAgICAgIGlmIDczIC0gNzM6IG9PTyAqIG9vME9vTwogICAgICBpZiBPTzBvMDBPT08wME8gOgogICAgICAgaWkxSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIG8wT09vbzAgLCBPTzBvMDBPT08wME8gKQogICAgICBlbHNlIDoKICAgICAgIGlpMUlpID0gdXJsbGliMiAuIHVybG9wZW4gKCBvME9Pb28wICkKICAgICAgaWYgaWkxSWkgLiBpbmZvICggKSAuIGdldCAoICdDb250ZW50LUVuY29kaW5nJyApID09ICdnemlwJyA6CiAgICAgICBmcm9tIFN0cmluZ0lPIGltcG9ydCBTdHJpbmdJTwogICAgICAgaW1wb3J0IGd6aXAKICAgICAgIElJaWlpMTFpID0gU3RyaW5nSU8gKCBpaTFJaSAuIHJlYWQgKCApICkKICAgICAgIElpT28wb29PbzBPbyA9IGd6aXAgLiBHemlwRmlsZSAoIGZpbGVvYmogPSBJSWlpaTExaSApCiAgICAgICBPMG8wb29vbzAwID0gSWlPbzBvb09vME9vIC4gcmVhZCAoICkKICAgICAgZWxzZSA6CiAgICAgICBPMG8wb29vbzAwID0gaWkxSWkgLiByZWFkICggKQogICAgICAgaWYgMjQgLSAyNDogSWlpSUlpSUkgKyBPMDAwME8gKyBPb28wT29PbzBPT09PICUgb28wT29PICogaWlJCiAgICAgICBpZiA4NCAtIDg0OiBpaWlJMWlpSTFpIC8gSTFJaSAtIG9vbwogICAgICAgaWYgNCAtIDQ6IElpICUgTzAwb28wbyAlIG9vMDBvT29PMG8wbyAuIGlpaUkxaWlJMWkKICAgICAgaWYgJ3Byb3h5JyBpbiBpMUlpIGFuZCBub3QgSWlPb28wMG8wbyBpcyBOb25lIDoKICAgICAgIHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBJaU9vbzAwbzBvICkgKQogICAgICAgaWYgMzkgLSAzOTogb28wMG9Pb08wbzBvCiAgICAgIE8wbzBvb29vMDAgPSBPb08wME8wT29vT28gKCBPMG8wb29vbzAwICkKICAgICAgaWYgOTEgLSA5MTogT29vME9vT28wT09PTyArIG9vMDBvT29PMG8wbwogICAgICBpZiAzMyAtIDMzOiBPMDBPICsgb28wT29PIC4gTzAwME9vbzBvME9PbwogICAgICBpZiAnaW5jbHVkZWhlYWRlcnMnIGluIGkxSWkgOgogICAgICAgaWYgOTcgLSA5NzogaWlJICUgb28wMG9Pb08wbzBvICsgSUkxaWlJMWlpMWlpaSAtIElJSUkgKyBJSTFpMTExaUkxaWkgKiBvb28KICAgICAgIE8wbzBvb29vMDAgKz0gJyQkSEVBREVSU19TVEFSVCQkOicKICAgICAgIGZvciBpSUlpSUlJMWkgaW4gaWkxSWkgLiBoZWFkZXJzIDoKICAgICAgICBPMG8wb29vbzAwICs9IGlJSWlJSUkxaSArICc6JyArIGlpMUlpIC4gaGVhZGVycyAuIGdldCAoIGlJSWlJSUkxaSApICsgJ1xuJwogICAgICAgTzBvMG9vb28wMCArPSAnJCRIRUFERVJTX0VORCQkOicKICAgICAgIGlmIDYzIC0gNjM6IGkxMUlpSTFJSSAlIGlpSQogICAgICBpMWlJaWkgKCBPMG8wb29vbzAwICkKICAgICAgaTFpSWlpICggY29va2llSmFyICkKICAgICAgaWYgNjIgLSA2MjogaWlpSTFpaUkxaQogICAgICBpaTFJaSAuIGNsb3NlICggKQogICAgIGV4Y2VwdCA6CiAgICAgIHBhc3MKICAgICBjYWNoZWRQYWdlcyBbIGkxSWkgWyAncGFnZScgXSBdID0gTzBvMG9vb28wMAogICAgIGlmIDg1IC0gODU6IElpIC4gb28wMG9Pb08wbzBvIC4gT09vT29PMG8wbzBPTwogICAgIGlmIDUwIC0gNTA6IGlpSSAqIGlpaUkxaWlJMWkgKyBPMDAwT29vMG8wT09vICUgSUkxaTExMWlJMWlpICsgSWlpSUlpSUkKICAgICBpZiAyMiAtIDIyOiBvT08gKiBPT29Pb08wbzBvME9PCiAgICAgaWYgZm9yQ29va2llSmFyT25seSA6CiAgICAgIHJldHVybiBjb29raWVKYXIKICAgIGVsaWYgaTFJaSBbICdwYWdlJyBdIGFuZCBub3QgaTFJaSBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiBpMUlpIFsgJ3BhZ2UnIF0gLiBzdGFydHN3aXRoICggJyRweUZ1bmN0aW9uOicgKSA6CiAgICAgIEkxaWlJaSA9IG9vT08gKCBpMUlpIFsgJ3BhZ2UnIF0gLiBzcGxpdCAoICckcHlGdW5jdGlvbjonICkgWyAxIF0gLCAnJyAsIGNvb2tpZUphciAsIGkxSWkgKQogICAgICBpZiBmb3JDb29raWVKYXJPbmx5IDoKICAgICAgIHJldHVybiBjb29raWVKYXIKICAgICAgTzBvMG9vb28wMCA9IEkxaWlJaQogICAgICBPMG8wb29vbzAwID0gT29PMDBPME9vb09vICggTzBvMG9vb28wMCApCiAgICAgZWxzZSA6CiAgICAgIE8wbzBvb29vMDAgPSBpMUlpIFsgJ3BhZ2UnIF0KICAgaWYgJyRweUZ1bmN0aW9uOnBsYXltZWRpYSgnIGluIGkxSWkgWyAnZXhwcmVzJyBdIG9yICdBY3RpdmF0ZVdpbmRvdycgaW4gaTFJaSBbICdleHByZXMnIF0gb3IgJ1J1blBsdWdpbicgaW4gaTFJaSBbICdleHByZXMnIF0gb3IgJyRQTEFZRVJQUk9YWSQ9JyBpbiB1cmwgb3IgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gSWlJMWlpMUkxMWlJICkgOgogICAgaUlJaUkxaSA9IEZhbHNlCiAgIGlmICckZG9yZWdleCcgaW4gaTFJaSBbICdleHByZXMnIF0gOgogICAgaTFJaSBbICdleHByZXMnIF0gPSBPMG9PICggcmVnZXhzICwgaTFJaSBbICdleHByZXMnIF0gLCBjb29raWVKYXIgLCByZWN1cnNpdmVDYWxsID0gVHJ1ZSAsIGNhY2hlZFBhZ2VzID0gY2FjaGVkUGFnZXMgKQogICAgaWYgMTkgLSAxOTogaWlJICogSWlpSUlpSUkgLiBPT29Pb08wbzBvME9PIC4gb09PIC0gSUkxaWlJMWlpMWlpaQogICBpZiBub3QgaTFJaSBbICdleHByZXMnIF0gPT0gJycgOgogICAgaWYgNyAtIDc6IE8wMDAwTwogICAgaWYgJyRMaXZlU3RyZWFtQ2FwdGNoYScgaW4gaTFJaSBbICdleHByZXMnIF0gOgogICAgIEkxaWlJaSA9IEkxaUlpMTExMWkxSSAoIGkxSWkgLCBPMG8wb29vbzAwICwgY29va2llSmFyICkKICAgICBpZiAzOCAtIDM4OiBvb28gLyBJSTFpMTExaUkxaWkgLyBvTzAwb29vMG8wT08gLyBJaWlJSWlJSSAtIElpCiAgICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkZG9yZWdleFsiICsgSUlpSUkxMWlpaTEgKyAiXSIgLCBJMWlpSWkgKQogICAgIGlmIDE4IC0gMTg6IE8wME8gLiBJaSAuIE8wMDAwTyAqIG9PTwogICAgZWxpZiBpMUlpIFsgJ2V4cHJlcycgXSAuIHN0YXJ0c3dpdGggKCAnJHB5RnVuY3Rpb246JyApIG9yICcjJHB5RnVuY3Rpb24nIGluIGkxSWkgWyAnZXhwcmVzJyBdIDoKICAgICBpZiAxIC0gMTogTzAwME9vbzBvME9PbwogICAgIEkxaWlJaSA9ICcnCiAgICAgaWYgaTFJaSBbICdleHByZXMnIF0gLiBzdGFydHN3aXRoICggJyRweUZ1bmN0aW9uOicgKSA6CiAgICAgIEkxaWlJaSA9IG9vT08gKCBpMUlpIFsgJ2V4cHJlcycgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsIE8wbzBvb29vMDAgLCBjb29raWVKYXIgLCBpMUlpICkKICAgICBlbHNlIDoKICAgICAgSTFpaUlpID0gTzBPTzAwMDAwMG9PMCAoIGkxSWkgWyAnZXhwcmVzJyBdICwgTzBvMG9vb28wMCAsIGNvb2tpZUphciAsIGkxSWkgKQogICAgIGlmICdBY3RpdmF0ZVdpbmRvdycgaW4gaTFJaSBbICdleHByZXMnIF0gb3IgJ1J1blBsdWdpbicgaW4gaTFJaSBbICdleHByZXMnIF0gOiByZXR1cm4gJycgLCBGYWxzZQogICAgIGlmIGZvckNvb2tpZUphck9ubHkgOgogICAgICByZXR1cm4gY29va2llSmFyCiAgICAgaWYgJ2xpc3RyZXBlYXQnIGluIGkxSWkgOgogICAgICBJMWkxID0gaTFJaSBbICdsaXN0cmVwZWF0JyBdCiAgICAgIGlmIDEgLSAxOiBPb28wT29PbzBPT09PICsgb29vIC0gSUkxaTExMWlJMWlpCiAgICAgIGlmIDkgLSA5OiBPMDBvbzBvICsgb28wMG9Pb08wbzBvIC4gSTFJaSArIElJMWlpSTFpaTFpaWkgKiBvTzAwb29vMG8wT08KICAgICAgcmV0dXJuIEkxaTEgLCBldmFsICggSTFpaUlpICkgLCBpMUlpICwgcmVnZXhzICwgY29va2llSmFyCiAgICAgIGlmIDQzIC0gNDM6IG9vME9vTyAtIG9vbyAuIG9PMDBvb28wbzBPTyAuIElJMWlpSTFpaTFpaWkgKyBvT08gKyBpaWlJMWlpSTFpCiAgICAgIGlmIDk1IC0gOTU6IGlpSSAvIG9PMDBvb28wbzBPTyAlIG9vMDBvT29PMG8wbyAuIG9vMDBvT29PMG8wbyAvIGkxMUlpSTFJSQogICAgICBpZiA2MCAtIDYwOiBPMDAwME8gKyBpaUkgKiBpaUkgJSBPMDAwME8KICAgICB0cnkgOgogICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggdSIkZG9yZWdleFsiICsgSUlpSUkxMWlpaTEgKyAiXSIgLCBJMWlpSWkgKQogICAgIGV4Y2VwdCA6IHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElJaUlJMTFpaWkxICsgIl0iICwgSTFpaUlpIC4gZGVjb2RlICggInV0Zi04IiApICkKICAgIGVsc2UgOgogICAgIGlmICdsaXN0cmVwZWF0JyBpbiBpMUlpIDoKICAgICAgSTFpMSA9IGkxSWkgWyAnbGlzdHJlcGVhdCcgXQogICAgICBpZiA4IC0gODogSUlJSSAvIElJSUkgJSBJSTFpaUkxaWkxaWlpICUgb28wMG9Pb08wbzBvICsgT09vT29PMG8wbzBPTyAlIG9PMDBvb28wbzBPTwogICAgICBpZiAzOCAtIDM4OiBPMDBvbzBvICsgSTFJaQogICAgICBpZiA4NCAtIDg0OiBJMUlpIC0gSWlpSUlpSUkKICAgICAgaWYgNTggLSA1ODogb28wT29PICogSUlJSSAvIElJMWkxMTFpSTFpaQogICAgICBJaTExaUlJMWkgPSByZSAuIGZpbmRhbGwgKCBpMUlpIFsgJ2V4cHJlcycgXSAsIE8wbzBvb29vMDAgKQogICAgICBpZiAyNSAtIDI1OiBJaWlJSWlJSSAlIE8wME8gLSBpMTFJaUkxSUkKICAgICAgcmV0dXJuIEkxaTEgLCBJaTExaUlJMWkgLCBpMUlpICwgcmVnZXhzICwgY29va2llSmFyCiAgICAgIGlmIDgwIC0gODA6IElJMWlpSTFpaTFpaWkgKiBPMDAwT29vMG8wT09vICUgb08wMG9vbzBvME9PIC8gSWkgKyBPMDBvbzBvIC4gSTFJaQogICAgIEkxaWlJaSA9ICcnCiAgICAgaWYgbm90IE8wbzBvb29vMDAgPT0gJycgOgogICAgICBpZiA0MyAtIDQzOiBPMDBPICUgb28wMG9Pb08wbzBvIC8gb28wT29PICsgb29vICsgb08wMG9vbzBvME9PICsgb09PCiAgICAgIElpaTExaWlpID0gcmUgLiBjb21waWxlICggaTFJaSBbICdleHByZXMnIF0gKSAuIHNlYXJjaCAoIE8wbzBvb29vMDAgKQogICAgICB0cnkgOgogICAgICAgSTFpaUlpID0gSWlpMTFpaWkgLiBncm91cCAoIDEgKSAuIHN0cmlwICggKQogICAgICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiAgICAgZWxpZiBpMUlpIFsgJ3BhZ2UnIF0gPT0gJycgb3IgaTFJaSBbICdwYWdlJyBdID09IE5vbmUgOgogICAgICBJMWlpSWkgPSBpMUlpIFsgJ2V4cHJlcycgXQogICAgICBpZiAyMCAtIDIwOiBPMDAwME8gJSBPMDAwT29vMG8wT09vIC4gTzAwMDBPCiAgICAgaWYgcmF3UG9zdCA6CiAgICAgIGlmIDg0IC0gODQ6IE8wMDBPb28wbzBPT28KICAgICAgSTFpaUlpID0gdXJsbGliIC4gcXVvdGVfcGx1cyAoIEkxaWlJaSApCiAgICAgaWYgJ2h0bWx1bmVzY2FwZScgaW4gaTFJaSA6CiAgICAgIGlmIDkxIC0gOTE6IE8wMDAwTyAvIElpIC4gaTExSWlJMUlJICsgaWlpSTFpaUkxaSAqIElJMWlpSTFpaTFpaWkKICAgICAgaW1wb3J0IEhUTUxQYXJzZXIKICAgICAgSTFpaUlpID0gSFRNTFBhcnNlciAuIEhUTUxQYXJzZXIgKCApIC4gdW5lc2NhcGUgKCBJMWlpSWkgKQogICAgIHRyeSA6CiAgICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElJaUlJMTFpaWkxICsgIl0iICwgSTFpaUlpICkKICAgICBleGNlcHQgOiB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBJSWlJSTExaWlpMSArICJdIiAsIEkxaWlJaSAuIGRlY29kZSAoICJ1dGYtOCIgKSApCiAgICAgaWYgOTkgLSA5OTogaWlpSTFpaUkxaSArIElpaUlJaUlJCiAgICAgaWYgODQgLSA4NDogSUkxaTExMWlJMWlpICogaTExSWlJMUlJIC8gT09vT29PMG8wbzBPTyAuIGkxMUlpSTFJSQogICBlbHNlIDoKICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIElJaUlJMTFpaWkxICsgIl0iICwgJycgKQogaWYgJyRlcG9jdGltZSQnIGluIHVybCA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckZXBvY3RpbWUkJyAsIE9vT09PbzBPT09vMDBPICggKSApCiBpZiAnJGVwb2N0aW1lMiQnIGluIHVybCA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckZXBvY3RpbWUyJCcgLCBJMWkxSUlJSTFJSSAoICkgKQogIGlmIDk0IC0gOTQ6IGlpSSAlIElpaUlJaUlJIC8gaWlJICogSUlJSSArIElJMWlpSTFpaTFpaWkKIGlmICckR1VJRCQnIGluIHVybCA6CiAgaW1wb3J0IHV1aWQKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRHVUlEJCcgLCBzdHIgKCB1dWlkIC4gdXVpZDEgKCApICkgLiB1cHBlciAoICkgKQogaWYgJyRnZXRfY29va2llcyQnIGluIHVybCA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICckZ2V0X2Nvb2tpZXMkJyAsIG9PbzBPbyAoIGNvb2tpZUphciApICkKICBpZiA3IC0gNzogb28wT29PIC8gb08wMG9vbzBvME9PICUgSWkgLyBvT08gLiBpMTFJaUkxSUkKIGlmIHJlY3Vyc2l2ZUNhbGwgOiByZXR1cm4gdXJsCiBpZiA3MyAtIDczOiBpMTFJaUkxSUkgKiBvT08gKyBpaWlJMWlpSTFpICogT09vT29PMG8wbzBPTyAqIE8wMDBPb28wbzBPT28gJSBvT08KIGlmIHVybCA9PSAiIiA6CiAgcmV0dXJuCiBlbHNlIDoKICByZXR1cm4gdXJsICwgaUlJaUkxaQpkZWYgSUlpSSAoIHQgKSA6CiBpbXBvcnQgaGFzaGxpYgogSUlpSTExID0gaGFzaGxpYiAuIG1kNSAoICkKIElJaUkxMSAuIHVwZGF0ZSAoIHQgKQogcmV0dXJuIElJaUkxMSAuIGhleGRpZ2VzdCAoICkKIGlmIDEzIC0gMTM6IG9vbyArIEkxSWkgLiBPMDAwT29vMG8wT09vIC4gSUkxaWlJMWlpMWlpaSAqIElJSUkKZGVmIE8wb08wMG9vMG9vbyAoIGVuY3J5cHRlZCApIDoKIG8wME8wbzAgPSAiIgogaWYgMjAgLSAyMDogaTExSWlJMUlJIC0gb09PIC8gb28wMG9Pb08wbzBvCiBpZiA4MSAtIDgxOiBvb28gLyBpaWlJMWlpSTFpICUgTzAwTwogaWYgNzEgLSA3MTogb09PIC4gTzAwb28wbyAtIE9Pb09vTzBvMG8wT08gKyBvTzAwb29vMG8wT08KIGlmIDU1IC0gNTU6IEkxSWkgKiBvT08gKyBJMUlpICUgSUkxaTExMWlJMWlpIC4gaWlJCiBpZiA4IC0gODogSWlpSUlpSUkKZGVmIG9vMCAoIG1lZGlhX3VybCApIDoKIHRyeSA6CiAgaW1wb3J0IEN1c3RvbVBsYXllcgogIE9Pb09PID0gQ3VzdG9tUGxheWVyIC4gTXlYQk1DUGxheWVyICggKQogIEkxSTFpMTEgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBsYWJlbCA9IHN0ciAoIGlJSTFJaTFpaTExICkgLCBpY29uSW1hZ2UgPSAiRGVmYXVsdFZpZGVvLnBuZyIgLCB0aHVtYm5haWxJbWFnZSA9IHhibWMgLiBnZXRJbmZvSW1hZ2UgKCAiTGlzdEl0ZW0uVGh1bWIiICkgLCBwYXRoID0gbWVkaWFfdXJsICkKICBPT29PTyAuIHBsYXkgKCBtZWRpYV91cmwgLCBJMUkxaTExICkKICB4Ym1jIC4gc2xlZXAgKCAxMDAwICkKICB3aGlsZSBPT29PTyAuIGlzX2FjdGl2ZSA6CiAgIHhibWMgLiBzbGVlcCAoIDIwMCApCiBleGNlcHQgOgogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoICkKIHJldHVybiAnJwogaWYgODAgLSA4MDogT09vT29PMG8wbzBPTyArIE8wMG9vMG8gLSBPMDAwME8gJSBPT29Pb08wbzBvME9PCmRlZiBJaWlpMUlpICggcGFyYW1zICkgOgogT09PTzAgPSBqc29uIC4gZHVtcHMgKCBwYXJhbXMgKQogaTFJaWlpMWlpaWkgPSB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCBPT09PMCApCiBpZiAxMyAtIDEzOiBPMDAwT29vMG8wT09vIC4gSUkxaWlJMWlpMWlpaSAtIElJMWkxMTFpSTFpaSAuIG9PTwogdHJ5IDoKICBpaTFJaSA9IGpzb24gLiBsb2FkcyAoIGkxSWlpaTFpaWlpICkKIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3IgOgogIGlpMUlpID0ganNvbiAuIGxvYWRzICggaTFJaWlpMWlpaWkgLiBkZWNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiAgaWYgNDQgLSA0NDogaWlpSTFpaUkxaSAuIE8wMG9vMG8KIHRyeSA6CiAgaWYgJ3Jlc3VsdCcgaW4gaWkxSWkgOgogICByZXR1cm4gaWkxSWkgWyAncmVzdWx0JyBdCiAgcmV0dXJuIE5vbmUKIGV4Y2VwdCBLZXlFcnJvciA6CiAgbG9nZ2VyIC4gd2FybiAoICJbJXNdICVzIiAlICggcGFyYW1zIFsgJ21ldGhvZCcgXSAsIGlpMUlpIFsgJ2Vycm9yJyBdIFsgJ21lc3NhZ2UnIF0gKSApCiAgcmV0dXJuIE5vbmUKICBpZiA3OCAtIDc4OiBpMTFJaUkxSUkgLSBpaWlJMWlpSTFpIC8gTzAwME9vbzBvME9PbyAvIEkxSWkgLSBvb28KICBpZiA5NSAtIDk1OiBPb28wT29PbzBPT09PICUgTzAwME9vbzBvME9PbyAqIElJSUkgKyBJaWlJSWlJSSAtIG9vMDBvT29PMG8wbwpkZWYgTzAwTzAwbzBvb28gKCBwcm94eXNldHRpbmdzID0gTm9uZSApIDoKIGlmIDkgLSA5OiBJaWlJSWlJSQogaWYgcHJveHlzZXR0aW5ncyA9PSBOb25lIDoKICBpZiAzMSAtIDMxOiBJaWlJSWlJSSAlIE8wMDAwTyArIGkxMUlpSTFJSSAuIG9vbwogIHhibWMgLiBleGVjdXRlSlNPTlJQQyAoICd7Impzb25ycGMiOiIyLjAiLCAibWV0aG9kIjoiU2V0dGluZ3MuU2V0U2V0dGluZ1ZhbHVlIiwgInBhcmFtcyI6eyJzZXR0aW5nIjoibmV0d29yay51c2VodHRwcHJveHkiLCAidmFsdWUiOmZhbHNlfSwgImlkIjoxfScgKQogZWxzZSA6CiAgaWYgMjggLSAyODogSUkxaWlJMWlpMWlpaSAtIGkxMUlpSTFJSSAlIElpCiAgSTFJMWlpSUkxID0gcHJveHlzZXR0aW5ncyAuIHNwbGl0ICggJzonICkKICBvb09PT09PT08wb28gPSBJMUkxaWlJSTEgWyAwIF0KICBPb0kxID0gSTFJMWlpSUkxIFsgMSBdCiAgaUlpSUkxSWlJSWkgPSBJMUkxaWlJSTEgWyAyIF0KICBPT28wMG8wMG9PbzBPID0gTm9uZQogIE9PMDBvMG8wME9Pb08gPSBOb25lCiAgaWYgMTUgLSAxNTogb28wMG9Pb08wbzBvCiAgaWYgbGVuICggSTFJMWlpSUkxICkgPiAzIGFuZCAnQCcgaW4gSTFJMWlpSUkxIFsgMyBdIDoKICAgT09vMDBvMDBvT28wTyA9IEkxSTFpaUlJMSBbIDMgXSAuIHNwbGl0ICggJ0AnICkgWyAwIF0KICAgT08wMG8wbzAwT09vTyA9IEkxSTFpaUlJMSBbIDMgXSAuIHNwbGl0ICggJ0AnICkgWyAxIF0KICAgaWYgNTMgLSA1MzogT09vT29PMG8wbzBPTwogICBpZiAyNiAtIDI2OiBvbzBPb08gLyBPMDAwT29vMG8wT09vICsgT09vT29PMG8wbzBPTyAvIElpICogb08wMG9vbzBvME9PCiAgeGJtYyAuIGV4ZWN1dGVKU09OUlBDICggJ3sianNvbnJwYyI6IjIuMCIsICJtZXRob2QiOiJTZXR0aW5ncy5TZXRTZXR0aW5nVmFsdWUiLCAicGFyYW1zIjp7InNldHRpbmciOiJuZXR3b3JrLnVzZWh0dHBwcm94eSIsICJ2YWx1ZSI6dHJ1ZX0sICJpZCI6MX0nICkKICB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6Im5ldHdvcmsuaHR0cHByb3h5dHlwZSIsICJ2YWx1ZSI6JyArIHN0ciAoIGlJaUlJMUlpSUlpICkgKyAnfSwgImlkIjoxfScgKQogIHhibWMgLiBleGVjdXRlSlNPTlJQQyAoICd7Impzb25ycGMiOiIyLjAiLCAibWV0aG9kIjoiU2V0dGluZ3MuU2V0U2V0dGluZ1ZhbHVlIiwgInBhcmFtcyI6eyJzZXR0aW5nIjoibmV0d29yay5odHRwcHJveHlzZXJ2ZXIiLCAidmFsdWUiOiInICsgc3RyICggb29PT09PT09PMG9vICkgKyAnIn0sICJpZCI6MX0nICkKICB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6Im5ldHdvcmsuaHR0cHByb3h5cG9ydCIsICJ2YWx1ZSI6JyArIHN0ciAoIE9vSTEgKSArICd9LCAiaWQiOjF9JyApCiAgaWYgMTIgLSAxMjogSWlpSUlpSUkgLyBPMDAwT29vMG8wT09vIC0gb08wMG9vbzBvME9PICogb29vCiAgaWYgNjAgLSA2MDogb09PICogaTExSWlJMUlJIC4gSWlpSUlpSUkgKyBPMDAwT29vMG8wT09vICUgSUlJSSAlIG9vME9vTwogIGlmIG5vdCBPT28wMG8wMG9PbzBPID09IE5vbmUgOgogICB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6Im5ldHdvcmsuaHR0cHByb3h5dXNlcm5hbWUiLCAidmFsdWUiOiInICsgc3RyICggT09vMDBvMDBvT28wTyApICsgJyJ9LCAiaWQiOjF9JyApCiAgIHhibWMgLiBleGVjdXRlSlNPTlJQQyAoICd7Impzb25ycGMiOiIyLjAiLCAibWV0aG9kIjoiU2V0dGluZ3MuU2V0U2V0dGluZ1ZhbHVlIiwgInBhcmFtcyI6eyJzZXR0aW5nIjoibmV0d29yay5odHRwcHJveHlwYXNzd29yZCIsICJ2YWx1ZSI6IicgKyBzdHIgKCBPTzAwbzBvMDBPT29PICkgKyAnIn0sICJpZCI6MX0nICkKICAgaWYgMTAgLSAxMDogT09vT29PMG8wbzBPTyAqIE9vbzBPb09vME9PT08gLiBvbzBPb08KICAgaWYgODYgLSA4NjogTzAwTyArIG9vbyAlIG9vME9vTwpkZWYgSWlpaTExaUlpMUkxICggKSA6CiBvb29PMCA9IElpaWkxSWkgKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay51c2VodHRwcHJveHkiIH0gLCAnaWQnIDogMSB9ICkgWyAndmFsdWUnIF0KIGlmIDI0IC0gMjQ6IE8wMG9vMG8gLyBPMDAwT29vMG8wT09vCiBpSWlJSTFJaUlJaSA9IElpaWkxSWkgKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHl0eXBlIiB9ICwgJ2lkJyA6IDEgfSApIFsgJ3ZhbHVlJyBdCiBpZiA0NSAtIDQ1OiBJaSAtIE9vbzBPb09vME9PT08gLiBPMDBPIC0gTzAwMDBPIC4gTzAwb28wbyAvIE8wMG9vMG8KIGlmIG9vb08wIDoKICBvb09PT09PT08wb28gPSBJaWlpMUlpICggeyAnanNvbnJwYycgOiAnMi4wJyAsICJtZXRob2QiIDogIlNldHRpbmdzLkdldFNldHRpbmdWYWx1ZSIgLCAicGFyYW1zIiA6IHsgInNldHRpbmciIDogIm5ldHdvcmsuaHR0cHByb3h5c2VydmVyIiB9ICwgJ2lkJyA6IDEgfSApIFsgJ3ZhbHVlJyBdCiAgT29JMSA9IHVuaWNvZGUgKCBJaWlpMUlpICggeyAnanNvbnJwYycgOiAnMi4wJyAsICJtZXRob2QiIDogIlNldHRpbmdzLkdldFNldHRpbmdWYWx1ZSIgLCAicGFyYW1zIiA6IHsgInNldHRpbmciIDogIm5ldHdvcmsuaHR0cHByb3h5cG9ydCIgfSAsICdpZCcgOiAxIH0gKSBbICd2YWx1ZScgXSApCiAgT09vMDBvMDBvT28wTyA9IElpaWkxSWkgKCB7ICdqc29ucnBjJyA6ICcyLjAnICwgIm1ldGhvZCIgOiAiU2V0dGluZ3MuR2V0U2V0dGluZ1ZhbHVlIiAsICJwYXJhbXMiIDogeyAic2V0dGluZyIgOiAibmV0d29yay5odHRwcHJveHl1c2VybmFtZSIgfSAsICdpZCcgOiAxIH0gKSBbICd2YWx1ZScgXQogIE9PMDBvMG8wME9Pb08gPSBJaWlpMUlpICggeyAnanNvbnJwYycgOiAnMi4wJyAsICJtZXRob2QiIDogIlNldHRpbmdzLkdldFNldHRpbmdWYWx1ZSIgLCAicGFyYW1zIiA6IHsgInNldHRpbmciIDogIm5ldHdvcmsuaHR0cHByb3h5cGFzc3dvcmQiIH0gLCAnaWQnIDogMSB9ICkgWyAndmFsdWUnIF0KICBpZiA0MCAtIDQwOiBPMDAwME8gLSBJSUlJICsgSTFJaSAuIElJSUkgKyBJSTFpaUkxaWkxaWlpCiAgaWYgT09vMDBvMDBvT28wTyBhbmQgT08wMG8wbzAwT09vTyBhbmQgb29PT09PT09PMG9vIGFuZCBPb0kxIDoKICAgcmV0dXJuIG9vT09PT09PTzBvbyArICc6JyArIHN0ciAoIE9vSTEgKSArICc6JyArIHN0ciAoIGlJaUlJMUlpSUlpICkgKyAnOicgKyBPT28wMG8wMG9PbzBPICsgJ0AnICsgT08wMG8wbzAwT09vTwogIGVsaWYgb29PT09PT09PMG9vIGFuZCBPb0kxIDoKICAgcmV0dXJuIG9vT09PT09PTzBvbyArICc6JyArIHN0ciAoIE9vSTEgKSArICc6JyArIHN0ciAoIGlJaUlJMUlpSUlpICkKIGVsc2UgOgogIHJldHVybiBOb25lCiAgaWYgNzMgLSA3MzogTzAwME9vbzBvME9PbyAqIE9vbzBPb09vME9PT08gKiBJaWlJSWlJSSAqIE8wMDBPb28wbzBPT28gLiBPMDBvbzBvIC0gaTExSWlJMUlJCmRlZiBPb29vbzBPME9vICggbWVkaWFfdXJsICwgbmFtZSAsIGljb25JbWFnZSAsIHByb3h5aXAgLCBwb3J0ICwgcHJveHl1c2VyID0gTm9uZSAsIHByb3h5cGFzcyA9IE5vbmUgKSA6CiBpZiAyMSAtIDIxOiBJSUlJICsgT29vME9vT28wT09PTyAuIE8wMG9vMG8gLiBJSTFpaUkxaWkxaWlpICUgT09vT29PMG8wbzBPTwogaWYgbWVkaWFfdXJsID09IE5vbmUgb3IgbWVkaWFfdXJsID09ICcnIDoKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGxhbmV0YSxVbmFibGUgdG8gcGxheSBlbXB0eSBVcmwsNTAwMCwiICsgT08wME9vbzBvICsgIikiICkKICByZXR1cm4KIE9vbzBvbzAwT08wT08gPSB4Ym1jZ3VpIC4gRGlhbG9nUHJvZ3Jlc3MgKCApCiBPb28wb28wME9PME9PIC4gY3JlYXRlICggJ1Byb2dyZXNzJyAsICdQbGF5aW5nIHdpdGggY3VzdG9tIHByb3h5JyApCiBPb28wb28wME9PME9PIC4gdXBkYXRlICggMTAgLCAiIiAsICJzZXR0aW5nIHByb3h5Li4iICwgIiIgKQogSTExMTEgPSBGYWxzZQogaUlJSTExMWkxID0gJycKIGlmIDk0IC0gOTQ6IE8wME8gJSBJaSArIElJMWkxMTFpSTFpaQogdHJ5IDoKICBpZiA3NCAtIDc0OiBpaWlJMWlpSTFpIC8gSUlJSSAtIE8wMDAwTyAvIGkxMUlpSTFJSSAtIGkxMUlpSTFJSQogIGlJSUkxMTFpMSA9IElpaWkxMWlJaTFJMSAoICkKICBwcmludCAnZXhpc3RpbmdfcHJveHknICwgaUlJSTExMWkxCiAgaWYgMzggLSAzODogSTFJaSAtIE8wME8gKiBpaUkKICBpZiAzMiAtIDMyOiBpMTFJaUkxSUkgJSBJSUlJCiAgaWYgbm90IHByb3h5dXNlciA9PSBOb25lIDoKICAgTzAwTzAwbzBvb28gKCBwcm94eWlwICsgJzonICsgcG9ydCArICc6MDonICsgcHJveHl1c2VyICsgJ0AnICsgcHJveHlwYXNzICkKICBlbHNlIDoKICAgTzAwTzAwbzBvb28gKCBwcm94eWlwICsgJzonICsgcG9ydCArICc6MCcgKQogICBpZiA1MCAtIDUwOiBpMTFJaUkxSUkgLyBPT29Pb08wbzBvME9PCiAgcHJpbnQgJ3Byb3h5IHNldHRpbmcgY29tcGxldGUgcGxheWluZycgLCBtZWRpYV91cmwKICBJMTExMSA9IFRydWUKICBPb28wb28wME9PME9PIC4gdXBkYXRlICggODAgLCAiIiAsICJzZXR0aW5nIHByb3h5IGNvbXBsZXRlLCBub3cgcGxheWluZyIgLCAiIiApCiAgaWYgMjUgLSAyNTogb28wMG9Pb08wbzBvIC8gTzAwb28wbyAlIE8wMDBPb28wbzBPT28gJSBvbzAwb09vTzBvMG8gLyBJSTFpMTExaUkxaWkgLSBJaQogIGlmIDM4IC0gMzg6IE8wMDAwTwogIGltcG9ydCBDdXN0b21QbGF5ZXIKICBPT29PTyA9IEN1c3RvbVBsYXllciAuIE15WEJNQ1BsYXllciAoICkKICBPT29PTyAuIHBkaWFsb2d1ZSA9PSBPb28wb28wME9PME9PCiAgSTFJMWkxMSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGxhYmVsID0gc3RyICggbmFtZSApICwgaWNvbkltYWdlID0gaWNvbkltYWdlICwgdGh1bWJuYWlsSW1hZ2UgPSB4Ym1jIC4gZ2V0SW5mb0ltYWdlICggIkxpc3RJdGVtLlRodW1iIiApICwgcGF0aCA9IG1lZGlhX3VybCApCiAgT09vT08gLiBwbGF5ICggbWVkaWFfdXJsICwgSTFJMWkxMSApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgaWYgMTkgLSAxOTogaWlpSTFpaUkxaSAvIEkxSWkgLiBpaUkgKyBvT08gLiBJMUlpCiAgaWYgNTkgLSA1OTogTzAwMDBPICUgT29vME9vT28wT09PTyAtIG9vbyAtIE9vbzBPb09vME9PT08KICBpbXBvcnQgdGltZQogIG9vb09PbzAgPSB0aW1lIC4gdGltZSAoICkKICB0cnkgOgogICB3aGlsZSBPT29PTyAuIGlzX2FjdGl2ZSA6CiAgICB4Ym1jIC4gc2xlZXAgKCAxMDAwICkKICAgIGlmIE9Pb09PIC4gdXJscGxheWVkID09IEZhbHNlIGFuZCB0aW1lIC4gdGltZSAoICkgLSBvb29PT28wID4gMTIgOgogICAgIHByaW50ICdmYWlsZWQhISEnCiAgICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBsYW5ldGEsVW5hYmxlIHRvIHBsYXkgY2hlY2sgcHJveHksNTAwMCwiICsgT08wME9vbzBvICsgIikiICkKICAgICBicmVhawogICAgIGlmIDUxIC0gNTE6IGkxMUlpSTFJSSAlIG9vME9vTyAuIGlpSSAlIElJMWlpSTFpaTFpaWkKICBleGNlcHQgOiBwYXNzCiAgaWYgMTAgLSAxMDogb09PIC0gT29vME9vT28wT09PTyArIEkxSWkgKyBvTzAwb29vMG8wT08gJSBPT29Pb08wbzBvME9PIC0gaTExSWlJMUlJCiAgT29vMG9vMDBPTzBPTyAuIGNsb3NlICggKQogIE9vbzBvbzAwT08wT08gPSBOb25lCiBleGNlcHQgOgogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoICkKIGlmIE9vbzBvbzAwT08wT08gOgogIE9vbzBvbzAwT08wT08gLiBjbG9zZSAoICkKIGlmIEkxMTExIDoKICBwcmludCAnbm93IHJlc2V0dGluZyB0aGUgcHJveHkgYmFjaycKICBPMDBPMDBvMG9vbyAoIGlJSUkxMTFpMSApCiAgcHJpbnQgJ3Jlc2V0IGhlcmUnCiByZXR1cm4gJycKIGlmIDU2IC0gNTY6IGkxMUlpSTFJSSAvIE9vbzBPb09vME9PT08KIGlmIDcwIC0gNzA6IE8wME8KZGVmIE8wMG9vT29PTzAwICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgT28wMDAwTzBPMCA9IHBhZ2VfdmFsdWUKICBwYWdlX3ZhbHVlID0gaUlpaTFJICggcGFnZV92YWx1ZSAsIGhlYWRlcnMgPSByZWZlcmVyICkKICBpZiAzOCAtIDM4OiBvbzAwb09vTzBvMG8gLyBpMTFJaUkxSUkgJSBJSTFpMTExaUkxaWkKIGlJMWlpSTFJaSA9ICIoZXZhbFwoZnVuY3Rpb25cKHAsYSxjLGssZSwoPzpyfGQpLiopIgogaWYgODUgLSA4NTogTzAwb28wbyArIG9vMDBvT29PMG8wbyAlIG9vMDBvT29PMG8wbyAqIE8wMG9vMG8gLSBPT29Pb08wbzBvME9PIC8gb08wMG9vbzBvME9PCiBPbzBvID0gcmUgLiBjb21waWxlICggaUkxaWlJMUlpICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBpaUlJSSA9ICIiCiBpZiBPbzBvIGFuZCBsZW4gKCBPbzBvICkgPiAwIDoKICBmb3IgSUkxSTExSTFJSUkxIGluIE9vMG8gOgogICBJMWlJSWkgPSBvT2kxSWlJMWlJSTFpaWkgKCBJSTFJMTFJMUlJSTEgKQogICBJMTFpaWlJMUlpSSA9IG9PaWlJSUlpSWkxMTFpICggSTFpSUlpICwgJ1wnKC4qPylcJycgKQogICBpZiAndW5lc2NhcGUnIGluIEkxaUlJaSA6CiAgICBJMWlJSWkgPSB1cmxsaWIgLiB1bnF1b3RlICggSTExaWlpSTFJaUkgKQogICBpaUlJSSArPSBJMWlJSWkgKyAnXG4nCiAgIGlmIDUxIC0gNTE6IGlpaUkxaWlJMWkgKyBPMDAwT29vMG8wT09vICsgSTFJaSArIGlpSSAlIE8wMDBPb28wbzBPT28KICAgaWYgNjcgLSA2NzogaTExSWlJMUlJIC8gaWlJIC8gb08wMG9vbzBvME9PCiAgT28wMDAwTzBPMCA9IG9PaWlJSUlpSWkxMTFpICggaWlJSUkgLCAnc3JjPSIoLio/KSInICkKICBpZiA4OSAtIDg5OiBJMUlpIC0gT29vME9vT28wT09PTyAuIEkxSWkgKyBJSUlJICogT09vT29PMG8wbzBPTwogIHBhZ2VfdmFsdWUgPSBpSWlpMUkgKCBPbzAwMDBPME8wICwgaGVhZGVycyA9IHJlZmVyZXIgKQogIGlmIDUwIC0gNTA6IElpaUlJaUlJICogTzAwME9vbzBvME9PbyAlIE8wMG9vMG8gKiBPMDAwT29vMG8wT09vCiAgaWYgNTMgLSA1MzogSTFJaSAqIE8wMDAwTwogIGlmIDEzIC0gMTM6IElpCiBPT09vTzBPbzAgPSBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfdmFsdWUgLCAnc3RyZWFtZXJcJy4qP1wnKC4qPylcJ1wpJyApCiBvME9Pb28wME8gPSBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfdmFsdWUgLCAnZmlsZVwnLFxzXCcoLio/KVwnJyApCiBpZiA2MSAtIDYxOiBJaWlJSWlJSQogaWYgMjIgLSAyMjogb08wMG9vbzBvME9PIC4gTzAwME9vbzBvME9PbyAtIG9vME9vTyAuIG9vME9vTyAqIE8wMDAwTyAvIE9vbzBPb09vME9PT08KIHJldHVybiBPT09vTzBPbzAgKyAnIHBsYXlwYXRoPScgKyBvME9Pb28wME8gKyAnIHBhZ2VVcmw9JyArIE9vMDAwME8wTzAKIGlmIDY3IC0gNjc6IE9vbzBPb09vME9PT08KZGVmIE9vSUlJMUlpMTFJaWlpICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgcGFnZV92YWx1ZSA9IGlJaWkxSSAoIHBhZ2VfdmFsdWUgLCBoZWFkZXJzID0gcmVmZXJlciApCiBpSTFpaUkxSWkgPSAidmFyIGEgPSAoLio/KTtccyp2YXIgYiA9ICguKj8pO1xzKnZhciBjID0gKC4qPyk7XHMqdmFyIGQgPSAoLio/KTtccyp2YXIgZiA9ICguKj8pO1xzKnZhciB2X3BhcnQgPSAnKC4qPyknOyIKIE9vMG8gPSByZSAuIGNvbXBpbGUgKCBpSTFpaUkxSWkgKSAuIGZpbmRhbGwgKCBwYWdlX3ZhbHVlICkgWyAwIF0KIGlmIDQyIC0gNDI6IGlpSSAvIE8wMDBPb28wbzBPT28gLSBPMDAwME8gKyBJSTFpMTExaUkxaWkKIGlJMTFpSTEgLCBpSUlpSUlJMWkgLCBvMCAsIG8wMG9vb29PMDAgLCBJaU9vMG9vT28wT28gLCBJSTFJMTFJMUlJSTEgPSAoIE9vMG8gKQogSWlPbzBvb09vME9vID0gaW50ICggSWlPbzBvb09vME9vICkKIGlJMTFpSTEgPSBpbnQgKCBpSTExaUkxICkgLyBJaU9vMG9vT28wT28KIGlJSWlJSUkxaSA9IGludCAoIGlJSWlJSUkxaSApIC8gSWlPbzBvb09vME9vCiBvMCA9IGludCAoIG8wICkgLyBJaU9vMG9vT28wT28KIG8wMG9vb29PMDAgPSBpbnQgKCBvMDBvb29vTzAwICkgLyBJaU9vMG9vT28wT28KIGlmIDQgLSA0OiBJaWlJSWlJSQogSWkxMWlJSTFpID0gJ3J0bXA6Ly8nICsgc3RyICggaUkxMWlJMSApICsgJy4nICsgc3RyICggaUlJaUlJSTFpICkgKyAnLicgKyBzdHIgKCBvMCApICsgJy4nICsgc3RyICggbzAwb29vb08wMCApICsgSUkxSTExSTFJSUkxIDsKIHJldHVybiBJaTExaUlJMWkKIGlmIDQ3IC0gNDc6IEkxSWkgKyBPMDBvbzBvIC4gaWlJCmRlZiBvME8wMG9PTzAwMDAwICggdXJsICwgdXNlcmFnZW50ID0gTm9uZSApIDoKIG9vID0gJyNFWFRNM1UnCiBvbyArPSAnXG4jRVhULVgtU1RSRUFNLUlORjpQUk9HUkFNLUlEPTEsQkFORFdJRFRIPTM2MTgxNicKIG9vICs9ICdcbicgKyB1cmwgKyAnJmJ5dGVzPTAtMjAwMDAwJwogTzBPID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICd0ZXN0ZmlsZS5tM3UnICkKIG9vICs9ICdcbicKIElJSUlpSTFpMWlJICggTzBPICwgb28gKQogaWYgNjAgLSA2MDogSWlpSUlpSUkgLSBJSUlJICogSTFJaSArIE8wMG9vMG8gLyBPMDAwT29vMG8wT09vCiByZXR1cm4gTzBPCiBpZiA4IC0gODogaWlJIC8gb28wMG9Pb08wbzBvICUgTzAwMDBPCmRlZiBJSUlJaUkxaTFpSSAoIGZpbGVfbmFtZSAsIHBhZ2VfZGF0YSAsIGFwcGVuZCA9IEZhbHNlICkgOgogaWYgYXBwZW5kIDoKICBJaU9vMG9vT28wT28gPSBvcGVuICggZmlsZV9uYW1lICwgJ2EnICkKICBJaU9vMG9vT28wT28gLiB3cml0ZSAoIHBhZ2VfZGF0YSApCiAgSWlPbzBvb09vME9vIC4gY2xvc2UgKCApCiBlbHNlIDoKICBJaU9vMG9vT28wT28gPSBvcGVuICggZmlsZV9uYW1lICwgJ3diJyApCiAgSWlPbzBvb09vME9vIC4gd3JpdGUgKCBwYWdlX2RhdGEgKQogIElpT28wb29PbzBPbyAuIGNsb3NlICggKQogIHJldHVybiAnJwogIGlmIDg0IC0gODQ6IGlpaUkxaWlJMWkKZGVmIGkxMTExSUlJICggZmlsZV9uYW1lICkgOgogSWlPbzBvb09vME9vID0gb3BlbiAoIGZpbGVfbmFtZSAsICdyYicgKQogbzAwb29vb08wMCA9IElpT28wb29PbzBPbyAuIHJlYWQgKCApCiBJaU9vMG9vT28wT28gLiBjbG9zZSAoICkKIHJldHVybiBvMDBvb29vTzAwCiBpZiA3NiAtIDc2OiBvb28gLyBPMDAwME8gLiBJaSAqIG9vbwpkZWYgSUlJaWkxMTFpMUkxaSAoIHBhZ2VfZGF0YSApIDoKIGltcG9ydCByZSAsIGJhc2U2NCAsIHVybGxpYiA7CiBJaUlJSTExMWkgPSBwYWdlX2RhdGEKIHdoaWxlICdnZWgoJyBpbiBJaUlJSTExMWkgOgogIGlmIElpSUlJMTExaSAuIHN0YXJ0c3dpdGggKCAnbG9sKCcgKSA6IElpSUlJMTExaSA9IElpSUlJMTExaSBbIDUgOiAtIDEgXQogIGlmIDU4IC0gNTg6IG9vME9vTyArIE9vbzBPb09vME9PT08gLyBJSUlJICsgb08wMG9vbzBvME9PICogaWlJICsgTzAwME9vbzBvME9PbwogIElpSUlJMTExaSA9IHJlIC4gY29tcGlsZSAoICciKC4qPykiJyApIC4gZmluZGFsbCAoIElpSUlJMTExaSApIFsgMCBdIDsKICBJaUlJSTExMWkgPSBiYXNlNjQgLiBiNjRkZWNvZGUgKCBJaUlJSTExMWkgKSA7CiAgSWlJSUkxMTFpID0gdXJsbGliIC4gdW5xdW90ZSAoIElpSUlJMTExaSApIDsKIHByaW50IElpSUlJMTExaQogcmV0dXJuIElpSUlJMTExaQogaWYgOTkgLSA5OTogaWlpSTFpaUkxaSAtIE8wME8KZGVmIEkxaWlJICggcGFnZV9kYXRhICkgOgogaWYgODAgLSA4MDogaWlJIC0gb29vICUgSWkKIE9PMDAwID0gaUlpaTFJICggcGFnZV9kYXRhICkgOwogSWlJSWkxSTFpaUkgPSAnKGh0dHAuKiknCiBpbXBvcnQgdXVpZAogT29vMG9PTyA9IHN0ciAoIHV1aWQgLiB1dWlkMSAoICkgKSAuIHVwcGVyICggKQogaUlpaUlpSSA9IHJlIC4gY29tcGlsZSAoIElpSUlpMUkxaWlJICkgLiBmaW5kYWxsICggT08wMDAgKQogaWkxSUlJaSA9IFsgKCAnWC1QbGF5YmFjay1TZXNzaW9uLUlkJyAsIE9vbzBvT08gKSBdCiBmb3Igb29vb29vbzBvT09vIGluIGlJaWlJaUkgOgogIHRyeSA6CiAgIGlpMWlJaUlJMUlJaSA9IGlJaWkxSSAoIG9vb29vb28wb09PbyAsIGhlYWRlcnMgPSBpaTFJSUlpICkgOwogICBpZiA3NCAtIDc0OiBpaUkgKiBPT29Pb08wbzBvME9PIC8gSWlpSUlpSUkgKiBpaWlJMWlpSTFpCiAgZXhjZXB0IDogcGFzcwogIGlmIDU5IC0gNTk6IGkxMUlpSTFJSSAqIElJSUkKIHJldHVybiBwYWdlX2RhdGEgKyAnfCZYLVBsYXliYWNrLVNlc3Npb24tSWQ9JyArIE9vbzBvT08KIGlmIDYyIC0gNjI6IE9vbzBPb09vME9PT08gLyBJSTFpMTExaUkxaWkgLiBvbzAwb09vTzBvMG8gKiBJSUlJIC4gSWkKIGlmIDE4IC0gMTg6IE8wMDBPb28wbzBPT28KZGVmIG9PTzAwICggcGFnZV9kYXRhICkgOgogaWYgNDEgLSA0MTogSUkxaWlJMWlpMWlpaQogaWYgcGFnZV9kYXRhIC4gc3RhcnRzd2l0aCAoICdodHRwOi8vZGFnLnRvdGFsLXN0cmVhbS5uZXQnICkgOgogIGlpMUlJSWkgPSBbICggJ1VzZXItQWdlbnQnICwgJ1ZlcmlzbW8tQmxhY2tVSV8oMi40LjcuNS44LjAuMzQpJyApIF0KICBwYWdlX2RhdGEgPSBpSWlpMUkgKCBwYWdlX2RhdGEgLCBoZWFkZXJzID0gaWkxSUlJaSApIDsKICBpZiA1OCAtIDU4OiBvb28KIGlmICcxMjcuMC4wLjEnIGluIHBhZ2VfZGF0YSA6CiAgcmV0dXJuIG9PT08wbyAoIHBhZ2VfZGF0YSApCiBlbGlmIG9PaWlJSUlpSWkxMTFpICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgIT0gJycgOgogIGlpMTExMWlJMUkxSUkgPSBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnP3dtc0F1dGhTaWduPScgKyBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICsgJz09L21wNDonICsgb09paUlJSWlJaTExMWkgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgaWkxMTExaUkxSTFJSSA9IG9PaWlJSUlpSWkxMTFpICggcGFnZV9kYXRhICwgJ2hyZWY9IihbXiJdKykiW14iXSskJyApCiAgaWYgbGVuICggaWkxMTExaUkxSTFJSSApID09IDAgOgogICBpaTExMTFpSTFJMUlJID0gcGFnZV9kYXRhCiBpaTExMTFpSTFJMUlJID0gaWkxMTExaUkxSTFJSSAuIHJlcGxhY2UgKCAnICcgLCAnJTIwJyApCiByZXR1cm4gaWkxMTExaUkxSTFJSQogaWYgNDcgLSA0NzogaWlpSTFpaUkxaSAtIElJMWkxMTFpSTFpaSAvIG9vbyArIE8wMDAwTyArIE8wMDBPb28wbzBPT28gJSBJSUlJCmRlZiBvT2lpSUlJaUlpMTExaSAoIGRhdGEgLCByZV9wYXR0ZW4gKSA6CiBvT09Pb28gPSAnJwogaTFJaSA9IHJlIC4gc2VhcmNoICggcmVfcGF0dGVuICwgZGF0YSApCiBpZiBpMUlpICE9IE5vbmUgOgogIG9PT09vbyA9IGkxSWkgLiBncm91cCAoIDEgKQogZWxzZSA6CiAgb09PT29vID0gJycKIHJldHVybiBvT09Pb28KIGlmIDY5IC0gNjk6IE8wME8KZGVmIG9PT08wbyAoIHBhZ2VfZGF0YSApIDoKIGlpMTExMWlJMUkxSUkgPSAnJwogaWYgJzEyNy4wLjAuMScgaW4gcGFnZV9kYXRhIDoKICBpaTExMTFpSTFJMUlJID0gb09paUlJSWlJaTExMWkgKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJyBsaXZlPXRydWUgdGltZW91dD0xNSBwbGF5cGF0aD0nICsgb09paUlJSWlJaTExMWkgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW2EtekEtWjAtOS1fXFwuQF0rKScgKQogIGlmIDQ1IC0gNDU6IG9PTyAqIElpCiBpZiBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICd0b2tlbj0oW14mXSspJicgKSAhPSAnJyA6CiAgaWkxMTExaUkxSTFJSSA9IGlpMTExMWlJMUkxSUkgKyAnP3Rva2VuPScgKyBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICd0b2tlbj0oW14mXSspJicgKQogZWxpZiBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICE9ICcnIDoKICBpaTExMTFpSTFJMUlJID0gb09paUlJSWlJaTExMWkgKCBwYWdlX2RhdGEgLCAnJnZlcl90PShbXiZdKykmJyApICsgJz93bXNBdXRoU2lnbj0nICsgb09paUlJSWlJaTExMWkgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSArICc9PS9tcDQ6JyArIG9PaWlJSUlpSWkxMTFpICggcGFnZV9kYXRhICwgJ1xcP3k9KFteJl0rKSYnICkKIGVsc2UgOgogIGlpMTExMWlJMUkxSUkgPSBvT2lpSUlJaUlpMTExaSAoIHBhZ2VfZGF0YSAsICdIUkVGPSIoW14iXSspIicgKQogIGlmIDcgLSA3OiBJSTFpMTExaUkxaWkgKiBJaWlJSWlJSSAqIE9vbzBPb09vME9PT08KIGlmICdkYWcxLmFzeCcgaW4gaWkxMTExaUkxSTFJSSA6CiAgcmV0dXJuIG9PTzAwICggaWkxMTExaUkxSTFJSSApCiAgaWYgOTIgLSA5Mjogb28wT29PICsgTzAwME9vbzBvME9PbyAtIG9vbyAtIG9PTyAvIElJSUkKIGlmICdkZXZpbmxpdmVmcy5mcGxpdmUubmV0JyBub3QgaW4gaWkxMTExaUkxSTFJSSA6CiAgaWkxMTExaUkxSTFJSSA9IGlpMTExMWlJMUkxSUkgLiByZXBsYWNlICggJ2RldmlubGl2ZScgLCAnZmxpdmUnICkKIGlmICdwZXJtbGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBpaTExMTFpSTFJMUlJIDoKICBpaTExMTFpSTFJMUlJID0gaWkxMTExaUkxSTFJSSAuIHJlcGxhY2UgKCAncGVybWxpdmUnICwgJ2ZsaXZlJyApCiByZXR1cm4gaWkxMTExaUkxSTFJSQogaWYgMTggLSAxODogaWlpSTFpaUkxaSAqIElJSUkgLSBJSTFpaUkxaWkxaWlpICogTzAwMDBPCiBpZiA5NyAtIDk3OiBPMDAwME8KZGVmIG9vTzBJSSAoIHN0cl9ldmFsICkgOgogT29vMDAwTzAwbzBPID0gIiIKIHRyeSA6CiAgbzAwbzBvbzBPb28wID0gIncsaSxzLGU9KCIgKyBzdHJfZXZhbCArICcpJwogIGV4ZWMgKCBvMDBvMG9vME9vbzAgKQogIE9vbzAwME8wMG8wTyA9IGkxMUlpaWlpSTExaTExSUlJICggdyAsIG8wTzBPbzAwICwgSWlJSUkxMTFpICwgZSApCiBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKIGlmIDI1IC0gMjU6IG9PMDBvb28wbzBPTyAuIE8wMG9vMG8gKyBJMUlpCiByZXR1cm4gT29vMDAwTzAwbzBPCiBpZiA5MyAtIDkzOiBPMDAwT29vMG8wT09vICUgSTFJaSArIGlpSSAlIGlpSSAlIG9PMDBvb28wbzBPTwpkZWYgaTExSWlpaWlJMTFpMTFJSUkgKCB3ICwgaSAsIHMgLCBlICkgOgogaWlpSTFJID0gMCA7CiBJaWlJaUkxMSA9IDAgOwogb28wMDBPMCA9IDAgOwogaTExaWkxID0gWyBdIDsKIGlJaUlpMTFJMTFJID0gWyBdIDsKIHdoaWxlIFRydWUgOgogIGlmICggaWlpSTFJIDwgNSApIDoKICAgaUlpSWkxMUkxMUkgLiBhcHBlbmQgKCB3IFsgaWlpSTFJIF0gKQogIGVsaWYgKCBpaWlJMUkgPCBsZW4gKCB3ICkgKSA6CiAgIGkxMWlpMSAuIGFwcGVuZCAoIHcgWyBpaWlJMUkgXSApIDsKICBpaWlJMUkgKz0gMSA7CiAgaWYgKCBJaWlJaUkxMSA8IDUgKSA6CiAgIGlJaUlpMTFJMTFJIC4gYXBwZW5kICggaSBbIElpaUlpSTExIF0gKQogIGVsaWYgKCBJaWlJaUkxMSA8IGxlbiAoIGkgKSApIDoKICAgaTExaWkxIC4gYXBwZW5kICggaSBbIElpaUlpSTExIF0gKQogIElpaUlpSTExICs9IDEgOwogIGlmICggb28wMDBPMCA8IDUgKSA6CiAgIGlJaUlpMTFJMTFJIC4gYXBwZW5kICggcyBbIG9vMDAwTzAgXSApCiAgZWxpZiAoIG9vMDAwTzAgPCBsZW4gKCBzICkgKSA6CiAgIGkxMWlpMSAuIGFwcGVuZCAoIHMgWyBvbzAwME8wIF0gKSA7CiAgb28wMDBPMCArPSAxIDsKICBpZiAoIGxlbiAoIHcgKSArIGxlbiAoIGkgKSArIGxlbiAoIHMgKSArIGxlbiAoIGUgKSA9PSBsZW4gKCBpMTFpaTEgKSArIGxlbiAoIGlJaUlpMTFJMTFJICkgKyBsZW4gKCBlICkgKSA6CiAgIGJyZWFrIDsKICAgaWYgOCAtIDg6IE8wME8KIElJMTFpSUkxMWkxaWkgPSAnJyAuIGpvaW4gKCBpMTFpaTEgKQogaUlJaTFJSTFJaTFJID0gJycgLiBqb2luICggaUlpSWkxMUkxMUkgKQogSWlpSWlJMTEgPSAwIDsKIG8wT28wT29PMCA9IFsgXSA7CiBmb3IgaWlpSTFJIGluIHJhbmdlICggMCAsIGxlbiAoIGkxMWlpMSApICwgMiApIDoKICBpZiAzOSAtIDM5OiBJSTFpMTExaUkxaWkgJSBJMUlpICsgSWkgKyBPT29Pb08wbzBvME9PICUgSWkKICBPTzBvb28wTyA9IC0gMSA7CiAgaWYgKCBvcmQgKCBpSUlpMUlJMUlpMUkgWyBJaWlJaUkxMSBdICkgJSAyICkgOgogICBPTzBvb28wTyA9IDEgOwogICBpZiA4NCAtIDg0OiBpaWlJMWlpSTFpCiAgbzBPbzBPb08wIC4gYXBwZW5kICggY2hyICggaW50ICggSUkxMWlJSTExaTFpaSBbIGlpaUkxSSA6IGlpaUkxSSArIDIgXSAsIDM2ICkgLSBPTzBvb28wTyApICkgOwogIElpaUlpSTExICs9IDEgOwogIGlmICggSWlpSWlJMTEgPj0gbGVuICggaUlpSWkxMUkxMUkgKSApIDoKICAgSWlpSWlJMTEgPSAwIDsKIElpMTFpSUkxaSA9ICcnIC4gam9pbiAoIG8wT28wT29PMCApCiBpZiAnZXZhbChmdW5jdGlvbih3LGkscyxlKScgaW4gSWkxMWlJSTFpIDoKICBpZiA3OCAtIDc4OiBJSTFpMTExaUkxaWkgLyBPb28wT29PbzBPT09PIC8gTzAwTwogIElpMTFpSUkxaSA9IHJlIC4gY29tcGlsZSAoICdldmFsXChmdW5jdGlvblwodyxpLHMsZVwpLip9XCgoLio/KVwpJyApIC4gZmluZGFsbCAoIElpMTFpSUkxaSApIFsgMCBdCiAgcmV0dXJuIG9vTzBJSSAoIElpMTFpSUkxaSApCiBlbHNlIDoKICBpZiA4MyAtIDgzOiBpaUkgLyBPMDBvbzBvIC8gaWlpSTFpaUkxaSAlIElpaUlJaUlJIC4gb28wMG9Pb08wbzBvCiAgcmV0dXJuIElpMTFpSUkxaQogIGlmIDg1IC0gODU6IE8wMG9vMG8gJSBvT08gKiBvbzAwb09vTzBvMG8KZGVmIG9PaTFJaUkxaUlJMWlpaSAoIHBhZ2VfdmFsdWUgLCByZWdleF9mb3JfdGV4dCA9ICcnICwgaXRlcmF0aW9ucyA9IDEgLCB0b3RhbF9pdGVyYXRpb24gPSAxICkgOgogdHJ5IDoKICBPT09PbzAwb29PTzAwbyA9IE5vbmUKICBpZiBwYWdlX3ZhbHVlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICAgcGFnZV92YWx1ZSA9IGlJaWkxSSAoIHBhZ2VfdmFsdWUgKQogICBpZiAxMCAtIDEwOiBPMDAwME8gLiBJaSAtIE8wMG9vMG8gLyBJaQogIGlmIHJlZ2V4X2Zvcl90ZXh0IGFuZCBsZW4gKCByZWdleF9mb3JfdGV4dCApID4gMCA6CiAgIHRyeSA6CiAgICBwYWdlX3ZhbHVlID0gcmUgLiBjb21waWxlICggcmVnZXhfZm9yX3RleHQgKSAuIGZpbmRhbGwgKCBwYWdlX3ZhbHVlICkgWyAwIF0KICAgZXhjZXB0IDogcmV0dXJuICdOT1RQQUNLRUQnCiAgIGlmIDY4IC0gNjg6IE9Pb09vTzBvMG8wT08gLSBPT29Pb08wbzBvME9PIC0gSWkKICBwYWdlX3ZhbHVlID0gT29PbzBPb09vICggcGFnZV92YWx1ZSAsIGl0ZXJhdGlvbnMgLCB0b3RhbF9pdGVyYXRpb24gKQogZXhjZXB0IDoKICBwYWdlX3ZhbHVlID0gJ1VOUEFDS0VERkFJTEVEJwogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogIGlmIDggLSA4OiBPb28wT29PbzBPT09PCiBpZiAnc2F2MWxpdmUudHYnIGluIHBhZ2VfdmFsdWUgOgogIHBhZ2VfdmFsdWUgPSBwYWdlX3ZhbHVlIC4gcmVwbGFjZSAoICdzYXYxbGl2ZS50dicgLCAnc2F3bGl2ZS50dicgKQogIGlmIDUzIC0gNTM6IG9vMDBvT29PMG8wbyArIElpICUgaTExSWlJMUlJIC4gb28wMG9Pb08wbzBvCiByZXR1cm4gcGFnZV92YWx1ZQogaWYgODcgLSA4NzogTzAwb28wbyAqIE9Pb09vTzBvMG8wT08KZGVmIE9vT28wT29PbyAoIHNKYXZhc2NyaXB0ICwgaXRlcmF0aW9uID0gMSAsIHRvdGFsaXRlcmF0aW9ucyA9IDIgKSA6CiBpZiA1NCAtIDU0OiBPMDAwT29vMG8wT09vIC8gTzAwMDBPCiBpZiBzSmF2YXNjcmlwdCAuIHN0YXJ0c3dpdGggKCAndmFyIF8weGNiOGE9JyApIDoKICBvb09vbyA9IHNKYXZhc2NyaXB0IC4gc3BsaXQgKCAndmFyIF8weGNiOGE9JyApCiAgbzAwbzBvbzBPb28wID0gIm15YXJyYXk9IiArIG9vT29vIFsgMSBdIC4gc3BsaXQgKCAiZXZhbCgiICkgWyAwIF0KICBleGVjICggbzAwbzBvbzBPb28wICkKICBJaTFJMUkgPSA2MgogIElJSWlpID0gaW50ICggb29Pb28gWyAxIF0gLiBzcGxpdCAoICIsNjIsIiApIFsgMSBdIC4gc3BsaXQgKCAnLCcgKSBbIDAgXSApCiAgTzAgPSBteWFycmF5IFsgMCBdCiAgaWlpSUlJaSA9IG15YXJyYXkgWyAzIF0KICB3aXRoIG9wZW4gKCAndGVtcCBmaWxlJyArIHN0ciAoIGl0ZXJhdGlvbiApICsgJy5qcycgLCAid2IiICkgYXMgSUlJSUkxSUkxIDoKICAgSUlJSUkxSUkxIC4gd3JpdGUgKCBzdHIgKCBpaWlJSUlpICkgKQogICBpZiAxNiAtIDE2OiBPb28wT29PbzBPT09PICogSUkxaTExMWlJMWlpIC8gSUkxaWlJMWlpMWlpaSAuIE8wMDBPb28wbzBPT28gLyBPMDAwT29vMG8wT09vIC0gTzAwb28wbwogZWxzZSA6CiAgaWYgODIgLSA4MjogSUkxaTExMWlJMWlpIC4gaTExSWlJMUlJIC8gaTExSWlJMUlJICogT29vME9vT28wT09PTyAlIGkxMUlpSTFJSQogIGlmICJybiBwfSgnIiBpbiBzSmF2YXNjcmlwdCA6CiAgIG9vT29vID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICJybiBwfSgnIiApCiAgZWxzZSA6CiAgIG9vT29vID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICJybiBBfSgnIiApCiAgIGlmIDc3IC0gNzc6IGlpaUkxaWlJMWkKICAgaWYgNDcgLSA0NzogTzAwME9vbzBvME9PbwogIE8wICwgSWkxSTFJICwgSUlJaWkgLCBpaWlJSUlpID0gKCAnJyAsICcwJyAsICcwJyAsICcnICkKICBpZiA2OSAtIDY5OiBpaWlJMWlpSTFpCiAgbzAwbzBvbzBPb28wID0gInAxLGExLGMxLGsxPSgnIiArIG9vT29vIFsgMSBdIC4gc3BsaXQgKCAiLnNwbGkiICkgWyAwIF0gKyAnKScKICBleGVjICggbzAwbzBvbzBPb28wICkKIGlpaUlJSWkgPSBpaWlJSUlpIC4gc3BsaXQgKCAnfCcgKQogb29Pb28gPSBvb09vbyBbIDEgXSAuIHNwbGl0ICggIikpJyIgKQogaWYgMzUgLSAzNTogb28wMG9Pb08wbzBvIC4gb28wT29PICsgT09vT29PMG8wbzBPTyAlIG9vMDBvT29PMG8wbyAvIE8wMDAwTyAtIEkxSWkKIGlmIDYgLSA2OiBJSUlJICUgT09vT29PMG8wbzBPTyAvIE8wMG9vMG8gKiBPMDBvbzBvCiBpZiAyIC0gMjogSWkKIGlmIDg4IC0gODg6IE9vbzBPb09vME9PT08gKiBpaUkgJSBJSTFpMTExaUkxaWkKIGlmIDgzIC0gODM6IGlpaUkxaWlJMWkgLyBJSTFpaUkxaWkxaWlpICsgb09PICogTzAwMDBPICUgaWlpSTFpaUkxaQogaWYgMTcgLSAxNzogTzAwb28wbyAlIE8wMDAwTyArIG9vbyArIGkxMUlpSTFJSSAuIG9PMDBvb28wbzBPTyAtIG9PMDBvb28wbzBPTwogaWYgMTAgLSAxMDogT29vME9vT28wT09PTyAqIG9vbyAqIE9Pb09vTzBvMG8wT08KIGlmIDkwIC0gOTA6IGkxMUlpSTFJSSAtIE8wMDAwTyAlIE8wME8KIGlmIDUwIC0gNTA6IElJMWkxMTFpSTFpaSAtIG9vbyAtIGlpSSAvIE9vbzBPb09vME9PT08gLyBPMDBvbzBvIC4gSWkKIGlmIDgzIC0gODM6IGlpSSAqIE8wMG9vMG8gJSBJSTFpMTExaUkxaWkgLiBJMUlpICogSUkxaWlJMWlpMWlpaSAuIG9vMDBvT29PMG8wbwogaWYgMyAtIDM6IE8wMDBPb28wbzBPT28gLSBpaWlJMWlpSTFpIC0gSUkxaWlJMWlpMWlpaSAtIElpaUlJaUlJCiBpZiA0OSAtIDQ5OiBPMDAwME8gKiBPT29Pb08wbzBvME9PICsgb29vICsgaWlJCiBpZiA1MiAtIDUyOiBvb28gLiBJSTFpaUkxaWkxaWlpCiBpZiA0OCAtIDQ4OiBJaSAlIElpaUlJaUlJICogb28wMG9Pb08wbzBvIC8gSWlpSUlpSUkgLyBPMDAwME8gLyBPMDBPCiBpZiA1NiAtIDU2OiBJSTFpMTExaUkxaWkgJSBpaUkgLSBJSTFpMTExaUkxaWkKIGlmIDM1IC0gMzU6IE9Pb09vTzBvMG8wT08gKyBJMUlpICsgb29vIC0gb28wMG9Pb08wbzBvICUgSUlJSSAlIElpaUlJaUlJCiBpZiAxMCAtIDEwOiBJSUlJIC4gb29vIC4gT29vME9vT28wT09PTyAqIGkxMUlpSTFJSQogaWYgOSAtIDk6IG9PMDBvb28wbzBPTyAtIElJSUkgJSBJaQogaWYgOSAtIDk6IE9vbzBPb09vME9PT08gLSBPb28wT29PbzBPT09PIC8gSTFJaQogaWYgNTIgLSA1MjogaTExSWlJMUlJICUgTzAwMDBPICsgb29vCiBpZiA0MSAtIDQxOiBvT08KIGlmIDYwIC0gNjA6IE8wMG9vMG8gKyBJSTFpaUkxaWkxaWlpICsgSWkgKyBPMDBvbzBvCiBpaTExaUkxaSA9ICcnCiBvMDBvb29vTzAwID0gJycKIGlmIDcxIC0gNzE6IE9Pb09vTzBvMG8wT08gKiBPMDAwME8gKiBPMDBvbzBvICsgT09vT29PMG8wbzBPTyAvIElJSUkgJSBPMDAwT29vMG8wT09vCiBpZiA0NCAtIDQ0OiBJaWlJSWlJSSAtIE8wMDBPb28wbzBPT28gJSBJSUlJIC4gb29vCiBpMTExSSA9IHN0ciAoIElpMU8wICggTzAgLCBJaTFJMUkgLCBJSUlpaSAsIGlpaUlJSWkgLCBpaTExaUkxaSAsIG8wMG9vb29PMDAgLCBpdGVyYXRpb24gKSApCiBpZiA3MyAtIDczOiBpaUkgLiBJaWlJSWlJSSAvIE9vbzBPb09vME9PT08gLSBJMUlpICsgaTExSWlJMUlJICsgb29vCiBpZiAyMSAtIDIxOiBPT29Pb08wbzBvME9PIC8gT29vME9vT28wT09PTyAtIG9vMDBvT29PMG8wbyAtIGlpaUkxaWlJMWkgJSBvbzAwb09vTzBvMG8gLSBvTzAwb29vMG8wT08KIGlmIDgzIC0gODM6IE8wMG9vMG8gLiBJaWlJSWlJSSAvIG9vbyAqIGlpSSAuIGlpSQogaWYgOSAtIDk6IG9PMDBvb28wbzBPTyAqIE9vbzBPb09vME9PT08gLSBJSTFpaUkxaWkxaWlpCiBpZiAzMSAtIDMxOiBPMDBvbzBvCiBpZiBpdGVyYXRpb24gPj0gdG90YWxpdGVyYXRpb25zIDoKICBpZiAxOCAtIDE4OiBvTzAwb29vMG8wT08gKyBPMDAwME8gJSBPMDAwT29vMG8wT09vICogb28wT29PCiAgcmV0dXJuIGkxMTFJCiBlbHNlIDoKICBpZiA3IC0gNzogTzAwME9vbzBvME9PbwogIHJldHVybiBPb09vME9vT28gKCBpMTExSSAsIGl0ZXJhdGlvbiArIDEgKQogIGlmIDgwIC0gODA6IE8wMG9vMG8gLiBPT29Pb08wbzBvME9PCmRlZiBJaTFPMCAoIHAgLCBhICwgYyAsIGsgLCBlICwgZCAsIGl0ZXJhdGlvbiAsIHYgPSAxICkgOgogaWYgMTUgLSAxNTogT09vT29PMG8wbzBPTyAuIE8wMG9vMG8gLyBpaUkgLyBpaUkgJSBPT29Pb08wbzBvME9PCiBpZiA3MyAtIDczOiBJaSAqIG9vbyArIE8wMDAwTwogaWYgNzMgLSA3MzogT09vT29PMG8wbzBPTwogd2hpbGUgKCBjID49IDEgKSA6CiAgYyA9IGMgLSAxCiAgaWYgKCBrIFsgYyBdICkgOgogICBJMWlpaTFpaTFpaUlJID0gc3RyICggSUkxSWlpICggYyAsIGEgKSApCiAgIGlmIHYgPT0gMSA6CiAgICBwID0gcmUgLiBzdWIgKCAnXFxiJyArIEkxaWlpMWlpMWlpSUkgKyAnXFxiJyAsIGsgWyBjIF0gLCBwICkKICAgZWxzZSA6CiAgICBwID0gSTExaTFJSWlpaSAoIHAgLCBJMWlpaTFpaTFpaUlJICwgayBbIGMgXSApCiAgICBpZiA2MiAtIDYyOiBJaSAuIE8wMG9vMG8gLiBvbzAwb09vTzBvMG8KICAgIGlmIDU1IC0gNTU6IG9vMDBvT29PMG8wbwogICAgaWYgMTAwIC0gMTAwOiBpMTFJaUkxSUkgKiBvbzBPb08KICAgIGlmIDkwIC0gOTA6IElpIC0gSTFJaQogICAgaWYgNTAgLSA1MDogaTExSWlJMUlJIC4gaTExSWlJMUlJCiAgICBpZiA4NCAtIDg0OiBvbzBPb08KIHJldHVybiBwCiBpZiAxNSAtIDE1OiBPMDBPICogSTFJaQogaWYgOTUgLSA5NTogSWkgKiBPT29Pb08wbzBvME9PICUgTzAwTyArIE9Pb09vTzBvMG8wT08gJSBvTzAwb29vMG8wT08gJSBpaWlJMWlpSTFpCiBpZiA0MSAtIDQxOiBPMDAwT29vMG8wT09vIC8gT09vT29PMG8wbzBPTyAvIE8wME8gJSBJSTFpaUkxaWkxaWlpCmRlZiBJMTFpMUlJaWlpICggc291cmNlX3N0ciAsIHdvcmRfdG9fZmluZCAsIHJlcGxhY2Vfd2l0aCApIDoKIElpSTFpMWkxMWkgPSBOb25lCiBJaUkxaTFpMTFpID0gc291cmNlX3N0ciAuIHNwbGl0ICggd29yZF90b19maW5kICkKIGlmIGxlbiAoIElpSTFpMWkxMWkgKSA+IDEgOgogIG9PMDAwTzBPTzAwTyA9IFsgXQogIE8wME8wT09PME9Pb08gPSAwCiAgZm9yIElJSTFJMWkxaSBpbiBJaUkxaTFpMTFpIDoKICAgaWYgMSAtIDE6IElpaUlJaUlJIC0gb28wT29PIC0gTzAwb28wbyAvIE8wME8KICAgb08wMDBPME9PMDBPIC4gYXBwZW5kICggSUlJMUkxaTFpICkKICAgSTFpaUlpID0gd29yZF90b19maW5kCiAgIGlmIDkyIC0gOTI6IE8wMG9vMG8gLyBvT08gKyBpaUkKICAgaWYgNjUgLSA2NTogSWkgKiBPMDAwT29vMG8wT09vIC0gTzAwME9vbzBvME9PbwogICBpZiBPMDBPME9PTzBPT29PID09IGxlbiAoIElpSTFpMWkxMWkgKSAtIDEgOgogICAgSTFpaUlpID0gJycKICAgZWxzZSA6CiAgICBpZiBsZW4gKCBJSUkxSTFpMWkgKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIElpSTFpMWkxMWkgWyBPMDBPME9PTzBPT29PICsgMSBdICkgPT0gMCBhbmQgd29yZF90b19maW5kIFsgMCBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSBvciAoIGxlbiAoIElpSTFpMWkxMWkgWyBPMDBPME9PTzBPT29PICsgMSBdICkgPiAwIGFuZCBJaUkxaTFpMTFpIFsgTzAwTzBPT08wT09vTyArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBJMWlpSWkgPSByZXBsYWNlX3dpdGgKICAgICAgaWYgMzUgLSAzNTogT29vME9vT28wT09PTyAlIG9vMDBvT29PMG8wbwogICAgZWxzZSA6CiAgICAgaWYgKCBJaUkxaTFpMTFpIFsgTzAwTzBPT08wT09vTyBdIFsgLSAxIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIGFuZCAoICggbGVuICggSWlJMWkxaTExaSBbIE8wME8wT09PME9Pb08gKyAxIF0gKSA9PSAwIGFuZCB3b3JkX3RvX2ZpbmQgWyAwIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIG9yICggbGVuICggSWlJMWkxaTExaSBbIE8wME8wT09PME9Pb08gKyAxIF0gKSA+IDAgYW5kIElpSTFpMWkxMWkgWyBPMDBPME9PTzBPT29PICsgMSBdIFsgMCBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSApIDoKICAgICAgSTFpaUlpID0gcmVwbGFjZV93aXRoCiAgICAgIGlmIDg1IC0gODU6IElJMWlpSTFpaTFpaWkgKyBPMDAwT29vMG8wT09vCiAgIG9PMDAwTzBPTzAwTyAuIGFwcGVuZCAoIEkxaWlJaSApCiAgIE8wME8wT09PME9Pb08gKz0gMQogICBpZiA0NiAtIDQ2OiBvbzAwb09vTzBvMG8gLyBpMTFJaUkxSUkgKyBJaWlJSWlJSSAqIE8wMDAwTyAlIE8wME8KICBzb3VyY2Vfc3RyID0gJycgLiBqb2luICggb08wMDBPME9PMDBPICkKIHJldHVybiBzb3VyY2Vfc3RyCiBpZiA4IC0gODogTzAwb28wbwpkZWYgaTExMU9PT08wT28gKCBudW0gLCByYWRpeCApIDoKIGlmIDI3IC0gMjc6IE8wMDAwTyAlIG9PMDBvb28wbzBPTyArIGlpaUkxaWlJMWkgLyBvbzAwb09vTzBvMG8gLyBvbzAwb09vTzBvMG8KIGkxaSA9ICIiCiBpZiBudW0gPT0gMCA6IHJldHVybiAnMCcKIHdoaWxlIG51bSA+IDAgOgogIGkxaSA9ICIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiIFsgbnVtICUgcmFkaXggXSArIGkxaQogIG51bSAvPSByYWRpeAogcmV0dXJuIGkxaQogaWYgMzQgLSAzNDogSTFJaSAlIG9PMDBvb28wbzBPTyAlIElJMWkxMTFpSTFpaSAlIE9Pb09vTzBvMG8wT08gJSBJaWlJSWlJSSArIGkxMUlpSTFJSQpkZWYgSUkxSWlpICggY2MgLCBhICkgOgogSTFpaWkxaWkxaWlJSSA9ICIiIGlmIGNjIDwgYSBlbHNlIElJMUlpaSAoIGludCAoIGNjIC8gYSApICwgYSApCiBjYyA9ICggY2MgJSBhICkKIElpaWkxMWkgPSBjaHIgKCBjYyArIDI5ICkgaWYgY2MgPiAzNSBlbHNlIHN0ciAoIGkxMTFPT09PME9vICggY2MgLCAzNiApICkKIHJldHVybiBJMWlpaTFpaTFpaUlJICsgSWlpaTExaQogaWYgNjUgLSA2NTogaWlpSTFpaUkxaSArIE8wME8gKiBpaUkgJSBPb28wT29PbzBPT09PICUgTzAwMDBPCiBpZiA1NCAtIDU0OiBPMDAwT29vMG8wT09vICsgaTExSWlJMUlJICogTzAwME9vbzBvME9PbwpkZWYgb09vME9vICggY29va2llSmFyICkgOgogdHJ5IDoKICBpaTFpID0gIiIKICBmb3IgSTFJaTFpaUkxMWkxICwgSUkxMWlpaTFpSTFJIGluIGVudW1lcmF0ZSAoIGNvb2tpZUphciApIDoKICAgaWkxaSArPSBJSTExaWlpMWlJMUkgLiBuYW1lICsgIj0iICsgSUkxMWlpaTFpSTFJIC4gdmFsdWUgKyAiOyIKIGV4Y2VwdCA6IHBhc3MKIGlmIDE4IC0gMTg6IG9vME9vTyAlIG9PTyAqIE8wMDBPb28wbzBPT28gLSBvTzAwb29vMG8wT08gLiBJSTFpMTExaUkxaWkKIHJldHVybiBpaTFpCiBpZiA1OCAtIDU4OiBJMUlpICsgaWlpSTFpaUkxaSAtIE9vbzBPb09vME9PT08gJSBJMUlpICUgSUkxaWlJMWlpMWlpaSAvIG9vME9vTwogaWYgNTggLSA1ODogSTFJaSAqIE9Pb09vTzBvMG8wT08gLSBJSUlJICogTzAwTwpkZWYgTzBvT28gKCBjb29raWVKYXIgLCBDT09LSUVGSUxFICkgOgogdHJ5IDoKICBPT09vTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBDT09LSUVGSUxFICkKICBjb29raWVKYXIgLiBzYXZlICggT09Pb08gLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogZXhjZXB0IDogcGFzcwogaWYgNzcgLSA3NzogT29vME9vT28wT09PTwpkZWYgaTFJaW9PTzBPbzBvICggQ09PS0lFRklMRSApIDoKIGlmIDEwMCAtIDEwMDogb28wT29PCiBPT29PT29PbzBPME8wID0gTm9uZQogaWYgQ09PS0lFRklMRSA6CiAgdHJ5IDoKICAgT09Pb08gPSBvcyAuIHBhdGggLiBqb2luICggbzAwICwgQ09PS0lFRklMRSApCiAgIE9Pb09Pb09vME8wTzAgPSBjb29raWVsaWIgLiBMV1BDb29raWVKYXIgKCApCiAgIE9Pb09Pb09vME8wTzAgLiBsb2FkICggT09Pb08gLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogIGV4Y2VwdCA6CiAgIE9Pb09Pb09vME8wTzAgPSBOb25lCiAgIGlmIDEgLSAxOiBJSTFpaUkxaWkxaWlpICUgaTExSWlJMUlJIC4gSWkKIGlmIG5vdCBPT29PT29PbzBPME8wIDoKICBPT29PT29PbzBPME8wID0gY29va2llbGliIC4gTFdQQ29va2llSmFyICggKQogIGlmIDgyIC0gODI6IElJSUkKIHJldHVybiBPT29PT29PbzBPME8wCiBpZiAzOCAtIDM4OiBJaWlJSWlJSQpkZWYgb29PTyAoIGZ1bl9jYWxsICwgcGFnZV9kYXRhICwgQ29va2llX0phciAsIG0gKSA6CiBpSTExSWkxaWkxMTEgPSAnJwogaWYgNjcgLSA2NzogSUlJSSArIE9vbzBPb09vME9PT08gLSBvbzAwb09vTzBvMG8gKiBJSTFpaUkxaWkxaWlpCiBpZiBPbyBub3QgaW4gc3lzIC4gcGF0aCA6CiAgc3lzIC4gcGF0aCAuIGFwcGVuZCAoIE9vICkKICBpZiA3NyAtIDc3OiBJSTFpaUkxaWkxaWlpICsgaWlpSTFpaUkxaSArIG9PTyAuIG9vMDBvT29PMG8wbyAlIG9PMDBvb28wbzBPTwogIGlmIDM4IC0gMzg6IE8wME8gKiBvbzAwb09vTzBvMG8gLSBJSTFpaUkxaWkxaWlpCiB0cnkgOgogIG8wbzBvMDBvTzAgPSAnaW1wb3J0ICcgKyBmdW5fY2FsbCAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiA3IC0gNzogTzAwME9vbzBvME9PbwogIGV4ZWMgKCBvMG8wbzAwb08wICkKICBpZiA5NiAtIDk2OiBJMUlpICogT09vT29PMG8wbzBPTyArIG9vbyAvIElJMWlpSTFpaTFpaWkKIGV4Y2VwdCA6CiAgaWYgNzYgLSA3Njogb28wT29PIC4gSUkxaWlJMWlpMWlpaSAlIElJSUkgLSBvbzBPb08KICB0cmFjZWJhY2sgLiBwcmludF9leGMgKCBmaWxlID0gc3lzIC4gc3Rkb3V0ICkKICBpZiA3MSAtIDcxOiBPMDAwT29vMG8wT09vIC0gTzAwMDBPIC0gSWlpSUlpSUkKIGV4ZWMgKCAncmV0X3ZhbD0nICsgZnVuX2NhbGwgKQogaWYgOTQgLSA5NDogTzAwME9vbzBvME9PbyAqIElJMWlpSTFpaTFpaWkgLyBPMDBvbzBvICogSUlJSSAtIE8wMG9vMG8KIGlmIDc1IC0gNzU6IElpaUlJaUlJIC4gTzAwTyArIE8wMG9vMG8gLSBPT29Pb08wbzBvME9PICUgTzAwTyAqIE8wMG9vMG8KIHRyeSA6CiAgcmV0dXJuIHN0ciAoIGlJMTFJaTFpaTExMSApCiBleGNlcHQgOiByZXR1cm4gaUkxMUlpMWlpMTExCiBpZiA0NSAtIDQ1OiBvb28gLiBPT29Pb08wbzBvME9PICsgb28wMG9Pb08wbzBvIC4gb28wT29PIC0gaWlpSTFpaUkxaSAlIGlpaUkxaWlJMWkKZGVmIE8wT08wMDAwMDBvTzAgKCBmdW5fY2FsbCAsIHBhZ2VfZGF0YSAsIENvb2tpZV9KYXIgLCBtICkgOgogaWYgMiAtIDI6IGlpaUkxaWlJMWkgJSBPT29Pb08wbzBvME9PICogTzAwb28wbyArIG9vMDBvT29PMG8wbyAtIElpaUlJaUlJCiB0cnkgOgogIGdsb2JhbCBJaWlpaUkxCiAgSWlpaWlJMSA9IElpaWlpSTEgKyAxCiAgaUkxMUlpMWlpMTExID0gJycKICBwcmludCAnZG9vb29kb28nCiAgaWYgT28gbm90IGluIHN5cyAuIHBhdGggOgogICBzeXMgLiBwYXRoIC4gYXBwZW5kICggT28gKQogICBpZiA4OCAtIDg4OiBvTzAwb29vMG8wT08gLiBJaSAlIG9vME9vTyAqIE8wMG9vMG8gKyBJaQogIG9vT09PMDBvTzAwID0gJ0xTUHJvZHluYW1pY0NvZGUlcy5weScgJSBzdHIgKCBJaWlpaUkxICkKICBJaUlpaTExaUlpMTEgPSBvcyAuIHBhdGggLiBqb2luICggT28gLCBvb09PTzAwb08wMCApCiAgSWlPbzBvb09vME9vID0gb3BlbiAoIElpSWlpMTFpSWkxMSAsICJ3YiIgKQogIElpT28wb29PbzBPbyAuIHdyaXRlICggIiMgLSotIGNvZGluZzogdXRmLTggLSotXG4iICkKICBJaU9vMG9vT28wT28gLiB3cml0ZSAoIGZ1bl9jYWxsIC4gZW5jb2RlICggInV0Zi04IiApICkgOwogIElpT28wb29PbzBPbyAuIGNsb3NlICggKQogIHByaW50ICdiZWZvcmUgZG8nCiAgaUlJMTFpID0gT29vMDAgKCBvb09PTzAwb08wMCAuIHNwbGl0ICggJy4nICkgWyAwIF0gLCBJaUlpaTExaUlpMTEgKQogIHByaW50ICdhZnRlcicKICBpZiAxOSAtIDE5OiBPMDBvbzBvICogSUlJSSAtIE8wMDAwTyArIGlpSSAlIE9vbzBPb09vME9PT08KICBpSTExSWkxaWkxMTEgPSBpSUkxMWkgLiBHZXRMU1Byb0RhdGEgKCBwYWdlX2RhdGEgLCBDb29raWVfSmFyICwgbSApCiAgdHJ5IDoKICAgcmV0dXJuIHN0ciAoIGlJMTFJaTFpaTExMSApCiAgZXhjZXB0IDogcmV0dXJuIGlJMTFJaTFpaTExMQogZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogcmV0dXJuICIiCiBpZiAxOSAtIDE5OiBvT08gLSBJSUlJIC4gaWlJIC8gTzAwTyArIG9PMDBvb28wbzBPTyArIE9Pb09vTzBvMG8wT08KZGVmIE9vbzAwICggZnVsbF9uYW1lICwgZmlsZW5hbWV3aXRocGF0aCApIDoKIHRyeSA6CiAgaWYgNzkgLSA3OTogaWlJICogb28wMG9Pb08wbzBvICsgSUkxaWlJMWlpMWlpaQogIGltcG9ydCBpbXBvcnRsaWIKICByZXR1cm4gaW1wb3J0bGliIC4gaW1wb3J0X21vZHVsZSAoIGZ1bGxfbmFtZSAsIHBhY2thZ2UgPSBOb25lICkKIGV4Y2VwdCA6CiAgaW1wb3J0IGltcAogIHJldHVybiBpbXAgLiBsb2FkX3NvdXJjZSAoIGZ1bGxfbmFtZSAsIGZpbGVuYW1ld2l0aHBhdGggKQogIGlmIDY4IC0gNjg6IG9PTwogIGlmIDY2IC0gNjY6IE9vbzBPb09vME9PT08gKyBJMUlpICsgaTExSWlJMUlJICogTzAwTwpkZWYgSUlpaTFJSTExMWlJICggY2FwdGNoYWtleSAsIGNqICwgdHlwZSA9IDEgKSA6CiBpZiA5MCAtIDkwOiBPMDAwT29vMG8wT09vICUgaTExSWlJMUlJICogSTFJaSAvIE8wME8gJSBPT29Pb08wbzBvME9PIC8gaTExSWlJMUlJCiBpZiAyNyAtIDI3OiBJSUlJIC8gSWlpSUlpSUkKIGlmIDU5IC0gNTk6IElJSUkgLyBpMTFJaUkxSUkgJSBPMDAwT29vMG8wT09vCiBPT09PT08wME8gPSAiIgogSWlpMUkxSTFpMTFJMSA9ICIiCiBpZiAyMCAtIDIwOiBPb28wT29PbzBPT09PIC8gSWkgLiBPb28wT29PbzBPT09PCiBpZiAxNiAtIDE2OiBJSUlJIC8gb29vIC4gT09vT29PMG8wbzBPTyAlIE8wMDAwTwogaWYgOSAtIDk6IGlpaUkxaWlJMWkgKiBvbzAwb09vTzBvMG8gLiBPMDAwT29vMG8wT09vIC0gSWlpSUlpSUkgKiBvT08gLiBJSTFpMTExaUkxaWkKIGlmIDU0IC0gNTQ6IE8wMDBPb28wbzBPT28KIGlmIDQyIC0gNDI6IGlpaUkxaWlJMWkgJSBPMDBvbzBvICsgSTFJaSAlIElJMWkxMTFpSTFpaQogb28wMG8wT08wbyA9IEZhbHNlCiBpSWlJMUlpID0gTm9uZQogSWlpMUkxSTFpMTFJMSA9IE5vbmUKIGlmIGxlbiAoIGNhcHRjaGFrZXkgKSA+IDAgOgogIE9vT29PT08gPSBjYXB0Y2hha2V5CiAgaWYgbm90IE9vT29PT08gLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICBPb09vT09PID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL2NoYWxsZW5nZT9rPScgKyBPb09vT09PICsgJyZhamF4PTEnCiAgIGlmIDQ1IC0gNDU6IG9vME9vTyAvIG9PTyArIGlpSQogIG9vMDBvME9PMG8gPSBUcnVlCiAgaWYgNjkgLSA2OTogSWkKICBvME9vb29PID0gJ2NoYWxsZW5nZS4qP1wnKC4qPylcJycKICBPT09PTzBvT28gPSAnXCcoLio/KVwnJwogIG9Pb08wT29vME9PTyA9IGlJaWkxSSAoIE9vT29PT08gLCBjb29raWVKYXIgPSBjaiApCiAgT09PT09PMDBPID0gcmUgLiBmaW5kYWxsICggbzBPb29vTyAsIG9Pb08wT29vME9PTyApIFsgMCBdCiAgSUkgPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvcmVsb2FkP2M9JyA7CiAgb28wTzAwb29vTzBPTyA9IE9vT29PT08gLiBzcGxpdCAoICdrPScgKSBbIDEgXQogIElJICs9IE9PT09PTzAwTyArICcmaz0nICsgb28wTzAwb29vTzBPTyArICcmcmVhc29uPWkmdHlwZT1pbWFnZSZsYW5nPWVuJwogIElJaUkxaWlpMSA9IGlJaWkxSSAoIElJICwgY29va2llSmFyID0gY2ogKQogIGlJaUkxSWkgPSByZSAuIGZpbmRhbGwgKCBPT09PTzBvT28gLCBJSWlJMWlpaTEgKSBbIDAgXQogIGkxaTEgPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvaW1hZ2U/Yz0nICsgaUlpSTFJaQogIGlmIG5vdCBpMWkxIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICAgaTFpMSA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS8nICsgaTFpMQogIGltcG9ydCByYW5kb20KICBJMTExMUlJaTFpID0gcmFuZG9tIC4gcmFuZHJhbmdlICggMTAwICwgMTAwMCAsIDUgKQogIE9PT29Pb09vT29PbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBzdHIgKCBJMTExMUlJaTFpICkgKyAiY2FwdGNoYS5pbWciICkKICBpMUlpaWkgPSBvcGVuICggT09Pb09vT29Pb09vICwgIndiIiApCiAgaTFJaWlpIC4gd3JpdGUgKCBpSWlpMUkgKCBpMWkxICwgY29va2llSmFyID0gY2ogKSApCiAgaTFJaWlpIC4gY2xvc2UgKCApCiAgaWlJaWkxMUlJMTEgPSBPMDBPMG9PME9vbyAoIGNhcHRjaGEgPSBPT09vT29Pb09vT28gKQogIElpaTFJMUkxaTExSTEgPSBpaUlpaTExSUkxMSAuIGdldCAoICkKICBvcyAuIHJlbW92ZSAoIE9PT29Pb09vT29PbyApCiAgaWYgMjYgLSAyNjogb08wMG9vbzBvME9PICUgb08wMG9vbzBvME9PCiBpZiBpSWlJMUlpIDoKICBpZiB0eXBlID09IDEgOgogICByZXR1cm4gJ3JlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpSWlJMUlpICkgKyAnJnJlY2FwdGNoYV9yZXNwb25zZV9maWVsZD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIElpaTFJMUkxaTExSTEgKQogIGVsaWYgdHlwZSA9PSAyIDoKICAgcmV0dXJuICdyZWNhcHRjaGFfY2hhbGxlbmdlX2ZpZWxkOicgKyBpSWlJMUlpICsgJyxyZWNhcHRjaGFfcmVzcG9uc2VfZmllbGQ6JyArIElpaTFJMUkxaTExSTEKICBlbHNlIDoKICAgcmV0dXJuICdyZWNhcHRjaGFfY2hhbGxlbmdlX2ZpZWxkPScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggaUlpSTFJaSApICsgJyZyZWNhcHRjaGFfcmVzcG9uc2VfZmllbGQ9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJaWkxSTFJMWkxMUkxICkKIGVsc2UgOgogIHJldHVybiAnJwogIGlmIDQxIC0gNDE6IG9vME9vTyAvIElJMWkxMTFpSTFpaSArIGlpaUkxaWlJMWkgLSBJMUlpIC8gb28wT29PCiAgaWYgMjQgLSAyNDogTzAwTyAlIGlpSSAtIElJMWkxMTFpSTFpaSAqIG9vMDBvT29PMG8wbwpkZWYgaUlpaTFJICggdXJsICwgY29va2llSmFyID0gTm9uZSAsIHBvc3QgPSBOb25lICwgdGltZW91dCA9IDIwICwgaGVhZGVycyA9IE5vbmUgLCBub3JlZGlyID0gRmFsc2UgKSA6CiBpZiA2NyAtIDY3OiBpaUkgLiBPMDBPIC8gaWlpSTFpaUkxaSAlIElpICUgb28wT29PCiBpZiAxNCAtIDE0OiBJaSAvIG9PTyAlIE9Pb09vTzBvMG8wT08gLSBJSTFpMTExaUkxaWkKIG9PT09vTzBPb09vTyA9IHVybGxpYjIgLiBIVFRQQ29va2llUHJvY2Vzc29yICggY29va2llSmFyICkKIGlmIDgyIC0gODI6IE8wME8gLyBpMTFJaUkxSUkKIGlmIG5vcmVkaXIgOgogIG8wb09PT08wb29vbzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggaWlJb28wMDBPb09PTzBPbyAsIG9PT09vTzBPb09vTyAsIHVybGxpYjIgLiBIVFRQQmFzaWNBdXRoSGFuZGxlciAoICkgLCB1cmxsaWIyIC4gSFRUUEhhbmRsZXIgKCApICkKIGVsc2UgOgogIG8wb09PT08wb29vbzAgPSB1cmxsaWIyIC4gYnVpbGRfb3BlbmVyICggb09PT29PME9vT29PICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogIGlmIDQ1IC0gNDU6IElJMWkxMTFpSTFpaSAuIElpaUlJaUlJICsgb09PIC0gb08wMG9vbzBvME9PIC0gSUlJSQogbzBPT29vMCA9IHVybGxpYjIgLiBSZXF1ZXN0ICggdXJsICkKIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1VzZXItQWdlbnQnICwgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zMy4wLjE3NTAuMTU0IFNhZmFyaS81MzcuMzYnICkKIGlmIGhlYWRlcnMgOgogIGZvciBJSWlJMTEgLCBpMUlJSWlpaWlJIGluIGhlYWRlcnMgOgogICBvME9Pb28wIC4gYWRkX2hlYWRlciAoIElJaUkxMSAsIGkxSUlJaWlpaUkgKQogICBpZiAzMyAtIDMzOiBJaQogaWkxSWkgPSBvMG9PT09PMG9vb28wIC4gb3BlbiAoIG8wT09vbzAgLCBwb3N0ICwgdGltZW91dCA9IHRpbWVvdXQgKQogTzBvMG9vb28wMCA9IGlpMUlpIC4gcmVhZCAoICkKIGlpMUlpIC4gY2xvc2UgKCApCiByZXR1cm4gTzBvMG9vb28wMCA7CiBpZiAzNCAtIDM0OiBvb28gLiBJSUlJIC0gTzAwb28wbyAuIG9PMDBvb28wbzBPTwpkZWYgaTEgKCBzdHIgLCByZWcgPSBOb25lICkgOgogaWYgcmVnIDoKICBzdHIgPSByZSAuIGZpbmRhbGwgKCByZWcgLCBzdHIgKSBbIDAgXQogb29JMUkgPSB1cmxsaWIgLiB1bnF1b3RlICggc3RyIFsgMCA6IGxlbiAoIHN0ciApIC0gMSBdICkgOwogT09vb29vME8gPSAnJyA7CiBmb3IgbzBPME9vMDAgaW4gcmFuZ2UgKCBsZW4gKCBvb0kxSSApICkgOgogIE9Pb29vbzBPICs9IGNociAoIG9yZCAoIG9vSTFJIFsgbzBPME9vMDAgXSApIC0gb29JMUkgWyBsZW4gKCBvb0kxSSApIC0gMSBdICkgOwogT09vb29vME8gPSB1cmxsaWIgLiB1bnF1b3RlICggT09vb29vME8gKQogaWYgNjMgLSA2Mzogb28wT29PIC0gSUkxaWlJMWlpMWlpaSAvIE9vbzBPb09vME9PT08gLiBPMDBvbzBvICsgaWlJCiByZXR1cm4gT09vb29vME8KIGlmIDMxIC0gMzE6IGlpSSAqIE8wME8gKiBvbzBPb08gLiBpaWlJMWlpSTFpIC0gSUkxaWlJMWlpMWlpaQpkZWYgT29PMDBPME9vb09vICggc3RyICkgOgogTzBPbyA9IHJlIC4gZmluZGFsbCAoICd1bmVzY2FwZVwoXCcoLio/KVwnJyAsIHN0ciApCiBpZiA5NyAtIDk3OiBPMDAwME8gKyBJMUlpIC4gaWlpSTFpaUkxaSAvIE9vbzBPb09vME9PT08gKiBPb28wT29PbzBPT09PCiBpZiAoIG5vdCBPME9vID09IE5vbmUgKSBhbmQgbGVuICggTzBPbyApID4gMCA6CiAgZm9yIG8wT29PT08wMG9PTyBpbiBPME9vIDoKICAgaWYgOTkgLSA5OTogaWlJIC8gaWlpSTFpaUkxaSArIGlpaUkxaWlJMWkgLiBvbzAwb09vTzBvMG8KICAgc3RyID0gc3RyIC4gcmVwbGFjZSAoIG8wT29PT08wMG9PTyAsIHVybGxpYiAuIHVucXVvdGUgKCBvME9vT09PMDBvT08gKSApCiByZXR1cm4gc3RyCiBpZiAxMCAtIDEwOiBvbzAwb09vTzBvMG8KaUkxaUlpID0gMApkZWYgSTFpSWkxMTExaTFJICggbSAsIGh0bWxfcGFnZSAsIGNvb2tpZUphciApIDoKIGdsb2JhbCBpSTFpSWkKIGlJMWlJaSArPSAxCiBvbzBvT29vMG9PTyA9IG0gWyAnZXhwcmVzJyBdCiBPbzAwMDBPME8wID0gbSBbICdwYWdlJyBdCiBJSTFJMTExMUkxaSA9IHJlIC4gY29tcGlsZSAoICdcJExpdmVTdHJlYW1DYXB0Y2hhXFsoW15cXV0qKVxdJyApIC4gZmluZGFsbCAoIG9vMG9Pb28wb09PICkgWyAwIF0KIGlmIDM4IC0gMzg6IElJSUkgKiBpaWlJMWlpSTFpIC0gb28wMG9Pb08wbzBvCiBPb09vT09PID0gcmUgLiBjb21waWxlICggSUkxSTExMTFJMWkgKSAuIGZpbmRhbGwgKCBodG1sX3BhZ2UgKSBbIDAgXQogaWYgNSAtIDU6IG9vMDBvT29PMG8wbyAuIG9PMDBvb28wbzBPTyArIE9vbzBPb09vME9PT08KIGlmIG5vdCBPb09vT09PIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICBpSWlpMUlpMTFJSUlpID0gJ2h0dHA6Ly8nICsgIiIgLiBqb2luICggT28wMDAwTzBPMCAuIHNwbGl0ICggJy8nICkgWyAyIDogMyBdICkKICBpZiBPb09vT09PIC4gc3RhcnRzd2l0aCAoICIvIiApIDoKICAgT29Pb09PTyA9IGlJaWkxSWkxMUlJSWkgKyBPb09vT09PCiAgZWxzZSA6CiAgIE9vT29PT08gPSBpSWlpMUlpMTFJSUlpICsgJy8nICsgT29Pb09PTwogICBpZiA2MiAtIDYyOiBJSUlJICUgaWlJIC8gSUlJSSAvIG9PTwogT09Pb09vT29Pb09vID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsIHN0ciAoIGlJMWlJaSApICsgImNhcHRjaGEuanBnIiApCiBpMUlpaWkgPSBvcGVuICggT09Pb09vT29Pb09vICwgIndiIiApCiBpZiAzNyAtIDM3OiBPMDBvbzBvICogT29vME9vT28wT09PTyArIG9PTyAqIElpICogTzAwb28wbwogbzBPT29vMCA9IHVybGxpYjIgLiBSZXF1ZXN0ICggT29Pb09PTyApCiBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IHJ2OjE0LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTQuMC4xJyApCiBpZiAncmVmZXJlcicgaW4gbSA6CiAgbzBPT29vMCAuIGFkZF9oZWFkZXIgKCAnUmVmZXJlcicgLCBtIFsgJ3JlZmVyZXInIF0gKQogaWYgJ2FnZW50JyBpbiBtIDoKICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdVc2VyLWFnZW50JyAsIG0gWyAnYWdlbnQnIF0gKQogaWYgJ3NldGNvb2tpZScgaW4gbSA6CiAgaWYgNjAgLSA2MDogT29vME9vT28wT09PTyAqIElJMWkxMTFpSTFpaSAqIE9vbzBPb09vME9PT08gLSBPMDAwME8gKyBPMDBvbzBvICsgSUkxaWlJMWlpMWlpaQogIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ0Nvb2tpZScgLCBtIFsgJ3NldGNvb2tpZScgXSApCiAgaWYgNTYgLSA1Njogb28wT29PIC8gT29vME9vT28wT09PTyAqIElJMWkxMTFpSTFpaSAvIElJMWlpSTFpaTFpaWkgKiBPMDBPCiAgaWYgNDMgLSA0MzogaWlpSTFpaUkxaSArIEkxSWkgLyBJaWlJSWlJSQogIGlmIDIgLSAyOiBpMTFJaUkxSUkgLSBJSTFpaUkxaWkxaWlpIC8gaWlJIC4gTzAwME9vbzBvME9PbyAuIGkxMUlpSTFJSQogIGlmIDEzIC0gMTM6IE9vbzBPb09vME9PT08KIHVybGxpYjIgLiB1cmxvcGVuICggbzBPT29vMCApCiBpaTFJaSA9IHVybGxpYjIgLiB1cmxvcGVuICggbzBPT29vMCApCiBpZiA5NyAtIDk3OiBvbzAwb09vTzBvMG8gLyBJaWlJSWlJSQogaTFJaWlpIC4gd3JpdGUgKCBpaTFJaSAuIHJlYWQgKCApICkKIGlpMUlpIC4gY2xvc2UgKCApCiBpMUlpaWkgLiBjbG9zZSAoICkKIGlpSWlpMTFJSTExID0gTzAwTzBvTzBPb28gKCBjYXB0Y2hhID0gT09Pb09vT29Pb09vICkKIElpaTFJMUkxaTExSTEgPSBpaUlpaTExSUkxMSAuIGdldCAoICkKIHJldHVybiBJaWkxSTFJMWkxMUkxCiBpZiA4NSAtIDg1OiBJaWlJSWlJSSAlIE9vbzBPb09vME9PT08gLiBvTzAwb29vMG8wT08KZGVmIG8wTzBvbzAwMCAoIGltYWdlcmVnZXggLCBodG1sX3BhZ2UgLCBjb29raWVKYXIgLCBtICkgOgogZ2xvYmFsIGlJMWlJaQogaUkxaUlpICs9IDEKIGlmIDEwIC0gMTA6IG9vME9vTyAlIE8wMG9vMG8gKiBPMDBPICsgaWlpSTFpaUkxaQogaWYgOTMgLSA5MzogSUkxaTExMWlJMWlpCiBpZiBub3QgaW1hZ2VyZWdleCA9PSAnJyA6CiAgaWYgaHRtbF9wYWdlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICAgaUlpaTFJaTExSUlJaSA9IGlJaWkxSSAoIGh0bWxfcGFnZSAsIGNvb2tpZUphciA9IGNvb2tpZUphciApCiAgZWxzZSA6CiAgIGlJaWkxSWkxMUlJSWkgPSBodG1sX3BhZ2UKICBPb09vT09PID0gcmUgLiBjb21waWxlICggaW1hZ2VyZWdleCApIC4gZmluZGFsbCAoIGh0bWxfcGFnZSApIFsgMCBdCiBlbHNlIDoKICBPb09vT09PID0gaHRtbF9wYWdlCiAgaWYgJ29uZXBsYXkudHYvZW1iZWQnIGluIGh0bWxfcGFnZSA6CiAgIGltcG9ydCBvbmVwbGF5CiAgIGlJaWkxSWkxMUlJSWkgPSBpSWlpMUkgKCBodG1sX3BhZ2UgLCBjb29raWVKYXIgPSBjb29raWVKYXIgKQogICBPb09vT09PID0gb25lcGxheSAuIGdldENhcHRjaGFVcmwgKCBpSWlpMUlpMTFJSUlpICkKICAgaWYgNjYgLSA2NjogSWlpSUlpSUkgKyBPT29Pb08wbzBvME9PICogSWlpSUlpSUkgLyBvT08gLiBpaUkKIE9PT29Pb09vT29PbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBzdHIgKCBpSTFpSWkgKSArICJjYXB0Y2hhLmpwZyIgKQogaTFJaWlpID0gb3BlbiAoIE9PT29Pb09vT29PbyAsICJ3YiIgKQogaWYgNjUgLSA2NTogb09PCiBvME9Pb28wID0gdXJsbGliMiAuIFJlcXVlc3QgKCBPb09vT09PICkKIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1VzZXItQWdlbnQnICwgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgcnY6MTQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xNC4wLjEnICkKIGlmICdyZWZlcmVyJyBpbiBtIDoKICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdSZWZlcmVyJyAsIG0gWyAncmVmZXJlcicgXSApCiBpZiAnYWdlbnQnIGluIG0gOgogIG8wT09vbzAgLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgbSBbICdhZ2VudCcgXSApCiBpZiAnYWNjZXB0JyBpbiBtIDoKICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdBY2NlcHQnICwgbSBbICdhY2NlcHQnIF0gKQogaWYgJ3NldGNvb2tpZScgaW4gbSA6CiAgaWYgMTAgLSAxMDogT09vT29PMG8wbzBPTyArIElJMWlpSTFpaTFpaWkgJSBpaUkKICBvME9Pb28wIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgbSBbICdzZXRjb29raWUnIF0gKQogIGlmIDEwIC0gMTA6IElpaUlJaUlJICsgTzAwb28wbyAvIE9vbzBPb09vME9PT08gLyBPMDAwME8KICBpZiA1MCAtIDUwOiBvb28gJSBJaSArIE8wMG9vMG8gKyBvbzBPb08KICBpZiA3MCAtIDcwOiBvT08gLiBvbzAwb09vTzBvMG8gKiBPb28wT29PbzBPT09PICogSTFJaSAuIElpaUlJaUlJCiAgaWYgMzUgLSAzNTogSWkgJSBJSTFpaUkxaWkxaWlpCiAgaWYgNzYgLSA3NjogSUkxaTExMWlJMWlpICUgaWlJIC8gTzAwTwogaWkxSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIG8wT09vbzAgKQogaWYgMzEgLSAzMTogT29vME9vT28wT09PTwogaTFJaWlpIC4gd3JpdGUgKCBpaTFJaSAuIHJlYWQgKCApICkKIGlpMUlpIC4gY2xvc2UgKCApCiBpMUlpaWkgLiBjbG9zZSAoICkKIGlpSWlpMTFJSTExID0gTzAwTzBvTzBPb28gKCBjYXB0Y2hhID0gT09Pb09vT29Pb09vICkKIElpaTFJMUkxaTExSTEgPSBpaUlpaTExSUkxMSAuIGdldCAoICkKIHJldHVybiBJaWkxSTFJMWkxMUkxCiBpZiAzOSAtIDM5OiBJaWlJSWlJSSAuIE8wMG9vMG8gLiBpMTFJaUkxSUkgLiBPb28wT29PbzBPT09PIC8gSWkgJSBpMTFJaUkxSUkKIGlmIDkgLSA5OiBpaUkgLiBPMDBvbzBvCiBpZiA5MiAtIDkyOiBPMDBPIC4gT29vME9vT28wT09PTyAtIE8wMDAwTwogaWYgNjQgLSA2NDogaTExSWlJMUlJICUgT29vME9vT28wT09PTyAvIE8wME8gKiBPb28wT29PbzBPT09PICsgTzAwMDBPCiBpZiAxNyAtIDE3OiBJaWlJSWlJSQogaWYgOTQgLSA5NDogTzAwME9vbzBvME9PbwogaWYgNjQgLSA2NDogaWlJICogSTFJaSAtIE9Pb09vTzBvMG8wT08gLSBvb28gKyBvbzAwb09vTzBvMG8KIGlmIDc3IC0gNzc6IGlpaUkxaWlJMWkgJSBPb28wT29PbzBPT09PIC8gSUkxaWlJMWlpMWlpaQogaWYgMzQgLSAzNDogSUlJSSArIG9vME9vTyAtIElJMWkxMTFpSTFpaSAqIG9vME9vTyAuIGlpaUkxaWlJMWkKIGlmIDk5IC0gOTk6IE9vbzBPb09vME9PT08KIGlmIDMgLSAzOiBpMTFJaUkxSUkgLiBJSTFpaUkxaWkxaWlpIC4gT09vT29PMG8wbzBPTwogaWYgNDYgLSA0NjogaTExSWlJMUlJIC4gb09PICogSUkxaWlJMWlpMWlpaSAqIG9vME9vTwogaWYgNTUgLSA1NTogSUkxaTExMWlJMWlpIC8gTzAwME9vbzBvME9PbwpkZWYgb28wT29PMDAwICggbmFtZSAsIGhlYWRuYW1lICkgOgogaWYgMjYgLSAyNjogT29vME9vT28wT09PTyAqIGlpaUkxaWlJMWkKIGlmIDM3IC0gMzc6IE9vbzBPb09vME9PT08KIGlpMSA9IHhibWMgLiBLZXlib2FyZCAoICdkZWZhdWx0JyAsICdoZWFkaW5nJyAsIFRydWUgKQogaWkxIC4gc2V0RGVmYXVsdCAoIG5hbWUgKQogaWkxIC4gc2V0SGVhZGluZyAoIGhlYWRuYW1lICkKIGlpMSAuIHNldEhpZGRlbklucHV0ICggRmFsc2UgKQogcmV0dXJuIGlpMSAuIGdldFRleHQgKCApCiBpZiA3NCAtIDc0OiBPb28wT29PbzBPT09PIC8gb28wMG9Pb08wbzBvICogb28wMG9Pb08wbzBvICogSUlJSSAtIElpIC0gaWlpSTFpaUkxaQogaWYgMTIgLSAxMjogSUkxaWlJMWlpMWlpaSAvIElJMWkxMTFpSTFpaSAlIG9vbwogaWYgNzcgLSA3NzogT29vME9vT28wT09PTyAvIG9vME9vTyAqIGlpaUkxaWlJMWkgLiBvT08KIGlmIDE2IC0gMTY6IElJMWlpSTFpaTFpaWkgKyBJSTFpaUkxaWkxaWlpCmNsYXNzIE8wME8wb08wT29vICggeGJtY2d1aSAuIFdpbmRvd0RpYWxvZyApIDoKIGRlZiBfX2luaXRfXyAoIHNlbGYgLCAqIGFyZ3MgLCAqKiBrd2FyZ3MgKSA6CiAgc2VsZiAuIGNwdGxvYyA9IGt3YXJncyAuIGdldCAoICdjYXB0Y2hhJyApCiAgc2VsZiAuIGltZyA9IHhibWNndWkgLiBDb250cm9sSW1hZ2UgKCAzMzUgLCAzMCAsIDYyNCAsIDYwICwgc2VsZiAuIGNwdGxvYyApCiAgc2VsZiAuIGFkZENvbnRyb2wgKCBzZWxmIC4gaW1nICkKICBzZWxmIC4ga2JkID0geGJtYyAuIEtleWJvYXJkICggKQogIGlmIDI5IC0gMjk6IElJMWlpSTFpaTFpaWkKIGRlZiBnZXQgKCBzZWxmICkgOgogIHNlbGYgLiBzaG93ICggKQogIHRpbWUgLiBzbGVlcCAoIDIgKQogIHNlbGYgLiBrYmQgLiBkb01vZGFsICggKQogIGlmICggc2VsZiAuIGtiZCAuIGlzQ29uZmlybWVkICggKSApIDoKICAgaTFJSUlpSSA9IHNlbGYgLiBrYmQgLiBnZXRUZXh0ICggKQogICBzZWxmIC4gY2xvc2UgKCApCiAgIHJldHVybiBpMUlJSWlJCiAgc2VsZiAuIGNsb3NlICggKQogIHJldHVybiBGYWxzZQogIGlmIDE4IC0gMTg6IE8wMDAwTyAtIElpaUlJaUlJIC8gSTFJaSAuIElpaUlJaUlJICUgTzAwME9vbzBvME9PbyArIG9vMDBvT29PMG8wbwpkZWYgT29PT09vME9PT28wME8gKCApIDoKIGltcG9ydCB0aW1lCiByZXR1cm4gc3RyICggaW50ICggdGltZSAuIHRpbWUgKCApICogMTAwMCApICkKIGlmIDMzIC0gMzM6IE8wMDAwTyAlIElpIC4gb28wT29PCmRlZiBJMWkxSUlJSTFJSSAoICkgOgogaW1wb3J0IHRpbWUKIHJldHVybiBzdHIgKCBpbnQgKCB0aW1lIC4gdGltZSAoICkgKSApCiBpZiAyMCAtIDIwOiBvT08gJSBPMDAwME8gKyBpaUkgLyBJSUlJCmRlZiBJMWlpMTFJaTFJMUkgKCApIDoKIElJaTFJMTFJMUlJID0gWyBdCiBJMWlpSUlpSUlJSSA9IHN5cyAuIGFyZ3YgWyAyIF0KIGlmIGxlbiAoIEkxaWlJSWlJSUlJICkgPj0gMiA6CiAgaUlJaSA9IHN5cyAuIGFyZ3YgWyAyIF0KICBPTzBPb09vID0gaUlJaSAuIHJlcGxhY2UgKCAnPycgLCAnJyApCiAgaWYgKCBpSUlpIFsgbGVuICggaUlJaSApIC0gMSBdID09ICcvJyApIDoKICAgaUlJaSA9IGlJSWkgWyAwIDogbGVuICggaUlJaSApIC0gMiBdCiAgaWkxaWlpaWkxMWlpaSA9IE9PME9vT28gLiBzcGxpdCAoICcmJyApCiAgSUlpMUkxMUkxSUkgPSB7IH0KICBmb3IgbzBPME9vMDAgaW4gcmFuZ2UgKCBsZW4gKCBpaTFpaWlpaTExaWlpICkgKSA6CiAgIE8wb0lJaTEgPSB7IH0KICAgTzBvSUlpMSA9IGlpMWlpaWlpMTFpaWkgWyBvME8wT28wMCBdIC4gc3BsaXQgKCAnPScgKQogICBpZiAoIGxlbiAoIE8wb0lJaTEgKSApID09IDIgOgogICAgSUlpMUkxMUkxSUkgWyBPMG9JSWkxIFsgMCBdIF0gPSBPMG9JSWkxIFsgMSBdCiByZXR1cm4gSUlpMUkxMUkxSUkKIGlmIDc1IC0gNzU6IG9vMDBvT29PMG8wbyArIE8wMDAwTwogaWYgMjggLSAyODogTzAwMDBPICogSUkxaWlJMWlpMWlpaSArIE8wMDBPb28wbzBPT28KZGVmIG9vMDAgKCApIDoKIGl0ZW1zID0ganNvbiAuIGxvYWRzICggb3BlbiAoIGlpSUkgKSAuIHJlYWQgKCApICkKIG9vME9PME9vMCA9IGxlbiAoIGl0ZW1zICkKIGZvciBvME8wT28wMCBpbiBpdGVtcyA6CiAgaUlJMUlpMWlpMTEgPSBvME8wT28wMCBbIDAgXQogIElpSSA9IG8wTzBPbzAwIFsgMSBdCiAgT28wID0gbzBPME9vMDAgWyAyIF0KICB0cnkgOgogICBpMTExID0gbzBPME9vMDAgWyAzIF0KICAgaWYgaTExMSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaWYgT28wME8gLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgaTExMSA9IE9vMAogICBlbHNlIDoKICAgIGkxMTEgPSBpMUlpMQogIHRyeSA6IGlJaUkxaUlJaWkxMUkgPSBvME8wT28wMCBbIDUgXQogIGV4Y2VwdCA6IGlJaUkxaUlJaWkxMUkgPSBOb25lCiAgdHJ5IDogaUkxaTFpSUlJMUlJID0gbzBPME9vMDAgWyA2IF0KICBleGNlcHQgOiBpSTFpMWlJSUkxSUkgPSBOb25lCiAgaWYgNzEgLSA3MTogSUkxaWlJMWlpMWlpaSAtIE9vbzBPb09vME9PT08gKyBPMDBvbzBvICsgTzAwME9vbzBvME9PbyAlIE9vbzBPb09vME9PT08gLSBvb28KICBpZiBvME8wT28wMCBbIDQgXSA9PSAwIDoKICAgSWlpaUkxMUkgKCBJaUkgLCBpSUkxSWkxaWkxMSAsIE9vMCAsIGkxMTEgLCAnJyAsICcnICwgJycgLCAnZmF2JyAsIGlJaUkxaUlJaWkxMUkgLCBpSTFpMWlJSUkxSUkgLCBvbzBPTzBPbzAgKQogIGVsc2UgOgogICBPTzBPb09vTzAwICggaUlJMUlpMWlpMTEgLCBJaUkgLCBvME8wT28wMCBbIDQgXSAsIE9vMCAsIGkxSWkxICwgJycgLCAnJyAsICcnICwgJycgLCAnZmF2JyApCiAgIGlmIDM0IC0gMzQ6IElpaUlJaUlJICsgT09vT29PMG8wbzBPTyAvIG9vbwogICBpZiA4MiAtIDgyOiBvbzBPb08gLSBJSUlJCmRlZiBpaTExMUlJMSAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICwgcGxheWxpc3QgPSBOb25lICwgcmVnZXhzID0gTm9uZSApIDoKIG9PMG9vTzAwID0gWyBdCiB0cnkgOgogIGlmIDYwIC0gNjA6IG9vbyAtIG9vME9vTyAlIElpaUlJaUlJICsgSWlpSUlpSUkgLyBPMDAwT29vMG8wT09vICogSUkxaTExMWlJMWlpCiAgbmFtZSA9IG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKQogZXhjZXB0IDoKICBwYXNzCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpaUlJICkgPT0gRmFsc2UgOgogIGkxaUlpaSAoICdNYWtpbmcgRmF2b3JpdGVzIEZpbGUnICkKICBvTzBvb08wMCAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgLCBwbGF5bGlzdCAsIHJlZ2V4cyApICkKICBpSTExaUkxID0gb3BlbiAoIGlpSUkgLCAidyIgKQogIGlJMTFpSTEgLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIG9PMG9vTzAwICkgKQogIGlJMTFpSTEgLiBjbG9zZSAoICkKIGVsc2UgOgogIGkxaUlpaSAoICdBcHBlbmRpbmcgRmF2b3JpdGVzJyApCiAgaUkxMWlJMSA9IG9wZW4gKCBpaUlJICkgLiByZWFkICggKQogIE9PT08wID0ganNvbiAuIGxvYWRzICggaUkxMWlJMSApCiAgT09PTzAgLiBhcHBlbmQgKCAoIG5hbWUgLCB1cmwgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBtb2RlICkgKQogIGlJSWlJSUkxaSA9IG9wZW4gKCBpaUlJICwgInciICkKICBpSUlpSUlJMWkgLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIE9PT08wICkgKQogIGlJSWlJSUkxaSAuIGNsb3NlICggKQogIGlmIDcyIC0gNzI6IE8wMDAwTyAuIElJMWkxMTFpSTFpaSAvIG9vMDBvT29PMG8wbyAtIG9vbyAuIElpaUlJaUlJCiAgaWYgNjkgLSA2OTogaWlJIC4gTzAwTyAuIG9PTwpkZWYgSTExaUkxMUkxSSAoIG5hbWUgKSA6CiBPT09PMCA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBpaUlJICkgLiByZWFkICggKSApCiBmb3IgSTFJaTFpaUkxMWkxIGluIHJhbmdlICggbGVuICggT09PTzAgKSApIDoKICBpZiBPT09PMCBbIEkxSWkxaWlJMTFpMSBdIFsgMCBdID09IG5hbWUgOgogICBkZWwgT09PTzAgWyBJMUlpMWlpSTExaTEgXQogICBpSUlpSUlJMWkgPSBvcGVuICggaWlJSSAsICJ3IiApCiAgIGlJSWlJSUkxaSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggT09PTzAgKSApCiAgIGlJSWlJSUkxaSAuIGNsb3NlICggKQogICBicmVhawogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuQ29udGFpbmVyLlJlZnJlc2giICkKIGlmIDU4IC0gNTg6IE8wME8gKyBvbzBPb08gLyBPMDBvbzBvICUgTzAwTyAqIE9vbzBPb09vME9PT08gLiBvTzAwb29vMG8wT08KZGVmIG8wb08wb09PbyAoIHVybCApIDoKIGltcG9ydCB1cmxyZXNvbHZlcgogaTExID0gdXJscmVzb2x2ZXIgLiBIb3N0ZWRNZWRpYUZpbGUgKCB1cmwgKQogaWYgaTExIDoKICBJaWlJMUkgPSB1cmxyZXNvbHZlciAuIHJlc29sdmUgKCB1cmwgKQogIG9PSTFpID0gSWlpSTFJCiAgaWYgaXNpbnN0YW5jZSAoIG9PSTFpICwgbGlzdCApIDoKICAgZm9yIElJaUlJMTFpaWkxIGluIG9PSTFpIDoKICAgIG9vb08wMDBvT29PTzBvID0gT28wME8gLiBnZXRTZXR0aW5nICggJ3F1YWxpdHknICkKICAgIGlmIElJaUlJMTFpaWkxIFsgJ3F1YWxpdHknIF0gPT0gJ0hEJyA6CiAgICAgSWlpSTFJID0gSUlpSUkxMWlpaTEgWyAndXJsJyBdCiAgICAgYnJlYWsKICAgIGVsaWYgSUlpSUkxMWlpaTEgWyAncXVhbGl0eScgXSA9PSAnU0QnIDoKICAgICBJaWlJMUkgPSBJSWlJSTExaWlpMSBbICd1cmwnIF0KICAgIGVsaWYgSUlpSUkxMWlpaTEgWyAncXVhbGl0eScgXSA9PSAnMTA4MHAnIGFuZCBPbzAwTyAuIGdldFNldHRpbmcgKCAnMTA4MHBxdWFsaXR5JyApID09ICd0cnVlJyA6CiAgICAgSWlpSTFJID0gSUlpSUkxMWlpaTEgWyAndXJsJyBdCiAgICAgYnJlYWsKICBlbHNlIDoKICAgSWlpSTFJID0gb09JMWkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQbGFuZXRhLFVybHJlc29sdmVyIGRvbm90IHN1cHBvcnQgdGhpcyBkb21haW4uIC0gLDUwMDApIiApCiAgSWlpSTFJID0gdXJsCiByZXR1cm4gSWlpSTFJCmRlZiBJaU9vICggdXJsICwgbGlzdGl0ZW0gLCBwZGlhbG9ndWUgPSBOb25lICkgOgogaWYgNjEgLSA2MTogaWlJIC0gaTExSWlJMUlJICUgSUkxaTExMWlJMWlpIC4gSUkxaWlJMWlpMWlpaQogaWYgdXJsIC4gbG93ZXIgKCApIC4gc3RhcnRzd2l0aCAoICdwbHVnaW4nICkgYW5kICd5b3V0dWJlJyBub3QgaW4gdXJsIC4gbG93ZXIgKCApIDoKICBwcmludCAncGxheWluZyB2aWEgcnVucGx1Z2luJwogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdYQk1DLlJ1blBsdWdpbignICsgdXJsICsgJyknICkKICBmb3IgbzBPME9vMDAgaW4gcmFuZ2UgKCA4ICkgOgogICB4Ym1jIC4gc2xlZXAgKCA1MDAgKQogICB0cnkgOgogICAgaWYgNDUgLSA0NTogb08wMG9vbzBvME9PICUgaWlpSTFpaUkxaQogICAgaWYgeGJtYyAuIGdldENvbmRWaXNpYmlsaXR5ICggIlBsYXllci5IYXNNZWRpYSIgKSBhbmQgeGJtYyAuIFBsYXllciAoICkgLiBpc1BsYXlpbmcgKCApIDoKICAgICByZXR1cm4gVHJ1ZQogICBleGNlcHQgOiBwYXNzCiAgcHJpbnQgJ3JldHVybmluZyBub3cnCiAgcmV0dXJuIEZhbHNlCiBpbXBvcnQgQ3VzdG9tUGxheWVyICwgdGltZQogaWYgMjkgLSAyOTogb29vICUgTzAwMDBPIC8gT09vT29PMG8wbzBPTwogT09vT08gPSBDdXN0b21QbGF5ZXIgLiBNeVhCTUNQbGF5ZXIgKCApCiBPT29PTyAuIHBkaWFsb2d1ZSA9IHBkaWFsb2d1ZQogT08wb29PMG8wbzAgPSB0aW1lIC4gdGltZSAoICkKIGlmIDE5IC0gMTk6IE8wMDBPb28wbzBPT28gLSBPMDAwT29vMG8wT09vICUgSTFJaSAtIGkxMUlpSTFJSQogcHJpbnQgJ2dvaW5nIHRvIHBsYXknCiBpbXBvcnQgdGltZQogb29vT09vMCA9IHRpbWUgLiB0aW1lICggKQogT09vT08gLiBwbGF5ICggdXJsICwgbGlzdGl0ZW0gKQogeGJtYyAuIHNsZWVwICggMTAwMCApCiBpZiA5NCAtIDk0OiBJMUlpIC0gSTFJaSAqIE8wME8gLyBpMTFJaUkxSUkgKiBPMDBvbzBvIC0gT09vT29PMG8wbzBPTwogdHJ5IDoKICB3aGlsZSBPT29PTyAuIGlzX2FjdGl2ZSA6CiAgIHhibWMgLiBzbGVlcCAoIDQwMCApCiAgIGlmIDM5IC0gMzk6IE9Pb09vTzBvMG8wT08gJSBJaSArIElpaUlJaUlJICUgSUkxaTExMWlJMWlpIC8gSUlJSQogICBpZiBPT29PTyAuIHVybHBsYXllZCA6CiAgICBwcmludCAneWVzIHBsYXllZCcKICAgIHJldHVybiBUcnVlCiAgIGlmIHRpbWUgLiB0aW1lICggKSAtIG9vb09PbzAgPiA0IDogcmV0dXJuIEZhbHNlCiAgIGlmIDEwIC0gMTA6IG9PTyArIEkxSWkgKiBvTzAwb29vMG8wT08gLiBPb28wT29PbzBPT09PICogb08wMG9vbzBvME9PIC0gb08wMG9vbzBvME9PCiBleGNlcHQgOiBwYXNzCiBwcmludCAnbm90IHBsYXllZCcgLCB1cmwKIHJldHVybiBGYWxzZQpkZWYgb29vb28wMG8wTyAoIG5hbWUgLCBtdV9wbGF5bGlzdCAsIHF1ZXVlVmlkZW8gPSBOb25lICkgOgogaUlpSTFpSUlpaTExSSA9IHhibWMgLiBQbGF5TGlzdCAoIHhibWMgLiBQTEFZTElTVF9WSURFTyApCiBpZiAzOSAtIDM5OiBJaWlJSWlJSSAlIElJMWlpSTFpaTFpaWkgKyBJaSArIElpIC0gSWlpSUlpSUkgLyBvb28KIGlmICckJExTUGxheU9ubHlPbmUkJCcgaW4gbXVfcGxheWxpc3QgWyAwIF0gOgogIG11X3BsYXlsaXN0IFsgMCBdID0gbXVfcGxheWxpc3QgWyAwIF0gLiByZXBsYWNlICggJyQkTFNQbGF5T25seU9uZSQkJyAsICcnICkKICBpbXBvcnQgdXJscGFyc2UKICBPb08gPSBbIF0KICBJaUlpaUlJID0gMAogIE9vbzBvbzAwT08wT08gPSB4Ym1jZ3VpIC4gRGlhbG9nUHJvZ3Jlc3MgKCApCiAgT29vMG9vMDBPTzBPTyAuIGNyZWF0ZSAoICdQcm9ncmVzcycgLCAnVHJ5aW5nIE11bHRpcGxlIExpbmtzJyApCiAgZm9yIG8wTzBPbzAwIGluIG11X3BsYXlsaXN0IDoKICAgaWYgNTYgLSA1NjogTzAwMDBPIC8gTzAwb28wbyAqIG9vbyAlIE8wMDAwTwogICBpZiA1OSAtIDU5OiBPMDBvbzBvIC4gTzAwb28wbyAqIE9Pb09vTzBvMG8wT08gKyBPb28wT29PbzBPT09PCiAgIGlmICckJGxzbmFtZT0nIGluIG8wTzBPbzAwIDoKICAgIG9PbyA9IG8wTzBPbzAwIC4gc3BsaXQgKCAnJCRsc25hbWU9JyApIFsgMSBdIC4gc3BsaXQgKCAnJnJlZ2V4cycgKSBbIDAgXQogICAgT29PIC4gYXBwZW5kICggb09vICkKICAgIG11X3BsYXlsaXN0IFsgSWlJaWlJSSBdID0gbzBPME9vMDAgLiBzcGxpdCAoICckJGxzbmFtZT0nICkgWyAwIF0gKyAoICcmcmVnZXhzJyArIG8wTzBPbzAwIC4gc3BsaXQgKCAnJnJlZ2V4cycgKSBbIDEgXSBpZiAnJnJlZ2V4cycgaW4gbzBPME9vMDAgZWxzZSAnJyApCiAgIGVsc2UgOgogICAgb09vID0gdXJscGFyc2UgLiB1cmxwYXJzZSAoIG8wTzBPbzAwICkgLiBuZXRsb2MKICAgIGlmIG9PbyA9PSAnJyA6CiAgICAgT29PIC4gYXBwZW5kICggbmFtZSApCiAgICBlbHNlIDoKICAgICBPb08gLiBhcHBlbmQgKCBvT28gKQogICBJMUlpMWlpSTExaTEgPSBJaUlpaUlJCiAgIElpSWlpSUkgKz0gMQogICBpZiA1OSAtIDU5OiBPMDAwME8gLSBvb28gLiBvb28gLSBJaSArIGlpSSAlIE8wMG9vMG8KICAgaWlpID0gT29PIFsgSTFJaTFpaUkxMWkxIF0KICAgaWYgT29vMG9vMDBPTzBPTyAuIGlzY2FuY2VsZWQgKCApIDogcmV0dXJuCiAgIE9vbzBvbzAwT08wT08gLiB1cGRhdGUgKCBJaUlpaUlJIC8gbGVuICggbXVfcGxheWxpc3QgKSAqIDEwMCAsICIiICwgIkxpbmsjJWQiICUgKCBJaUlpaUlJICkgLCBpaWkgKQogICBwcmludCAnYXV0byBwbGF5bmFtZXh4JyAsIGlpaQogICBpZiAiJm1vZGU9MTkiIGluIG11X3BsYXlsaXN0IFsgSTFJaTFpaUkxMWkxIF0gOgogICAgaWYgODYgLSA4NjogaWlJIC4gb08wMG9vbzBvME9PICsgT29vME9vT28wT09PTyArIEkxSWkKICAgIElpSTFJID0geGJtY2d1aSAuIExpc3RJdGVtICggaWlpICwgaWNvbkltYWdlID0gT28wICwgdGh1bWJuYWlsSW1hZ2UgPSBPbzAgKQogICAgSWlJMUkgLiBzZXRJbmZvICggdHlwZSA9ICdWaWRlbycgLCBpbmZvTGFiZWxzID0geyAnVGl0bGUnIDogaWlpIH0gKQogICAgSWlJMUkgLiBzZXRQcm9wZXJ0eSAoICJJc1BsYXlhYmxlIiAsICJ0cnVlIiApCiAgICBJaUkxMUlJID0gbzBvTzBvT09vICggbXVfcGxheWxpc3QgWyBJMUlpMWlpSTExaTEgXSAuIHJlcGxhY2UgKCAnJm1vZGU9MTknICwgJycgKSAuIHJlcGxhY2UgKCAnOycgLCAnJyApICkKICAgIElpSTFJIC4gc2V0UGF0aCAoIElpSTExSUkgKQogICAgaWYgODcgLSA4Nzogb08wMG9vbzBvME9PCiAgICBPME9JaTFJaTFpaTFpaSA9IElpT28gKCBJaUkxMUlJICwgSWlJMUkgKQogICBlbGlmICIkZG9yZWdleCIgaW4gbXVfcGxheWxpc3QgWyBJMUlpMWlpSTExaTEgXSA6CiAgICBpZiA3NSAtIDc1OiBvTzAwb29vMG8wT08gJSBJSTFpaUkxaWkxaWlpIC8gSTFJaQogICAgT29vMDAwMDAwID0gbXVfcGxheWxpc3QgWyBJMUlpMWlpSTExaTEgXSAuIHNwbGl0ICggJyZyZWdleHM9JyApCiAgICBpZiAyMyAtIDIzOiBJSUlJCiAgICBJaUkgLCBpSUlpSTFpID0gTzBvTyAoIE9vbzAwMDAwMCBbIDEgXSAsIE9vbzAwMDAwMCBbIDAgXSApCiAgICBPT29PT0lpMTFJMTEgPSBJaUkgLiByZXBsYWNlICggJzsnICwgJycgKQogICAgSWlJMUkgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBpaWkgLCBpY29uSW1hZ2UgPSBPbzAgLCB0aHVtYm5haWxJbWFnZSA9IE9vMCApCiAgICBJaUkxSSAuIHNldEluZm8gKCB0eXBlID0gJ1ZpZGVvJyAsIGluZm9MYWJlbHMgPSB7ICdUaXRsZScgOiBpaWkgfSApCiAgICBJaUkxSSAuIHNldFByb3BlcnR5ICggIklzUGxheWFibGUiICwgInRydWUiICkKICAgIElpSTFJIC4gc2V0UGF0aCAoIE9Pb09PSWkxMUkxMSApCiAgICBpZiA1NCAtIDU0OiBPMDAwME8gLyBvbzBPb08gKyBvT08gLyBvb28gKyBPMDAwME8KICAgIE8wT0lpMUlpMWlpMWlpID0gSWlPbyAoIE9Pb09PSWkxMUkxMSAsIElpSTFJICkKICAgIGlmIDY2IC0gNjY6IG9vME9vTwogICBlbHNlIDoKICAgIElpSSA9IG11X3BsYXlsaXN0IFsgSTFJaTFpaUkxMWkxIF0KICAgIElpSSA9IElpSSAuIHNwbGl0ICggJyZyZWdleHM9JyApIFsgMCBdCiAgICBJaUkxSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGlpaSAsIGljb25JbWFnZSA9IE9vMCAsIHRodW1ibmFpbEltYWdlID0gT28wICkKICAgIElpSTFJIC4gc2V0SW5mbyAoIHR5cGUgPSAnVmlkZW8nICwgaW5mb0xhYmVscyA9IHsgJ1RpdGxlJyA6IGlpaSB9ICkKICAgIElpSTFJIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogICAgSWlJMUkgLiBzZXRQYXRoICggSWlJICkKICAgIGlmIDg2IC0gODY6IGlpaUkxaWlJMWkgLSBpaWlJMWlpSTFpICUgTzAwTyArIE8wMDAwTwogICAgTzBPSWkxSWkxaWkxaWkgPSBJaU9vICggSWlJICwgSWlJMUkgKQogICAgcHJpbnQgJ3BsYXllZCcgLCBPME9JaTFJaTFpaTFpaQogICBwcmludCAncGxheWVkJyAsIE8wT0lpMUlpMWlpMWlpCiAgIGlmIE8wT0lpMUlpMWlpMWlpIDogcmV0dXJuCiAgcmV0dXJuCiBpZiBPbzAwTyAuIGdldFNldHRpbmcgKCAnYXNrX3BsYXlsaXN0X2l0ZW1zJyApID09ICd0cnVlJyBhbmQgbm90IHF1ZXVlVmlkZW8gOgogIGltcG9ydCB1cmxwYXJzZQogIE9vTyA9IFsgXQogIElpSWlpSUkgPSAwCiAgZm9yIG8wTzBPbzAwIGluIG11X3BsYXlsaXN0IDoKICAgaWYgJyQkbHNuYW1lPScgaW4gbzBPME9vMDAgOgogICAgb09vID0gbzBPME9vMDAgLiBzcGxpdCAoICckJGxzbmFtZT0nICkgWyAxIF0gLiBzcGxpdCAoICcmcmVnZXhzJyApIFsgMCBdCiAgICBPb08gLiBhcHBlbmQgKCBvT28gKQogICAgbXVfcGxheWxpc3QgWyBJaUlpaUlJIF0gPSBvME8wT28wMCAuIHNwbGl0ICggJyQkbHNuYW1lPScgKSBbIDAgXSArICggJyZyZWdleHMnICsgbzBPME9vMDAgLiBzcGxpdCAoICcmcmVnZXhzJyApIFsgMSBdIGlmICcmcmVnZXhzJyBpbiBvME8wT28wMCBlbHNlICcnICkKICAgZWxzZSA6CiAgICBvT28gPSB1cmxwYXJzZSAuIHVybHBhcnNlICggbzBPME9vMDAgKSAuIG5ldGxvYwogICAgaWYgb09vID09ICcnIDoKICAgICBPb08gLiBhcHBlbmQgKCBuYW1lICkKICAgIGVsc2UgOgogICAgIE9vTyAuIGFwcGVuZCAoIG9PbyApCiAgICAgaWYgMzcgLSAzNzogaWlJICogSTFJaSAqIElJSUkgLiBJaWlJSWlJSSArIG9PTwogICBJaUlpaUlJICs9IDEKICBPbzBJaTFJID0geGJtY2d1aSAuIERpYWxvZyAoICkKICBJMUlpMWlpSTExaTEgPSBPbzBJaTFJIC4gc2VsZWN0ICggJ0Nob29zZSBhIHZpZGVvIHNvdXJjZScgLCBPb08gKQogIGlmIEkxSWkxaWlJMTFpMSA+PSAwIDoKICAgaWlpID0gT29PIFsgSTFJaTFpaUkxMWkxIF0KICAgcHJpbnQgJ3BsYXluYW1leHgnICwgaWlpCiAgIGlmICImbW9kZT0xOSIgaW4gbXVfcGxheWxpc3QgWyBJMUlpMWlpSTExaTEgXSA6CiAgICBpZiAyMyAtIDIzOiBpMTFJaUkxSUkKICAgIElpSTFJID0geGJtY2d1aSAuIExpc3RJdGVtICggaWlpICwgaWNvbkltYWdlID0gT28wICwgdGh1bWJuYWlsSW1hZ2UgPSBPbzAgKQogICAgSWlJMUkgLiBzZXRJbmZvICggdHlwZSA9ICdWaWRlbycgLCBpbmZvTGFiZWxzID0geyAnVGl0bGUnIDogaWlpIH0gKQogICAgSWlJMUkgLiBzZXRQcm9wZXJ0eSAoICJJc1BsYXlhYmxlIiAsICJ0cnVlIiApCiAgICBJaUkxMUlJID0gbzBvTzBvT09vICggbXVfcGxheWxpc3QgWyBJMUlpMWlpSTExaTEgXSAuIHJlcGxhY2UgKCAnJm1vZGU9MTknICwgJycgKSAuIHJlcGxhY2UgKCAnOycgLCAnJyApICkKICAgIElpSTFJIC4gc2V0UGF0aCAoIElpSTExSUkgKQogICAgeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggSWlJMTFJSSAsIElpSTFJICkKICAgZWxpZiAiJGRvcmVnZXgiIGluIG11X3BsYXlsaXN0IFsgSTFJaTFpaUkxMWkxIF0gOgogICAgaWYgNDQgLSA0NDogSWkgLSBPMDAwT29vMG8wT09vIC0gb09PIC4gSWkKICAgIE9vbzAwMDAwMCA9IG11X3BsYXlsaXN0IFsgSTFJaTFpaUkxMWkxIF0gLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgaWYgNTMgLSA1MzogaWlpSTFpaUkxaSAtIElpIC4gSUkxaTExMWlJMWlpCiAgICBJaUkgLCBpSUlpSTFpID0gTzBvTyAoIE9vbzAwMDAwMCBbIDEgXSAsIE9vbzAwMDAwMCBbIDAgXSApCiAgICBPT29PT0lpMTFJMTEgPSBJaUkgLiByZXBsYWNlICggJzsnICwgJycgKQogICAgSWlJMUkgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBpaWkgLCBpY29uSW1hZ2UgPSBPbzAgLCB0aHVtYm5haWxJbWFnZSA9IE9vMCApCiAgICBJaUkxSSAuIHNldEluZm8gKCB0eXBlID0gJ1ZpZGVvJyAsIGluZm9MYWJlbHMgPSB7ICdUaXRsZScgOiBpaWkgfSApCiAgICBJaUkxSSAuIHNldFByb3BlcnR5ICggIklzUGxheWFibGUiICwgInRydWUiICkKICAgIElpSTFJIC4gc2V0UGF0aCAoIE9Pb09PSWkxMUkxMSApCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBPT29PT0lpMTFJMTEgLCBJaUkxSSApCiAgICBpZiA1NCAtIDU0OiBPb28wT29PbzBPT09PIC4gT29vME9vT28wT09PTwogICBlbHNlIDoKICAgIElpSSA9IG11X3BsYXlsaXN0IFsgSTFJaTFpaUkxMWkxIF0KICAgIElpSSA9IElpSSAuIHNwbGl0ICggJyZyZWdleHM9JyApIFsgMCBdCiAgICBJaUkxSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGlpaSAsIGljb25JbWFnZSA9IE9vMCAsIHRodW1ibmFpbEltYWdlID0gT28wICkKICAgIElpSTFJIC4gc2V0SW5mbyAoIHR5cGUgPSAnVmlkZW8nICwgaW5mb0xhYmVscyA9IHsgJ1RpdGxlJyA6IGlpaSB9ICkKICAgIElpSTFJIC4gc2V0UHJvcGVydHkgKCAiSXNQbGF5YWJsZSIgLCAidHJ1ZSIgKQogICAgSWlJMUkgLiBzZXRQYXRoICggSWlJICkKICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIElpSSAsIElpSTFJICkKIGVsaWYgbm90IHF1ZXVlVmlkZW8gOgogIGlmIDQ1IC0gNDU6IEkxSWkgJSBJSTFpaUkxaWkxaWlpICUgSUlJSSAtIEkxSWkKICBpSWlJMWlJSWlpMTFJIC4gY2xlYXIgKCApCiAgaUlpSSA9IDAKICBmb3IgbzBPME9vMDAgaW4gbXVfcGxheWxpc3QgOgogICBpSWlJICs9IDEKICAgT28wTzBvID0geGJtY2d1aSAuIExpc3RJdGVtICggJyVzKSAlcycgJSAoIHN0ciAoIGlJaUkgKSAsIG5hbWUgKSApCiAgIGlmIDY3IC0gNjc6IElpICogaWlJICsgT29vME9vT28wT09PTwogICB0cnkgOgogICAgaWYgIiRkb3JlZ2V4IiBpbiBvME8wT28wMCA6CiAgICAgT29vMDAwMDAwID0gbzBPME9vMDAgLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgIGlmIDk5IC0gOTk6IE8wMDAwTwogICAgIElpSSAsIGlJSWlJMWkgPSBPMG9PICggT29vMDAwMDAwIFsgMSBdICwgT29vMDAwMDAwIFsgMCBdICkKICAgIGVsaWYgIiZtb2RlPTE5IiBpbiBvME8wT28wMCA6CiAgICAgSWlJID0gbzBvTzBvT09vICggbzBPME9vMDAgLiByZXBsYWNlICggJyZtb2RlPTE5JyAsICcnICkgLiByZXBsYWNlICggJzsnICwgJycgKSApCiAgICBpZiBJaUkgOgogICAgIGlJaUkxaUlJaWkxMUkgLiBhZGQgKCBJaUkgLCBPbzBPMG8gKQogICAgZWxzZSA6CiAgICAgcmFpc2UKICAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgICBpSWlJMWlJSWlpMTFJIC4gYWRkICggbzBPME9vMDAgLCBPbzBPMG8gKQogICAgcGFzcwogICAgaWYgODAgLSA4MDogaWlJIC0gb28wMG9Pb08wbzBvICUgb08wMG9vbzBvME9PCiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ3BsYXlsaXN0LnBsYXlvZmZzZXQodmlkZW8sMCknICkKIGVsc2UgOgogIGlmIDkwIC0gOTA6IE8wMDBPb28wbzBPT28gJSBPMDBvbzBvICogaWlpSTFpaUkxaSAqIE9vbzBPb09vME9PT08KICBJMUkxaTExID0geGJtY2d1aSAuIExpc3RJdGVtICggbmFtZSApCiAgaUlpSTFpSUlpaTExSSAuIGFkZCAoIG11X3BsYXlsaXN0ICwgSTFJMWkxMSApCiAgaWYgNDAgLSA0MDogTzAwTyAlIE8wMDBPb28wbzBPT28KICBpZiAzNyAtIDM3OiBJaSArIGlpSSArIG9PTyAuIG9vMDBvT29PMG8wbyAtIGlpSQpkZWYgb29JMUkxICggbmFtZSAsIHVybCApIDoKIGlmIDQzIC0gNDM6IG9PTyArIElJMWkxMTFpSTFpaQogaWYgT28wME8gLiBnZXRTZXR0aW5nICggJ3NhdmVfbG9jYXRpb24nICkgPT0gIiIgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbignUGxhbmV0YScsJ0Nob29zZSBhIGxvY2F0aW9uIHRvIHNhdmUgZmlsZXMuJywxNTAwMCwiICsgT08wME9vbzBvICsgIikiICkKICBPbzAwTyAuIG9wZW5TZXR0aW5ncyAoICkKIGlJSWkgPSB7ICd1cmwnIDogdXJsICwgJ2Rvd25sb2FkX3BhdGgnIDogT28wME8gLiBnZXRTZXR0aW5nICggJ3NhdmVfbG9jYXRpb24nICkgfQogZG93bmxvYWRlciAuIGRvd25sb2FkICggbmFtZSAsIGlJSWkgKQogT28wSWkxSSA9IHhibWNndWkgLiBEaWFsb2cgKCApCiBJaTExaUlJMWkgPSBPbzBJaTFJIC4geWVzbm8gKCAnUGxhbmV0YScgLCAnRG8geW91IHdhbnQgdG8gYWRkIHRoaXMgZmlsZSBhcyBhIHNvdXJjZT8nICkKIGlmIElpMTFpSUkxaSA6CiAgb09vbzBvME9vTyAoIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzAwTyAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSAsIG5hbWUgKSApCiAgaWYgMTIgLSAxMjogSUlJSQpkZWYgSTExaTExaWlpMTExaSAoIHVybCAsIG5hbWUgKSA6CiBpZiA4MyAtIDgzOiBPMDAwT29vMG8wT09vICogSUkxaTExMWlJMWlpIC4gTzAwME9vbzBvME9PbwogaWlpaU9PbyA9IFsgJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249c2hvd3Nfc2VhcmNoJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZ2VuZXNpcy8/YWN0aW9uPW1vdmllc19zZWFyY2gnICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby5zYWx0cy8/bW9kZT1zZWFyY2gmYW1wO3NlY3Rpb249TW92aWVzJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uc2FsdHMvP21vZGU9c2VhcmNoJmFtcDtzZWN0aW9uPVRWJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ubXVjaG1vdmllcy5oZC8/YWN0aW9uPW1vdmllc19zZWFyY2gnICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby52aW9vei5jby8/YWN0aW9uPXJvb3Rfc2VhcmNoJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ub3Jvcm90di8/YWN0aW9uPXNob3dzX3NlYXJjaCcgLCAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlpZnltb3ZpZXMuaGQvP2FjdGlvbj1tb3ZpZXNfc2VhcmNoJyAsICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uY2FydG9vbmhkdHdvLz9kZXNjcmlwdGlvbiZhbXA7ZmFuYXJ0JmFtcDtpY29uaW1hZ2UmYW1wO21vZGU9MyZhbXA7bmFtZT1TZWFyY2gmYW1wO3VybD11cmwnICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL2tvZGlvbi9zZWFyY2gvbGlzdC8nICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby5kYWlseW1vdGlvbl9jb20vP21vZGU9c2VhcmNoJmFtcDt1cmwnICwgJ3BsdWdpbjovL3BsdWdpbi52aWRlby52aW1lby9rb2Rpb24vc2VhcmNoL2xpc3QvJyBdCiBpZiA4NSAtIDg1OiBJaWlJSWlJSSAlIE8wME8gJSBPMDBPCiBpZiA4OSAtIDg5OiBvTzAwb29vMG8wT08gLSBvbzBPb08gLiBJSUlJCiBpZiAxMyAtIDEzOiBPMDAwT29vMG8wT09vICsgTzAwME9vbzBvME9PbyAqIG9PMDBvb28wbzBPTyAqIElpaUlJaUlJIC8gaWlJIC0gTzAwb28wbwogaWYgNDQgLSA0NDogb28wT29PIC4gSWlpSUlpSUkgLiBJSUlJICogSTFJaSAvIG9vMDBvT29PMG8wbwogaWYgNzEgLSA3MTogaWlJIC8gT09vT29PMG8wbzBPTwogaWYgOTggLSA5ODogb28wMG9Pb08wbzBvICUgTzAwME9vbzBvME9PbyAtIG9PMDBvb28wbzBPTwogaWYgNTcgLSA1Nzogb28wT29PICsgSUkxaWlJMWlpMWlpaQogaWYgNjEgLSA2MTogaWlJCiBpZiA4IC0gODogSUkxaWlJMWlpMWlpaSAqIElJSUkgKyBvT08gLSBvT08gLyBpMTFJaUkxSUkgJSBJSTFpaUkxaWkxaWlpCiBpZiA1MCAtIDUwOiBpaUkgKyBvTzAwb29vMG8wT08gLSBPMDAwT29vMG8wT09vCiBpZiA2NiAtIDY2OiBJaSAvIGkxMUlpSTFJSSAvIElJMWlpSTFpaTFpaWkKIGlmIDU5IC0gNTk6IElJMWkxMTFpSTFpaQogT29PID0gWyAnR2Vuc2lzIFRWJyAsICdHZW5lc2lzIE1vdmllJyAsICdTYWx0IG1vdmllJyAsICdzYWx0IFRWJyAsICdNdWNobW92aWVzJyAsICd2aW9veicgLCAnT1Jvcm9UVicgLCAnWWlmeW1vdmllcycgLCAnY2FydG9vbkhEJyAsICdZb3V0dWJlJyAsICdEYWlseU1vdGlvbicgLCAnVmltZW8nIF0KIGlmIDgxIC0gODE6IG9PTyAlIE9Pb09vTzBvMG8wT08gLyBJaWlJSWlJSSAlIElpaUlJaUlJCiBPbzBJaTFJID0geGJtY2d1aSAuIERpYWxvZyAoICkKIEkxSWkxaWlJMTFpMSA9IE9vMElpMUkgLiBzZWxlY3QgKCAnQ2hvb3NlIGEgdmlkZW8gc291cmNlJyAsIE9vTyApCiBpZiA0MCAtIDQwOiBvT08KIGlmIEkxSWkxaWlJMTFpMSA+PSAwIDoKICB1cmwgPSBpaWlpT09vIFsgSTFJaTFpaUkxMWkxIF0KICBpZiA5IC0gOTogSTFJaSAlIG9PTwogIG8wTzAwb08wME9PbyAoIHVybCApCiAgaWYgNjIgLSA2MjogT09vT29PMG8wbzBPTyAlIE8wMDAwTwpkZWYgT08wT29Pb08wMCAoIG5hbWUgLCB1cmwgLCBtb2RlICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBjcmVkaXRzICwgc2hvd2NvbnRleHQgPSBGYWxzZSAsIHJlZ2V4cyA9IE5vbmUgLCByZWdfdXJsID0gTm9uZSAsIGFsbGluZm8gPSB7IH0gKSA6CiBpZiA5MSAtIDkxOiBPMDBvbzBvICogb08wMG9vbzBvME9PIC8gb28wT29PICsgSWkKIGlmIDE0IC0gMTQ6IE9Pb09vTzBvMG8wT08gLiBPMDAwT29vMG8wT09vICUgTzAwMDBPICsgSTFJaSAvIElpICUgTzAwTwogaWYgODAgLSA4MDogb28wMG9Pb08wbzBvICogTzAwME9vbzBvME9PbyAqIElJMWlpSTFpaTFpaWkgKiBJSTFpMTExaUkxaWkKIGlmIHJlZ2V4cyBhbmQgbGVuICggcmVnZXhzICkgPiAwIDoKICBPMDAwT09PbzBPID0gc3lzIC4gYXJndiBbIDAgXSArICI/dXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIHN0ciAoIG1vZGUgKSArICImbmFtZT0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSArICImZmFuYXJ0PSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggZmFuYXJ0ICkgKyAiJnJlZ2V4cz0iICsgcmVnZXhzCiBlbHNlIDoKICBPMDAwT09PbzBPID0gc3lzIC4gYXJndiBbIDAgXSArICI/dXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIHN0ciAoIG1vZGUgKSArICImbmFtZT0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSArICImZmFuYXJ0PSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggZmFuYXJ0ICkKICBpZiA5MSAtIDkxOiBJaWlJSWlJSSArIGlpaUkxaWlJMWkKIGlpTzBPb09vbzAgPSBUcnVlCiBpZiBkYXRlID09ICcnIDoKICBkYXRlID0gTm9uZQogZWxzZSA6CiAgZGVzY3JpcHRpb24gKz0gJ1xuXG5EYXRlOiAlcycgJSBkYXRlCiBJaUkxSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSAiRGVmYXVsdEZvbGRlci5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKQogaWYgbGVuICggYWxsaW5mbyApIDwgMSA6CiAgSWlJMUkgLiBzZXRJbmZvICggdHlwZSA9ICJWaWRlbyIgLCBpbmZvTGFiZWxzID0geyAiVGl0bGUiIDogbmFtZSAsICJQbG90IiA6IGRlc2NyaXB0aW9uICwgIkdlbnJlIiA6IGdlbnJlICwgImRhdGVhZGRlZCIgOiBkYXRlICwgImNyZWRpdHMiIDogY3JlZGl0cyB9ICkKIGVsc2UgOgogIElpSTFJIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IGFsbGluZm8gKQogSWlJMUkgLiBzZXRQcm9wZXJ0eSAoICJGYW5hcnRfSW1hZ2UiICwgZmFuYXJ0ICkKIGlmIHNob3djb250ZXh0IDoKICBvMG9vT08wMDBPb28gPSBbIF0KICBPb09vME8gPSBPbzAwTyAuIGdldFNldHRpbmcgKCAncGFyZW50YWxibG9ja2VkJyApCiAgT29PbzBPID0gT29PbzBPID09ICJ0cnVlIgogIE8wME9PTzAwID0gT28wME8gLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZHBpbicgKQogIGlmIDg3IC0gODc6IG9vbyAqIElpaUlJaUlJCiAgaWYgbGVuICggTzAwT09PMDAgKSA+IDAgOgogICBpZiBPb09vME8gOgogICAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnRGlzYWJsZSBQYXJlbnRhbCBCbG9jaycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT01NSZuYW1lPSVzKScgJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgIGVsc2UgOgogICAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnRW5hYmxlIFBhcmVudGFsIEJsb2NrJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTU2Jm5hbWU9JXMpJyAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICAgIGlmIDQwIC0gNDA6IElJMWlpSTFpaTFpaWkgLyBPb28wT29PbzBPT09PICsgSUkxaWlJMWlpMWlpaSAtIG9vME9vTyAqIGkxMUlpSTFJSSAuIG9PMDBvb28wbzBPTwogIGlmIHNob3djb250ZXh0ID09ICdzb3VyY2UnIDoKICAgaWYgNjYgLSA2Njogb29vICsgSWlpSUlpSUkgLSBPb28wT29PbzBPT09PCiAgIGlmIG5hbWUgaW4gc3RyICggT29PTzAgKSA6CiAgICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdSZW1vdmUgZnJvbSBTb3VyY2VzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTgmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICAgaWYgMjYgLSAyNjogb28wT29PIC8gTzAwb28wbyAlIElJMWkxMTFpSTFpaSAqIElJSUkgKiBvTzAwb29vMG8wT08gLSBPMDAwME8KICAgIGlmIDMzIC0gMzM6IElJSUkgKyBPMDBPIC8gTzAwb28wbyAlIE8wMG9vMG8gJSBJMUlpICUgTzAwMDBPCiAgZWxpZiBzaG93Y29udGV4dCA9PSAnZG93bmxvYWQnIDoKICAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnRG93bmxvYWQnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTkmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKICBlbGlmIHNob3djb250ZXh0ID09ICdmYXYnIDoKICAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnUmVtb3ZlIGZyb20gUGxhbmV0YSBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NiZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogIGlmIHNob3djb250ZXh0ID09ICchIXVwZGF0ZScgOgogICBPMG9vb09vMCA9ICgKICclcz91cmw9JXMmbW9kZT0xNyZyZWdleHM9JXMnCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCByZWdfdXJsICkgLCByZWdleHMgKQogKQogICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdbQ09MT1IgeWVsbG93XSEhdXBkYXRlWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzKScgJSBPMG9vb09vMCApICkKICBpZiBub3QgbmFtZSBpbiBJaUlpaWlJIDoKICAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnQWRkIHRvIFBsYW5ldGEgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTUmbmFtZT0lcyZ1cmw9JXMmaWNvbmltYWdlPSVzJmZhbmFydD0lcyZmYXZfbW9kZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggaWNvbmltYWdlICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggZmFuYXJ0ICkgLCBtb2RlICkgKSApCiAgSWlJMUkgLiBhZGRDb250ZXh0TWVudUl0ZW1zICggbzBvb09PMDAwT29vICkKIGlpTzBPb09vbzAgPSB4Ym1jcGx1Z2luIC4gYWRkRGlyZWN0b3J5SXRlbSAoIGhhbmRsZSA9IGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHVybCA9IE8wMDBPT09vME8gLCBsaXN0aXRlbSA9IElpSTFJICwgaXNGb2xkZXIgPSBUcnVlICkKIHJldHVybiBpaU8wT29Pb28wCmRlZiBpMTFPME9PMCAoIHVybCAsIHRpdGxlICwgbWVkaWFfdHlwZSA9ICd2aWRlbycgKSA6CiBpZiA1OCAtIDU4OiBPT29Pb08wbzBvME9PICogSWkgLSBPMDAwME8gJSBpaUkgLiBPMDBvbzBvIC8gSTFJaQogaWYgNjQgLSA2NDogT09vT29PMG8wbzBPTyAtIG9vbyAtIG9vbwogaW1wb3J0IHlvdXR1YmVkbAogaWYgNDIgLSA0MjogTzAwME9vbzBvME9PbyAuIE8wMDAwTyArIE8wME8gJSBJaWlJSWlJSQogaWYgbm90IHVybCA9PSAnJyA6CiAgaWYgbWVkaWFfdHlwZSA9PSAnYXVkaW8nIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICwgYXVkaW8gPSBUcnVlICkKICBlbHNlIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICkKIGVsaWYgeGJtYyAuIFBsYXllciAoICkgLiBpc1BsYXlpbmcgKCApID09IFRydWUgOgogIGltcG9ydCBZRFN0cmVhbUV4dHJhY3RvcgogIGlmIFlEU3RyZWFtRXh0cmFjdG9yIC4gaXNEb3dubG9hZGluZyAoICkgPT0gVHJ1ZSA6CiAgIGlmIDE4IC0gMTg6IElJMWkxMTFpSTFpaSArIElJMWlpSTFpaTFpaWkgLiBPMDBPCiAgIFlEU3RyZWFtRXh0cmFjdG9yIC4gbWFuYWdlRG93bmxvYWRzICggKQogIGVsc2UgOgogICBpMWlpaWlJMWlpMTEgPSB4Ym1jIC4gUGxheWVyICggKSAuIGdldFBsYXlpbmdGaWxlICggKQogICBpZiA2IC0gNjogSWlpSUlpSUkKICAgaTFpaWlpSTFpaTExID0gaTFpaWlpSTFpaTExIC4gc3BsaXQgKCAnfFVzZXItQWdlbnQ9JyApIFsgMCBdCiAgIE9vME8wbyA9IHsgJ3VybCcgOiBpMWlpaWlJMWlpMTEgLCAndGl0bGUnIDogdGl0bGUgLCAnbWVkaWFfdHlwZScgOiBtZWRpYV90eXBlIH0KICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggJycgLCBkb3dubG9hZCA9IFRydWUgLCBkbF9pbmZvID0gT28wTzBvICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihET1dOTE9BRCxGaXJzdCBQbGF5IFtDT0xPUiB5ZWxsb3ddV0hJTEUgcGxheWluZyBkb3dubG9hZFsvQ09MT1JdICwxMDAwMCkiICkKICBpZiAzNSAtIDM1OiBpaUkgLiBJSUlJICogb09PICogT09vT29PMG8wbzBPTyAlIElJSUkgLSBvbzAwb09vTzBvMG8KICBpZiA0MSAtIDQxOiBJMUlpICUgTzAwMDBPIC8gT09vT29PMG8wbzBPTyAqIGlpaUkxaWlJMWkgLyBJSTFpMTExaUkxaWkgKiBvb28KZGVmIGkxaTFJaUkxSTFJaUkgKCBzdHJpbmcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgdW5pY29kZSApIDoKICAgc3RyaW5nID0gc3RyaW5nIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIElpaTFJaUlJMTExaUlJMTEgKCBzdHJpbmcgLCBlbmNvZGluZyA9ICd1dGYtOCcgKSA6CiBpZiBpc2luc3RhbmNlICggc3RyaW5nICwgYmFzZXN0cmluZyApIDoKICBpZiBub3QgaXNpbnN0YW5jZSAoIHN0cmluZyAsIHVuaWNvZGUgKSA6CiAgIHN0cmluZyA9IHVuaWNvZGUgKCBzdHJpbmcgLCBlbmNvZGluZyAsICdpZ25vcmUnICkKIHJldHVybiBzdHJpbmcKZGVmIEkxMUkxaTFJaUkxICggcyApIDogcmV0dXJuICIiIC4gam9pbiAoIGZpbHRlciAoIGxhbWJkYSBPb09vIDogb3JkICggT29PbyApIDwgMTI4ICwgcyApICkKaWYgMTUgLSAxNTogSWlpSUlpSUkgLSBvb28gKyBPMDAwME8KZGVmIG9Pb29vMCAoIGNvbW1hbmQgKSA6CiBPT09PMCA9ICcnCiB0cnkgOgogIE9PT08wID0geGJtYyAuIGV4ZWN1dGVKU09OUlBDICggSWlpMUlpSUkxMTFpSUkxMSAoIGNvbW1hbmQgKSApCiBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yIDoKICBPT09PMCA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIGkxaTFJaUkxSTFJaUkgKCBjb21tYW5kICkgKQogIGlmIDEwMCAtIDEwMDogTzAwMDBPICsgSWkgKiBpMTFJaUkxSUkgJSBPMDBvbzBvIC0gaTExSWlJMUlJIC4gT09vT29PMG8wbzBPTwogcmV0dXJuIElpaTFJaUlJMTExaUlJMTEgKCBPT09PMCApCiBpZiA2MyAtIDYzOiBPMDAwME8gLiBPb28wT29PbzBPT09PCmRlZiBvME8wMG9PMDBPT28gKCB1cmwgLCBnaXZlX21lX3Jlc3VsdCA9IE5vbmUgLCBwbGF5bGlzdCA9IEZhbHNlICkgOgogaWYgJ2F1ZGlvJyBpbiB1cmwgOgogIGlpMUlpMUkxID0gSWlpMUlpSUkxMTFpSUkxMSAoICd7Impzb25ycGMiOiIyLjAiLCJtZXRob2QiOiJGaWxlcy5HZXREaXJlY3RvcnkiLCJwYXJhbXMiOiB7ImRpcmVjdG9yeSI6IiVzIiwibWVkaWEiOiJ2aWRlbyIsICJwcm9wZXJ0aWVzIjogWyJ0aXRsZSIsICJhbGJ1bSIsICJhcnRpc3QiLCAiZHVyYXRpb24iLCJ0aHVtYm5haWwiLCAieWVhciJdfSwgImlkIjogMX0nICkgJSB1cmwKIGVsc2UgOgogIGlpMUlpMUkxID0gSWlpMUlpSUkxMTFpSUkxMSAoICd7Impzb25ycGMiOiIyLjAiLCJtZXRob2QiOiJGaWxlcy5HZXREaXJlY3RvcnkiLCJwYXJhbXMiOnsiZGlyZWN0b3J5IjoiJXMiLCJtZWRpYSI6InZpZGVvIiwicHJvcGVydGllcyI6WyAicGxvdCIsInBsYXljb3VudCIsImRpcmVjdG9yIiwgImdlbnJlIiwidm90ZXMiLCJkdXJhdGlvbiIsInRyYWlsZXIiLCJwcmVtaWVyZWQiLCJ0aHVtYm5haWwiLCJ0aXRsZSIsInllYXIiLCJkYXRlYWRkZWQiLCJmYW5hcnQiLCJyYXRpbmciLCJzZWFzb24iLCJlcGlzb2RlIiwic3R1ZGlvIiwibXBhYSJdfSwiaWQiOjF9JyApICUgdXJsCiBpMWlJMTExaSA9IGpzb24gLiBsb2FkcyAoIG9Pb29vMCAoIGlpMUlpMUkxICkgKQogaWYgNjcgLSA2Nzogb08wMG9vbzBvME9PICogaWlpSTFpaUkxaSAtIG9vMDBvT29PMG8wbyAqIE9vbzBPb09vME9PT08gJSBvT08gLiBvbzAwb09vTzBvMG8KIGlmIGdpdmVfbWVfcmVzdWx0IDoKICByZXR1cm4gaTFpSTExMWkKIGlmIGkxaUkxMTFpIC4gaGFzX2tleSAoICdlcnJvcicgKSA6CiAgcmV0dXJuCiBlbHNlIDoKICBpZiA3MiAtIDcyOiBJSTFpMTExaUkxaWkgKyBvT08gLSBvT08gKyBvTzAwb29vMG8wT08gJSBpaUkKICBmb3IgbzBPME9vMDAgaW4gaTFpSTExMWkgWyAncmVzdWx0JyBdIFsgJ2ZpbGVzJyBdIDoKICAgSWkxSUkxSUlpSUlpaSA9IHsgfQogICB1cmwgPSBvME8wT28wMCBbICdmaWxlJyBdCiAgIGlJSTFJaTFpaTExID0gSTExSTFpMUlpSTEgKCBvME8wT28wMCBbICdsYWJlbCcgXSApCiAgIEkxMWlJID0gSTExSTFpMUlpSTEgKCBvME8wT28wMCBbICd0aHVtYm5haWwnIF0gKQogICBpMUlpMSA9IEkxMUkxaTFJaUkxICggbzBPME9vMDAgWyAnZmFuYXJ0JyBdICkKICAgSWkxSUkxSUlpSUlpaSA9IGRpY3QgKCAoIGsgLCB2ICkgZm9yIGsgLCB2IGluIG8wTzBPbzAwIC4gaXRlcml0ZW1zICggKSBpZiBub3QgdiA9PSAnMCcgb3Igbm90IHYgPT0gLSAxIG9yIHYgPT0gJycgKQogICBJaTFJSTFJSWlJSWlpIC4gcG9wICggImZpbGUiICwgTm9uZSApCiAgIGlmIG8wTzBPbzAwIFsgJ2ZpbGV0eXBlJyBdID09ICdmaWxlJyA6CiAgICBpZiBwbGF5bGlzdCA6CiAgICAgb29vb28wMG8wTyAoIGlJSTFJaTFpaTExICwgdXJsICwgcXVldWVWaWRlbyA9ICcxJyApCiAgICAgY29udGludWUKICAgIGVsc2UgOgogICAgIElpaWlJMTFJICggdXJsICwgaUlJMUlpMWlpMTEgLCBJMTFpSSAsIGkxSWkxICwgJycgLCAnJyAsICcnICwgJycgLCBOb25lICwgJycgLCB0b3RhbCA9IGxlbiAoIGkxaUkxMTFpIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSApICwgYWxsaW5mbyA9IElpMUlJMUlJaUlJaWkgKQogICAgIGlmIDEwMCAtIDEwMDogTzAwTyAvIG9vME9vTwogICAgIGlmIG8wTzBPbzAwIFsgJ3R5cGUnIF0gYW5kIG8wTzBPbzAwIFsgJ3R5cGUnIF0gPT0gJ3R2c2hvdycgOgogICAgICB4Ym1jcGx1Z2luIC4gc2V0Q29udGVudCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsICd0dnNob3dzJyApCiAgICAgZWxpZiBvME8wT28wMCBbICdlcGlzb2RlJyBdID4gMCA6CiAgICAgIHhibWNwbHVnaW4gLiBzZXRDb250ZW50ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgJ2VwaXNvZGVzJyApCiAgICAgIGlmIDc0IC0gNzQ6IGkxMUlpSTFJSSAuIE8wME8gLSBJSTFpaUkxaWkxaWlpIC0gSTFJaSAuIE8wMDAwTwogICBlbHNlIDoKICAgIE9PME9vT29PMDAgKCBpSUkxSWkxaWkxMSAsIHVybCAsIDUzICwgSTExaUkgLCBpMUlpMSAsICcnICwgJycgLCAnJyAsICcnICwgYWxsaW5mbyA9IElpMUlJMUlJaUlJaWkgKQogIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiAgaWYgNDEgLSA0MTogT29vME9vT28wT09PTyAqIE8wMDAwTyArIE8wMG9vMG8KZGVmIElpaWlJMTFJICggdXJsICwgbmFtZSAsIGljb25pbWFnZSAsIGZhbmFydCAsIGRlc2NyaXB0aW9uICwgZ2VucmUgLCBkYXRlICwgc2hvd2NvbnRleHQgLCBwbGF5bGlzdCAsIHJlZ2V4cyAsIHRvdGFsICwgc2V0Q29va2llID0gIiIgLCBhbGxpbmZvID0geyB9ICkgOgogaWYgMTAwIC0gMTAwOiBJaSAtIElJMWlpSTFpaTFpaWkgKiBPT29Pb08wbzBvME9PCiBvMG9vT08wMDBPb28gPSBbIF0KIE9vT28wTyA9IE9vMDBPIC4gZ2V0U2V0dGluZyAoICdwYXJlbnRhbGJsb2NrZWQnICkKIE9vT28wTyA9IE9vT28wTyA9PSAidHJ1ZSIKIE8wME9PTzAwID0gT28wME8gLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZHBpbicgKQogaWYgMjcgLSAyNzogSUlJSQogaWYgbGVuICggTzAwT09PMDAgKSA+IDAgOgogIGlmIE9vT28wTyA6CiAgIG8wb29PTzAwME9vbyAuIGFwcGVuZCAoICggJ0Rpc2FibGUgUGFyZW50YWwgQmxvY2snICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NTUmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogIGVsc2UgOgogICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdFbmFibGUgUGFyZW50YWwgQmxvY2snICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NTYmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICBpZiA3NiAtIDc2OiBpaWlJMWlpSTFpCiB0cnkgOgogIG5hbWUgPSBuYW1lIC4gZW5jb2RlICggJ3V0Zi04JyApCiBleGNlcHQgOiBwYXNzCiBpaU8wT29Pb28wID0gVHJ1ZQogT28wTzAwT08wMG9vID0gRmFsc2UKIGlmIHJlZ2V4cyA6CiAgT08wb28gPSAnMTcnCiAgaWYgJ2xpc3RyZXBlYXQnIGluIHJlZ2V4cyA6CiAgIE9vME8wME9PMDBvbyA9IFRydWUKICAgaWYgODYgLSA4Njogb28wMG9Pb08wbzBvIC8gTzAwME9vbzBvME9PbyAlIEkxSWkKICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmICggYW55ICggeCBpbiB1cmwgZm9yIHggaW4gT09vbzBPICkgYW5kIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSApIG9yIHVybCAuIGVuZHN3aXRoICggJyZtb2RlPTE5JyApIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyZtb2RlPTE5JyAsICcnICkKICBPTzBvbyA9ICcxOScKICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCBDdXJyZW50bHkgUGxheWluZyEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIxJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiBlbGlmIHVybCAuIGVuZHN3aXRoICggJyZtb2RlPTE4JyApIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyZtb2RlPTE4JyAsICcnICkKICBPTzBvbyA9ICcxOCcKICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIzJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgaWYgT28wME8gLiBnZXRTZXR0aW5nICggJ2RsYXVkaW9vbmx5JyApID09ICd0cnVlJyA6CiAgIG8wb29PTzAwME9vbyAuIGFwcGVuZCAoICggJyEhRG93bmxvYWQgW0NPTE9SIHNlYWJsdWVdQXVkaW8hIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yNCZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBzdGFydHN3aXRoICggJ21hZ25ldDo/eHQ9JyApIDoKICBpZiAnJicgaW4gdXJsIGFuZCBub3QgJyZhbXA7JyBpbiB1cmwgOgogICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyYnICwgJyZhbXA7JyApCiAgdXJsID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5wdWxzYXIvcGxheT91cmk9JyArIHVybAogIE9PMG9vID0gJzEyJwogZWxzZSA6CiAgT08wb28gPSAnMTInCiAgbzBvb09PMDAwT29vIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogaWYgJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgaW4gdXJsIDoKICBJSTFpMTExMTEgPSB1cmwgLiByZXBsYWNlICggJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgLCAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0nICkKICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICchIURvd25sb2FkIFtDT0xPUiBibHVlXUF1ZGlvISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjQmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJSTFpMTExMTEgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIE8wMDBPT09vME8gPSBzeXMgLiBhcmd2IFsgMCBdICsgIj8iCiBJMTExSWlpaTFJSWlJID0gRmFsc2UKIGlmIHBsYXlsaXN0IDoKICBpZiBPbzAwTyAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgYW5kICckJExTUGxheU9ubHlPbmUkJCcgbm90IGluIHBsYXlsaXN0IFsgMCBdIDoKICAgTzAwME9PT28wTyArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIE9PMG9vCiAgZWxzZSA6CiAgIE8wMDBPT09vME8gKz0gIm1vZGU9MTMmbmFtZT0lcyZwbGF5bGlzdD0lcyIgJSAoIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKSApCiAgIG5hbWUgPSBuYW1lICsgJ1tDT0xPUiBtYWdlbnRhXSAoJyArIHN0ciAoIGxlbiAoIHBsYXlsaXN0ICkgKSArICcgaXRlbXMgKVsvQ09MT1JdJwogICBJMTExSWlpaTFJSWlJID0gVHJ1ZQogZWxzZSA6CiAgTzAwME9PT28wTyArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIE9PMG9vCiBpZiByZWdleHMgOgogIE8wMDBPT09vME8gKz0gIiZyZWdleHM9IiArIHJlZ2V4cwogaWYgbm90IHNldENvb2tpZSA9PSAnJyA6CiAgTzAwME9PT28wTyArPSAiJnNldENvb2tpZT0iICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHNldENvb2tpZSApCiBpZiBpY29uaW1hZ2UgYW5kIG5vdCBpY29uaW1hZ2UgPT0gJycgOgogIE8wMDBPT09vME8gKz0gIiZpY29uaW1hZ2U9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKQogIGlmIDQ0IC0gNDQ6IE9Pb09vTzBvMG8wT08gKiBPMDAwME8gKyBJaQogaWYgZGF0ZSA9PSAnJyA6CiAgZGF0ZSA9IE5vbmUKIGVsc2UgOgogIGRlc2NyaXB0aW9uICs9ICdcblxuRGF0ZTogJXMnICUgZGF0ZQogSWlJMUkgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKQogaWYgMzggLSAzODogaWlJIC0gSTFJaSAlIE9vbzBPb09vME9PT08gKyBvT08gKyBvTzAwb29vMG8wT08gLyBpMTFJaUkxSUkKIGlmIGFsbGluZm8gPT0gTm9uZSBvciBsZW4gKCBhbGxpbmZvICkgPCAxIDoKICBJaUkxSSAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSB7ICJUaXRsZSIgOiBuYW1lICwgIlBsb3QiIDogZGVzY3JpcHRpb24gLCAiR2VucmUiIDogZ2VucmUgLCAiZGF0ZWFkZGVkIiA6IGRhdGUgfSApCiBlbHNlIDoKICBJaUkxSSAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSBhbGxpbmZvICkKIElpSTFJIC4gc2V0UHJvcGVydHkgKCAiRmFuYXJ0X0ltYWdlIiAsIGZhbmFydCApCiBpZiA2NSAtIDY1OiBJSTFpaUkxaWkxaWlpCiBpZiAoIG5vdCBJMTExSWlpaTFJSWlJICkgYW5kIG5vdCBhbnkgKCB4IGluIHVybCBmb3IgeCBpbiBJaUkxaWkxSTExaUkgKSBhbmQgbm90ICckUExBWUVSUFJPWFkkPScgaW4gdXJsIDoKICBpZiByZWdleHMgOgogICBpZiA0NyAtIDQ3OiBPMDAwME8gJSBPMDAwT29vMG8wT09vIC0gSWkgLyBvbzBPb08gJSBPb28wT29PbzBPT09PICogb28wMG9Pb08wbzBvCiAgIGlmICckcHlGdW5jdGlvbjpwbGF5bWVkaWEoJyBub3QgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggcmVnZXhzICkgYW5kICdub3RwbGF5YWJsZScgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIGFuZCAnbGlzdHJlcGVhdCcgbm90IGluIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIHJlZ2V4cyApIDoKICAgIGlmIDE2IC0gMTY6IE9vbzBPb09vME9PT08gLyBPMDBvbzBvIC0gTzAwb28wbyArIGkxMUlpSTFJSSAtIElpaUlJaUlJICUgaWlpSTFpaUkxaQogICAgSWlJMUkgLiBzZXRQcm9wZXJ0eSAoICdJc1BsYXlhYmxlJyAsICd0cnVlJyApCiAgZWxzZSA6CiAgIElpSTFJIC4gc2V0UHJvcGVydHkgKCAnSXNQbGF5YWJsZScgLCAndHJ1ZScgKQogZWxzZSA6CiAgaTFpSWlpICggJ05PVCBzZXR0aW5nIGlzcGxheWFibGUnICsgdXJsICkKIGlmIHNob3djb250ZXh0IDoKICBpZiAxNiAtIDE2OiBvb28KICBpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIG8wb29PTzAwME9vbyAuIGFwcGVuZCAoCiAoICdSZW1vdmUgZnJvbSBQbGFuZXRhIEZhdm9yaXRlcycgLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT02Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKQogKQogIGVsaWYgbm90IG5hbWUgaW4gSWlJaWlpSSA6CiAgIHRyeSA6CiAgICBJMWlpaTFpSTFpaWkgPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSApCiApCiAgIGV4Y2VwdCA6CiAgICBJMWlpaTFpSTFpaWkgPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgLiBlbmNvZGUgKCAidXRmLTgiICkgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgLiBlbmNvZGUgKCAidXRmLTgiICkgKSApCiApCiAgIGlmIHBsYXlsaXN0IDoKICAgIEkxaWlpMWlJMWlpaSArPSAncGxheWxpc3Q9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApCiAgIGlmIHJlZ2V4cyA6CiAgICBJMWlpaTFpSTFpaWkgKz0gIiZyZWdleHM9IiArIHJlZ2V4cwogICBvMG9vT08wMDBPb28gLiBhcHBlbmQgKCAoICdBZGQgdG8gUGxhbmV0YSBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzKScgJSBJMWlpaTFpSTFpaWkgKSApCiAgSWlJMUkgLiBhZGRDb250ZXh0TWVudUl0ZW1zICggbzBvb09PMDAwT29vICkKIHRyeSA6CiAgaWYgbm90IHBsYXlsaXN0IGlzIE5vbmUgOgogICBpZiBPbzAwTyAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICAgaTExaTFJMUlpaTEgPSBuYW1lIC4gc3BsaXQgKCAnKSAnICkgWyAxIF0KICAgIGkxSWkxSWlJID0gWwogKCAnUGxheSAnICsgaTExaTFJMUlpaTEgKyAnIFBsYXlMaXN0JyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTEzJm5hbWU9JXMmcGxheWxpc3Q9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggaTExaTFJMUlpaTEgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApICkgKQogXQogICAgSWlJMUkgLiBhZGRDb250ZXh0TWVudUl0ZW1zICggaTFJaTFJaUkgKQogZXhjZXB0IDogcGFzcwogaWYgMTEgLSAxMTogb09PICogaTExSWlJMUlJIC0gb28wT29PICUgSUlJSSAtIE8wMDAwTwogaWlPME9vT29vMCA9IHhibWNwbHVnaW4gLiBhZGREaXJlY3RvcnlJdGVtICggaGFuZGxlID0gaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgdXJsID0gTzAwME9PT28wTyAsIGxpc3RpdGVtID0gSWlJMUkgLCB0b3RhbEl0ZW1zID0gdG90YWwgLCBpc0ZvbGRlciA9IE9vME8wME9PMDBvbyApCiBpZiAzMyAtIDMzOiBJaWlJSWlJSSAvIE9Pb09vTzBvMG8wT08gLiBPMDAwT29vMG8wT09vIC0gaWlJCiBpZiA0MSAtIDQxOiBPb28wT29PbzBPT09PICsgaWlJIC4gaWlJICUgb28wMG9Pb08wbzBvCiByZXR1cm4gaWlPME9vT29vMAogaWYgNiAtIDY6IE8wMG9vMG8gLyBJaWlJSWlJSSAlIElJSUkgLSBJSTFpaUkxaWkxaWlpIC8gb28wT29PIC0gSWkKIGlmIDggLSA4OiBJMUlpCmRlZiBvME9vT09vT29vMCAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBzZXRyZXNvbHZlZCA9IFRydWUgLCByZWcgPSBOb25lICkgOgogcHJpbnQgJ3BsYXlzZXRyZXNvbHZlZCcgLCB1cmwgLCBzZXRyZXNvbHZlZAogaWYgdXJsID09IE5vbmUgOgogIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiAgcmV0dXJuCiBpZiBzZXRyZXNvbHZlZCA6CiAgSUlJMTFpSTFpaTExID0gVHJ1ZQogIGlmICckJExTRGlyZWN0JCQnIGluIHVybCA6CiAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJCRMU0RpcmVjdCQkJyAsICcnICkKICAgSUlJMTFpSTFpaTExID0gRmFsc2UKICBpZiByZWcgYW5kICdub3RwbGF5YWJsZScgaW4gcmVnIDoKICAgSUlJMTFpSTFpaTExID0gRmFsc2UKICAgaWYgNzkgLSA3OTogSUkxaWlJMWlpMWlpaSAtIE9Pb09vTzBvMG8wT08KICBJaUkxSSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSApCiAgSWlJMUkgLiBzZXRJbmZvICggdHlwZSA9ICdWaWRlbycgLCBpbmZvTGFiZWxzID0geyAnVGl0bGUnIDogbmFtZSB9ICkKICBJaUkxSSAuIHNldFByb3BlcnR5ICggIklzUGxheWFibGUiICwgInRydWUiICkKICBJaUkxSSAuIHNldFBhdGggKCB1cmwgKQogIGlmIG5vdCBJSUkxMWlJMWlpMTEgOgogICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCB1cmwgKQogIGVsc2UgOgogICB4Ym1jcGx1Z2luIC4gc2V0UmVzb2x2ZWRVcmwgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCBUcnVlICwgSWlJMUkgKQogICBpZiA4MCAtIDgwOiBPMDBvbzBvIC0gaWlJICUgTzAwb28wbwogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ1hCTUMuUnVuUGx1Z2luKCcgKyB1cmwgKyAnKScgKQogIGlmIDcwIC0gNzA6IGkxMUlpSTFJSSAqIE8wME8KICBpZiAzMCAtIDMwOiBPMDAwME8gKiBJSTFpaUkxaWkxaWlpCiAgaWYgNzAgLSA3MDogTzAwME9vbzBvME9PbyAuIG9vME9vTyArIGlpSSAvIE8wME8gJSBJSTFpaUkxaWkxaWlpICsgTzAwMDBPCiAgaWYgMzggLSAzODogTzAwTwpkZWYgSTFJaWlpSUlJSUkxICggbGluayApIDoKIElpSSA9IHVybGxpYiAuIHVybG9wZW4gKCBsaW5rICkKIE9vT09vTzBvMCA9IElpSSAuIHJlYWQgKCApCiBJaUkgLiBjbG9zZSAoICkKIGkxMUkxSTExaWkxID0gT29PT29PMG8wIC4gc3BsaXQgKCAiSmV0enQiICkKIG9vTzBPT28wTzAgPSBpMTFJMUkxMWlpMSBbIDEgXSAuIHNwbGl0ICggJ3Byb2dyYW1tL2RldGFpbC5waHA/Y29uc3RfaWQ9JyApCiBpSUkxSUlJaSA9IG9vTzBPT28wTzAgWyAxIF0gLiBzcGxpdCAoICc8YnIgLz48YSBocmVmPSIvJyApCiBJaWkxSWlJMTFJaUkxSWkxID0gaUlJMUlJSWkgWyAwIF0gWyA0MCA6IGxlbiAoIGlJSTFJSUlpIFsgMCBdICkgXQogT08wTzBvbyA9IG9vTzBPT28wTzAgWyAyIF0gLiBzcGxpdCAoICI8L2E+PC9wPjwvZGl2PiIgKQogaTExMTFpSWkxaWlpID0gT08wTzBvbyBbIDAgXSBbIDE3IDogbGVuICggT08wTzBvbyBbIDAgXSApIF0KIGkxMTExaUlpMWlpaSA9IGkxMTExaUlpMWlpaSAuIGVuY29kZSAoICd1dGYtOCcgKQogcmV0dXJuICIgIC0gIiArIGkxMTExaUlpMWlpaSArICIgLSAiICsgSWlpMUlpSTExSWlJMUlpMQogaWYgNzUgLSA3NTogSUlJSSArIG9PMDBvb28wbzBPTyArIElJMWlpSTFpaTFpaWkgKiBpMTFJaUkxSUkgLSBJaQogaWYgNjAgLSA2MDogb09PIC4gb28wMG9Pb08wbzBvIC8gaWlJICUgb29vCmRlZiBJSTFJSTFJMTEgKCB1cmwgLCByZWdleCApIDoKIE9PT08wID0gTzBvICggdXJsICkKIHRyeSA6CiAgaUlpSSA9IHJlIC4gZmluZGFsbCAoIHJlZ2V4ICwgT09PTzAgKSBbIDAgXQogIHJldHVybiBpSWlJCiBleGNlcHQgOgogIGkxaUlpaSAoICdyZWdleCBmYWlsZWQnICkKICBpMWlJaWkgKCByZWdleCApCiAgcmV0dXJuCiAgaWYgNzYgLSA3NjogSWkgKiBPb28wT29PbzBPT09PICogb08wMG9vbzBvME9PICUgSUkxaWlJMWlpMWlpaSAqIE8wMDAwTyArIE8wMDAwTwogIGlmIDMxIC0gMzE6IG9vME9vTwogIGlmIDIgLSAyOiBpMTFJaUkxSUkgLyBvb28KZGVmIG8wTzBvMG9Pb08wICggZCAsIHJvb3QgPSAicm9vdCIgLCBuZXN0ZWQgPSAwICkgOgogaWYgNzcgLSA3NzogSWkgKyBPMDBPIC0gSWkgLiBPMDBvbzBvICogT09vT29PMG8wbzBPTwogaWkxaWlJSUlpaSA9IGxhbWJkYSBpaWlJaTFJMUkgOiAnPCcgKyBpaWlJaTFJMUkgKyAnPicKIEkxSWkxaUkgPSBsYW1iZGEgaWlpSWkxSTFJIDogJzwvJyArIGlpaUlpMUkxSSArICc+XG4nCiBpZiA2NiAtIDY2OiBPMDAwT29vMG8wT09vICsgT09vT29PMG8wbzBPTwogT08wb08wbyA9IGxhbWJkYSBJSTFJMTFJMUlJSTEgLCBJMTFJMTEgOiBJMTFJMTEgKyBpaTFpaUlJSWlpICggSWlJSSApICsgc3RyICggSUkxSTExSTFJSUkxICkgKyBJMUlpMWlJICggSWlJSSApCiBJMTFJMTEgPSBpaTFpaUlJSWlpICggcm9vdCApICsgJ1xuJyBpZiByb290IGVsc2UgIiIKIGlmIDcgLSA3OiBPMDAwME8gLyBPT29Pb08wbzBvME9PCiBmb3IgSWlJSSAsIEkxbzBPIGluIGQgLiBpdGVyaXRlbXMgKCApIDoKICBJMTExMTFpaTFpID0gdHlwZSAoIEkxbzBPICkKICBpZiBuZXN0ZWQgPT0gMCA6IElpSUkgPSAncmVnZXgnCiAgaWYgSTExMTExaWkxaSBpcyBsaXN0IDoKICAgZm9yIElJMUkxMUkxSUlJMSBpbiBJMW8wTyA6CiAgICBJSTFJMTFJMUlJSTEgPSBlc2NhcGUgKCBJSTFJMTFJMUlJSTEgKQogICAgSTExSTExID0gT08wb08wbyAoIElJMUkxMUkxSUlJMSAsIEkxMUkxMSApCiAgICBpZiAxNiAtIDE2OiBPMDBPICsgb29vIC4gb09PIC8gSUlJSQogIGlmIEkxMTExMWlpMWkgaXMgZGljdCA6CiAgIEkxMUkxMSA9IE9PMG9PMG8gKCAnXG4nICsgbzBPMG8wb09vTzAgKCBJMW8wTyAsIE5vbmUgLCBuZXN0ZWQgKyAxICkgLCBJMTFJMTEgKQogIGlmIEkxMTExMWlpMWkgaXMgbm90IGxpc3QgYW5kIEkxMTExMWlpMWkgaXMgbm90IGRpY3QgOgogICBpZiBub3QgSTFvME8gaXMgTm9uZSA6IEkxbzBPID0gZXNjYXBlICggSTFvME8gKQogICBpZiA4NiAtIDg2OiBJSTFpMTExaUkxaWkgKyBJMUlpICogb08wMG9vbzBvME9PCiAgIGlmIEkxbzBPIGlzIE5vbmUgOgogICAgSTExSTExID0gT08wb08wbyAoIEkxbzBPICwgSTExSTExICkKICAgZWxzZSA6CiAgICBpZiA1NyAtIDU3OiBPMDAwME8gLiBJMUlpIC4gT09vT29PMG8wbzBPTwogICAgSTExSTExID0gT08wb08wbyAoIEkxbzBPIC4gZW5jb2RlICggInV0Zi04IiApICwgSTExSTExICkKICAgIGlmIDM1IC0gMzU6IG9PMDBvb28wbzBPTwogSTExSTExICs9IEkxSWkxaUkgKCByb290ICkgaWYgcm9vdCBlbHNlICIiCiBpZiA0MCAtIDQwOiBJSUlJIC4gSWkKIHJldHVybiBJMTFJMTEKeGJtY3BsdWdpbiAuIHNldENvbnRlbnQgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCAnbW92aWVzJyApCmlmIDYyIC0gNjI6IElpaUlJaUlJICogaTExSWlJMUlJCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9VTlNPUlRFRCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9MQUJFTCApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9EQVRFICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIHhibWNwbHVnaW4gLiBhZGRTb3J0TWV0aG9kICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgeGJtY3BsdWdpbiAuIFNPUlRfTUVUSE9EX0dFTlJFICkKZXhjZXB0IDoKIHBhc3MKIGlmIDc5IC0gNzk6IE9vbzBPb09vME9PT08gJSBPb28wT29PbzBPT09PICogb29vIC0gT29vME9vT28wT09PTyAqIG9vbwppSUlpID0gSTFpaTExSWkxSTFJICggKQppZiAyNiAtIDI2OiBJSTFpMTExaUkxaWkgKiBpaUkKSWlJID0gTm9uZQppSUkxSWkxaWkxMSA9IE5vbmUKT08wb28gPSBOb25lCmlJaUkxaUlJaWkxMUkgPSBOb25lCk9vMCA9IE5vbmUKaTFJaTEgPSBpaTFpSTExMWlJaTEKaUlpSTFpSUlpaTExSSA9IE5vbmUKbzBvbyA9IE5vbmUKaUkxaTFpSUlJMUlJID0gTm9uZQppZiA0NCAtIDQ0OiBJaWlJSWlJSSArIGkxMUlpSTFJSSAtIElJSUkgKiBJSUlJIC8gT09vT29PMG8wbzBPTwp0cnkgOgogSWlJID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggaUlJaSBbICJ1cmwiIF0gKSAuIGRlY29kZSAoICd1dGYtOCcgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaUlJMUlpMWlpMTEgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBpSUlpIFsgIm5hbWUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogT28wID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggaUlJaSBbICJpY29uaW1hZ2UiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaTFJaTEgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBpSUlpIFsgImZhbmFydCIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBPTzBvbyA9IGludCAoIGlJSWkgWyAibW9kZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBpSWlJMWlJSWlpMTFJID0gZXZhbCAoIHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIGlJSWkgWyAicGxheWxpc3QiIF0gKSAuIHJlcGxhY2UgKCAnfHwnICwgJywnICkgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogbzBvbyA9IGludCAoIGlJSWkgWyAiZmF2X21vZGUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaUkxaTFpSUlJMUlJID0gaUlJaSBbICJyZWdleHMiIF0KZXhjZXB0IDoKIHBhc3MKb08wMDBvbzAwID0gJycKdHJ5IDoKIG9PMDAwb28wMCA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIGlJSWkgWyAicGxheWl0ZW0iIF0gKQpleGNlcHQgOgogcGFzcwogaWYgNyAtIDc6IElJMWkxMTFpSTFpaQppMWlJaWkgKCAiTW9kZTogIiArIHN0ciAoIE9PMG9vICkgKQppZiA0MyAtIDQzOiBJaSAtIG9vbyAlIG9vMDBvT29PMG8wbyAlIG9vME9vTyAvIG9vbwppZiA5MyAtIDkzOiBPT29Pb08wbzBvME9PICsgSWlpSUlpSUkKaWYgbm90IElpSSBpcyBOb25lIDoKIGkxaUlpaSAoICJVUkw6ICIgKyBzdHIgKCBJaUkgLiBlbmNvZGUgKCAndXRmLTgnICkgKSApCmkxaUlpaSAoICJOYW1lOiAiICsgc3RyICggaUlJMUlpMWlpMTEgKSApCmlmIDg4IC0gODg6IG9vMDBvT29PMG8wbyAtIE9Pb09vTzBvMG8wT08KaWYgbm90IG9PMDAwb28wMCA9PSAnJyA6CiBJaUlJSTExMWkgPSBvTzBPTyAoICcnICwgZGF0YSA9IG9PMDAwb28wMCApCiBpSUkxSWkxaWkxMSAsIElpSSAsIGlJMWkxaUlJSTFJSSA9IGlpaWkgKCBJaUlJSTExMWkgLCBOb25lICwgZG9udExpbmsgPSBUcnVlICkKIE9PMG9vID0gMTE3CmlmIE9PMG9vID09IE5vbmUgOgogaTFpSWlpICggImdldFNvdXJjZXMiICkKIEkxSWlJMWlpMWkxaTEgKCApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogX19hZGRvbl9fID0geGJtY2FkZG9uIC4gQWRkb24gKCApCiBfX2FkZG9ubmFtZV9fID0gX19hZGRvbl9fIC4gZ2V0QWRkb25JbmZvICggJ25hbWUnICkKIGlmIDExIC0gMTE6IG9PMDBvb28wbzBPTyAqIGkxMUlpSTFJSSAlIE9vbzBPb09vME9PT08gLSBJSTFpaUkxaWkxaWlpIC0gb28wMG9Pb08wbzBvCiBvb08wMCA9ICJFbCBhdXRlbnRpY28gQWRkb24gUGxhbmV0YSB5YSBlc3TDoSBkZSB2dWVsdGEuIgogSTFJMTFpMSA9ICJMb3MgcXVlIGhpY2ltb3MgcGxhbmV0YSBubyBlc3RhbW9zIGRlIGFjdWVyZG8iCiBvT09vT08wbzAgPSAiY29uIGxhIGRlY2lzacOzbiB0b21hZGEgcG9yIHVubyBkZSBsb3MgbWllbWJyb3MgZW4gaGFjZXJsbyBwcml2YWRvLiIKIGlmIDQxIC0gNDE6IE8wME8KIHhibWNndWkgLiBEaWFsb2cgKCApIC4gb2sgKCBfX2FkZG9ubmFtZV9fICwgb29PMDAgLCBJMUkxMWkxICwgb09Pb09PMG8wICkKIGlmIDEzIC0gMTM6IE8wME8gLyBvTzAwb29vMG8wT08gLSBpaWlJMWlpSTFpCmVsaWYgT08wb28gPT0gMSA6CiBpMWlJaWkgKCAiZ2V0RGF0YSIgKQogT09PTzAgPSBOb25lCiBpZiA0MyAtIDQzOiBvbzAwb09vTzBvMG8gKyBJaSAlIE9vbzBPb09vME9PT08gKiBpaWlJMWlpSTFpIC8gSWlpSUlpSUkgLiBJaQogaWYgaUkxaTFpSUlJMUlJIGFuZCBsZW4gKCBpSTFpMWlJSUkxSUkgKSA+IDAgOgogIE9PT08wICwgaUlJaUkxaSA9IE8wb08gKCBpSTFpMWlJSUkxSUkgLCBJaUkgKQogIGlmIDMwIC0gMzA6IElpaUlJaUlJICsgb09PIC8gSUkxaWlJMWlpMWlpaSArIE9Pb09vTzBvMG8wT08gKiBPMDAwT29vMG8wT09vCiAgaWYgMjEgLSAyMTogaTExSWlJMUlJICsgSUlJSSAtIG9PTyAtIG9PTyAqIElpICogaWlpSTFpaUkxaQogIGlmIE9PT08wIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIG9yIE9PT08wIC4gc3RhcnRzd2l0aCAoICdzbWInICkgb3IgT09PTzAgLiBzdGFydHN3aXRoICggJ25mcycgKSBvciBPT09PMCAuIHN0YXJ0c3dpdGggKCAnLycgKSA6CiAgIElpSSA9IE9PT08wCiAgIE9PT08wID0gTm9uZQogICBpZiAxMiAtIDEyOiBPMDBvbzBvICogT09vT29PMG8wbzBPTwogICBpZiA3OSAtIDc5OiBpaWlJMWlpSTFpIC4gTzAwMDBPICogSTFJaQogT29vb29vME9PICggSWlJICwgaTFJaTEgLCBPT09PMCApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgNDkgLSA0OTogSUlJSSAvIElJMWlpSTFpaTFpaWkKIGlmIDgxIC0gODE6IG9vMDBvT29PMG8wbyAlIGkxMUlpSTFJSSAqIG9vMDBvT29PMG8wbyAuIGlpSSArIElpaUlJaUlJICogTzAwMDBPCmVsaWYgT08wb28gPT0gMiA6CiBpMWlJaWkgKCAiZ2V0Q2hhbm5lbEl0ZW1zIiApCiBJMTFpMUlpICggaUlJMUlpMWlpMTEgLCBJaUkgLCBpMUlpMSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgOSAtIDk6IG9vME9vTwplbGlmIE9PMG9vID09IDMgOgogaTFpSWlpICggImdldFN1YkNoYW5uZWxJdGVtcyIgKQogT08gKCBpSUkxSWkxaWkxMSAsIElpSSAsIGkxSWkxICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA0NiAtIDQ2OiBPb28wT29PbzBPT09PICUgSWlpSUlpSUkgLyBpaWlJMWlpSTFpIC8gSUkxaTExMWlJMWlpICUgT29vME9vT28wT09PTwplbGlmIE9PMG9vID09IDQgOgogaTFpSWlpICggImdldEZhdm9yaXRlcyIgKQogb28wMCAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAxOCAtIDE4OiBPMDAwT29vMG8wT09vICUgT29vME9vT28wT09PTyAtIEkxSWkgKiBpaWlJMWlpSTFpIC4gb29vCmVsaWYgT08wb28gPT0gNSA6CiBpMWlJaWkgKCAiYWRkRmF2b3JpdGUiICkKIHRyeSA6CiAgaUlJMUlpMWlpMTEgPSBpSUkxSWkxaWkxMSAuIHNwbGl0ICggJ1xcICcgKSBbIDEgXQogZXhjZXB0IDoKICBwYXNzCiB0cnkgOgogIGlJSTFJaTFpaTExID0gaUlJMUlpMWlpMTEgLiBzcGxpdCAoICcgIC0gJyApIFsgMCBdCiBleGNlcHQgOgogIHBhc3MKIGlpMTExSUkxICggaUlJMUlpMWlpMTEgLCBJaUkgLCBPbzAgLCBpMUlpMSAsIG8wb28gKQogaWYgNDcgLSA0NzogT09vT29PMG8wbzBPTyAqIEkxSWkgLiBvTzAwb29vMG8wT08KZWxpZiBPTzBvbyA9PSA2IDoKIGkxaUlpaSAoICJybUZhdm9yaXRlIiApCiB0cnkgOgogIGlJSTFJaTFpaTExID0gaUlJMUlpMWlpMTEgLiBzcGxpdCAoICdcXCAnICkgWyAxIF0KIGV4Y2VwdCA6CiAgcGFzcwogdHJ5IDoKICBpSUkxSWkxaWkxMSA9IGlJSTFJaTFpaTExIC4gc3BsaXQgKCAnICAtICcgKSBbIDAgXQogZXhjZXB0IDoKICBwYXNzCiBJMTFpSTExSTFJICggaUlJMUlpMWlpMTEgKQogaWYgODMgLSA4MzogTzAwMDBPIC0gSTFJaSAvIG9vMDBvT29PMG8wbwplbGlmIE9PMG9vID09IDcgOgogU3BvcnRzRGV2aWwgKCApCiBEdXRjaCAoICkKIGlmIDM0IC0gMzQ6IElJMWlpSTFpaTFpaWkgKyBvT08gLyBPMDAwME8gKyBJMUlpICUgT29vME9vT28wT09PTwplbGlmIE9PMG9vID09IDggOgogaTFpSWlpICggInJtU291cmNlIiApCiBpaSAoIGlJSTFJaTFpaTExICkKIGlmIDgwIC0gODA6IG9PMDBvb28wbzBPTyAtIGlpSQplbGlmIE9PMG9vID09IDkgOgogaTFpSWlpICggImRvd25sb2FkX2ZpbGUiICkKIG9vSTFJMSAoIGlJSTFJaTFpaTExICwgSWlJICkKIGlmIDExIC0gMTE6IElJMWkxMTFpSTFpaSAqIElpaUlJaUlJCmVsaWYgT08wb28gPT0gMTAgOgogaTFpSWlpICggImdldENvbW11bml0eVNvdXJjZXMiICkKIE9vb08wT09vMCAoICkKIGlmIDEyIC0gMTI6IGlpaUkxaWlJMWkgLSBJMUlpIC0gSUkxaWlJMWlpMWlpaQplbGlmIE9PMG9vID09IDExIDoKIGkxaUlpaSAoICJhZGRTb3VyY2UiICkKIG9Pb28wbzBPb08gKCBJaUkgKQogaWYgMyAtIDM6IEkxSWkgLiBJSUlJICUgT29vME9vT28wT09PTwplbGlmIE9PMG9vID09IDEyIDoKIGkxaUlpaSAoICJzZXRSZXNvbHZlZFVybCIgKQogaWYgbm90IElpSSAuIHN0YXJ0c3dpdGggKCAicGx1Z2luOi8vcGx1Z2luIiApIG9yIG5vdCBhbnkgKCB4IGluIElpSSBmb3IgeCBpbiBJaUkxaWkxSTExaUkgKSA6CiAgSUlJMTFpSTFpaTExID0gVHJ1ZQogIGlmICckJExTRGlyZWN0JCQnIGluIElpSSA6CiAgIElpSSA9IElpSSAuIHJlcGxhY2UgKCAnJCRMU0RpcmVjdCQkJyAsICcnICkKICAgSUlJMTFpSTFpaTExID0gRmFsc2UKICBpSWlJID0geGJtY2d1aSAuIExpc3RJdGVtICggcGF0aCA9IElpSSApCiAgaWYgbm90IElJSTExaUkxaWkxMSA6CiAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIElpSSApCiAgZWxzZSA6CiAgIHhibWNwbHVnaW4gLiBzZXRSZXNvbHZlZFVybCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIFRydWUgLCBpSWlJICkKIGVsc2UgOgogIGlmIDc4IC0gNzg6IE8wMDBPb28wbzBPT28gJSBJaWlJSWlJSSAtIG9vMDBvT29PMG8wbyAuIG9vMDBvT29PMG8wbyArIElpaUlJaUlJCiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ1hCTUMuUnVuUGx1Z2luKCcgKyBJaUkgKyAnKScgKQogIGlmIDY5IC0gNjk6IE9vbzBPb09vME9PT08gLSBJaQogIGlmIDQ5IC0gNDk6IElpaUlJaUlJICUgSWlpSUlpSUkgLyBJSTFpaUkxaWkxaWlpCmVsaWYgT08wb28gPT0gMTMgOgogaTFpSWlpICggInBsYXlfcGxheWxpc3QiICkKIG9vb29vMDBvME8gKCBpSUkxSWkxaWkxMSAsIGlJaUkxaUlJaWkxMUkgKQogaWYgNSAtIDU6IG9PTyAvIE9vbzBPb09vME9PT08KZWxpZiBPTzBvbyA9PSAxNCA6CiBpMWlJaWkgKCAiZ2V0X3htbF9kYXRhYmFzZSIgKQogb29PMG8wb08wbyAoIElpSSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgMTUgLSAxNTogTzAwME9vbzBvME9PbyArIE8wME8gKiBvb28gLyBJaWlJSWlJSSAtIElpCmVsaWYgT08wb28gPT0gMTUgOgogaTFpSWlpICggImJyb3dzZV94bWxfZGF0YWJhc2UiICkKIG9vTzBvMG9PMG8gKCBJaUkgLCBUcnVlICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA3OCAtIDc4OiBJMUlpCmVsaWYgT08wb28gPT0gMTYgOgogaTFpSWlpICggImJyb3dzZV9jb21tdW5pdHkiICkKIE9vb08wT09vMCAoIElpSSAsIGJyb3dzZSA9IFRydWUgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDgzIC0gODM6IE8wME8gLyBvbzAwb09vTzBvMG8gLSBpaWlJMWlpSTFpIC8gT09vT29PMG8wbzBPTyAuIG9vbwplbGlmIE9PMG9vID09IDE3IG9yIE9PMG9vID09IDExNyA6CiBpMWlJaWkgKCAiZ2V0UmVnZXhQYXJzZWQiICkKIGlmIDU0IC0gNTQ6IG9vMDBvT29PMG8wbyAuIE9Pb09vTzBvMG8wT08gLSBPb28wT29PbzBPT09PIC8gT29vME9vT28wT09PTyAtIElJMWkxMTFpSTFpaSAuIE9vbzBPb09vME9PT08KIE9PT08wID0gTm9uZQogaWYgaUkxaTFpSUlJMUlJIGFuZCAnbGlzdHJlcGVhdCcgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggaUkxaTFpSUlJMUlJICkgOgogIEkxaTEgLCBJaTExaUlJMWkgLCBpMUlpICwgaUkxaTFpSUlJMUlJICwgT09vT09vT28wTzBPMCA9IE8wb08gKCBpSTFpMWlJSUkxSUkgLCBJaUkgKQogIGlmIDYgLSA2OiBvbzBPb08gLiBJSTFpMTExaUkxaWkKICBvMDBvb29vTzAwID0gJycKICBpZiAyMyAtIDIzOiBJSTFpMTExaUkxaWkgKyBvTzAwb29vMG8wT08KICBpZiA4IC0gODogTzAwTyAqIElJMWlpSTFpaTFpaWkgLiBJaSAvIEkxSWkKICBvb29PTzAwbzBvMCA9IGkxSWkgWyAnbmFtZScgXQogIElpaUlpaUlpSTFpID0gaUkxaTFpSUlJMUlJIC4gcG9wICggb29vT08wMG8wbzAgKQogIGlmIDkwIC0gOTA6IE8wME8gLiBvb28gKiBPMDAwME8gLiBvb28gKiBPMDBvbzBvCiAgSWlJID0gJycKICBpbXBvcnQgY29weQogIElJMWlpMWlJaWlpSSA9ICcnCiAgSTFpID0gMAogIGZvciBvMG9vT08wMG8wMG8gaW4gSWkxMWlJSTFpIDoKICAgaWYgNTAgLSA1MDogSTFJaSArIEkxSWkKICAgdHJ5IDoKICAgIEkxaSArPSAxCiAgICBvb2lJMTFpaTExaTExMSA9IGNvcHkgLiBkZWVwY29weSAoIGlJMWkxaUlJSTFJSSApCiAgICBpZiA3IC0gNzogb09PICogb29vICogSUkxaWlJMWlpMWlpaQogICAgT08wb08gPSBJMWkxCiAgICBvME8wT28wMCA9IDAKICAgIGZvciBvME8wT28wMCBpbiByYW5nZSAoIGxlbiAoIG8wb29PTzAwbzAwbyApICkgOgogICAgIGlmIDkyIC0gOTI6IElJMWlpSTFpaTFpaWkgKiBPT29Pb08wbzBvME9PIC8gT09vT29PMG8wbzBPTyAuIElpaUlJaUlJICUgb08wMG9vbzBvME9PIC0gaWlJCiAgICAgaWYgbGVuICggb29pSTExaWkxMWkxMTEgKSA+IDAgOgogICAgICBmb3IgbzBvT28wbzBvbyAsIE8wT09PTzAwMDAgaW4gb29pSTExaWkxMWkxMTEgLiBpdGVyaXRlbXMgKCApIDoKICAgICAgIGlmIE8wT09PTzAwMDAgaXMgbm90IE5vbmUgOgogICAgICAgIGZvciBpaTExSTFJICwgaWlJaWlpaTExIGluIE8wT09PTzAwMDAgLiBpdGVyaXRlbXMgKCApIDoKICAgICAgICAgaWYgaWlJaWlpaTExIGlzIG5vdCBOb25lIDoKICAgICAgICAgIGlmIDQzIC0gNDM6IG9vbyAvIE8wME8KICAgICAgICAgIGlmIDgxIC0gODE6IG9PMDBvb28wbzBPTyArIE8wMG9vMG8gKyBpMTFJaUkxSUkgKyBPT29Pb08wbzBvME9PCiAgICAgICAgICBpZiA0IC0gNDogTzAwME9vbzBvME9PbyAqIG9vME9vTyAvIGlpSQogICAgICAgICAgaWYgMzMgLSAzMzogSUlJSSAqIGkxMUlpSTFJSSAuIE8wME8gKyBJSTFpaUkxaWkxaWlpICsgSWkKICAgICAgICAgIGlmIHR5cGUgKCBpaUlpaWlpMTEgKSBpcyBkaWN0IDoKICAgICAgICAgICBmb3IgbzBPMDAwbyAsIE9vb09PMCBpbiBpaUlpaWlpMTEgLiBpdGVyaXRlbXMgKCApIDoKICAgICAgICAgICAgaWYgT29vT08wIGlzIG5vdCBOb25lIDoKICAgICAgICAgICAgIEkxaWlJaSA9IE5vbmUKICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UgKCBvMG9vT08wMG8wMG8gLCB0dXBsZSApIDoKICAgICAgICAgICAgICB0cnkgOgogICAgICAgICAgICAgICBJMWlpSWkgPSBvMG9vT08wMG8wMG8gWyBvME8wT28wMCBdIC4gZGVjb2RlICggJ3V0Zi04JyApCiAgICAgICAgICAgICAgZXhjZXB0IDoKICAgICAgICAgICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvIFsgbzBPME9vMDAgXQogICAgICAgICAgICAgZWxzZSA6CiAgICAgICAgICAgICAgdHJ5IDoKICAgICAgICAgICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvIC4gZGVjb2RlICggJ3V0Zi04JyApCiAgICAgICAgICAgICAgZXhjZXB0IDoKICAgICAgICAgICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvCiAgICAgICAgICAgICAgIGlmIDM0IC0gMzQ6IEkxSWkKICAgICAgICAgICAgIGlmICdbJyArIG9vb09PMDBvMG8wICsgJy5wYXJhbScgKyBzdHIgKCBvME8wT28wMCArIDEgKSArICddW0RFXScgaW4gT29vT08wIDoKICAgICAgICAgICAgICBPb29PTzAgPSBPb29PTzAgLiByZXBsYWNlICggJ1snICsgb29vT08wMG8wbzAgKyAnLnBhcmFtJyArIHN0ciAoIG8wTzBPbzAwICsgMSApICsgJ11bREVdJyAsIHVuZXNjYXBlICggSTFpaUlpICkgKQogICAgICAgICAgICAgaWlJaWlpaTExIFsgbzBPMDAwbyBdID0gT29vT08wIC4gcmVwbGFjZSAoICdbJyArIG9vb09PMDBvMG8wICsgJy5wYXJhbScgKyBzdHIgKCBvME8wT28wMCArIDEgKSArICddJyAsIEkxaWlJaSApCiAgICAgICAgICAgICBpZiA2NiAtIDY2OiBJSTFpMTExaUkxaWkgLiBpMTFJaUkxSUkgKyBPMDAwME8gLiBvbzBPb08gLSBpaUkgLSBPMDAwME8KICAgICAgICAgICAgIGlmIDY1IC0gNjU6IG9vMDBvT29PMG8wbyArIG9vbyAuIElJMWkxMTFpSTFpaQogICAgICAgICAgZWxzZSA6CiAgICAgICAgICAgSTFpaUlpID0gTm9uZQogICAgICAgICAgIGlmIGlzaW5zdGFuY2UgKCBvMG9vT08wMG8wMG8gLCB0dXBsZSApIDoKICAgICAgICAgICAgdHJ5IDoKICAgICAgICAgICAgIEkxaWlJaSA9IG8wb29PTzAwbzAwbyBbIG8wTzBPbzAwIF0gLiBkZWNvZGUgKCAndXRmLTgnICkKICAgICAgICAgICAgZXhjZXB0IDoKICAgICAgICAgICAgIEkxaWlJaSA9IG8wb29PTzAwbzAwbyBbIG8wTzBPbzAwIF0KICAgICAgICAgICBlbHNlIDoKICAgICAgICAgICAgdHJ5IDoKICAgICAgICAgICAgIEkxaWlJaSA9IG8wb29PTzAwbzAwbyAuIGRlY29kZSAoICd1dGYtOCcgKQogICAgICAgICAgICBleGNlcHQgOgogICAgICAgICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvCiAgICAgICAgICAgaWYgJ1snICsgb29vT08wMG8wbzAgKyAnLnBhcmFtJyArIHN0ciAoIG8wTzBPbzAwICsgMSApICsgJ11bREVdJyBpbiBpaUlpaWlpMTEgOgogICAgICAgICAgICBpZiA2MyAtIDYzOiBvT08gLiBpaWlJMWlpSTFpIC0gb08wMG9vbzBvME9PIC0gSWlpSUlpSUkgLiBJSUlJIC4gSTFJaQogICAgICAgICAgICBpaUlpaWlpMTEgPSBpaUlpaWlpMTEgLiByZXBsYWNlICggJ1snICsgb29vT08wMG8wbzAgKyAnLnBhcmFtJyArIHN0ciAoIG8wTzBPbzAwICsgMSApICsgJ11bREVdJyAsIHVuZXNjYXBlICggSTFpaUlpICkgKQogICAgICAgICAgICBpZiA3MSAtIDcxOiBPb28wT29PbzBPT09PICogaTExSWlJMUlJICsgTzAwTyAvIG9PMDBvb28wbzBPTyArIG9vbwogICAgICAgICAgIE8wT09PTzAwMDAgWyBpaTExSTFJIF0gPSBpaUlpaWlpMTEgLiByZXBsYWNlICggJ1snICsgb29vT08wMG8wbzAgKyAnLnBhcmFtJyArIHN0ciAoIG8wTzBPbzAwICsgMSApICsgJ10nICwgSTFpaUlpICkKICAgICAgICAgICBpZiA2NiAtIDY2OiBvTzAwb29vMG8wT08gKyBJSUlJIC0gaWlpSTFpaUkxaQogICAgICAgICAgIGlmIDE1IC0gMTU6IE8wMG9vMG8KICAgICBJMWlpSWkgPSBOb25lCiAgICAgaWYgaXNpbnN0YW5jZSAoIG8wb29PTzAwbzAwbyAsIHR1cGxlICkgOgogICAgICB0cnkgOgogICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvIFsgbzBPME9vMDAgXSAuIGRlY29kZSAoICd1dGYtOCcgKQogICAgICBleGNlcHQgOgogICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvIFsgbzBPME9vMDAgXQogICAgIGVsc2UgOgogICAgICB0cnkgOgogICAgICAgSTFpaUlpID0gbzBvb09PMDBvMDBvIC4gZGVjb2RlICggJ3V0Zi04JyApCiAgICAgIGV4Y2VwdCA6CiAgICAgICBJMWlpSWkgPSBvMG9vT08wMG8wMG8KICAgICBpZiAnWycgKyBvb29PTzAwbzBvMCArICcucGFyYW0nICsgc3RyICggbzBPME9vMDAgKyAxICkgKyAnXVtERV0nIGluIE9PMG9PIDoKICAgICAgT08wb08gPSBPTzBvTyAuIHJlcGxhY2UgKCAnWycgKyBvb29PTzAwbzBvMCArICcucGFyYW0nICsgc3RyICggbzBPME9vMDAgKyAxICkgKyAnXVtERV0nICwgSTFpaUlpICkKICAgICBPTzBvTyA9IE9PMG9PIC4gcmVwbGFjZSAoICdbJyArIG9vb09PMDBvMG8wICsgJy5wYXJhbScgKyBzdHIgKCBvME8wT28wMCArIDEgKSArICddJyAsIGVzY2FwZSAoIEkxaWlJaSApICkKICAgICBpZiA0NiAtIDQ2OiBpaUkgLSBPb28wT29PbzBPT09PICogb28wMG9Pb08wbzBvCiAgICBPTzBvTyA9IE9PMG9PIC4gcmVwbGFjZSAoICdbJyArIG9vb09PMDBvMG8wICsgJy5wYXJhbScgKyBzdHIgKCAwICkgKyAnXScgLCBzdHIgKCBJMWkgKSApCiAgICBpZiAzOCAtIDM4OiBPMDBvbzBvCiAgICB0cnkgOgogICAgIGlmIE9Pb09Pb09vME8wTzAgYW5kICdbJyArIG9vb09PMDBvMG8wICsgJy5jb29raWVzXScgaW4gT08wb08gOgogICAgICBPTzBvTyA9IE9PMG9PIC4gcmVwbGFjZSAoICdbJyArIG9vb09PMDBvMG8wICsgJy5jb29raWVzXScgLCBvT28wT28gKCBPT29PT29PbzBPME8wICkgKQogICAgZXhjZXB0IDogcGFzcwogICAgaWYgMTMgLSAxMzogSUlJSSAlIE8wMG9vMG8gJSBPMDAwT29vMG8wT09vCiAgICBpZiAyNyAtIDI3OiBPMDBvbzBvIC8gSWkKICAgIGlmIDUgLSA1OiBpaUkKICAgIGlmIDk3IC0gOTc6IElpCiAgICBPb08wb08wMDBvMG8gPSAnJwogICAgaWYgOTAgLSA5MDogSUkxaTExMWlJMWlpIC4gSWkgKyBPb28wT29PbzBPT09PIC8gTzAwME9vbzBvME9PbwogICAgaWYgbGVuICggb29pSTExaWkxMWkxMTEgKSA+IDAgOgogICAgIE9vTzBvTzAwMG8wbyA9IG8wTzBvMG9Pb08wICggb29pSTExaWkxMWkxMTEgLCAnbHNwcm9yb290JyApCiAgICAgT29PMG9PMDAwbzBvID0gT29PMG9PMDAwbzBvIC4gc3BsaXQgKCAnPGxzcHJvcm9vdD4nICkgWyAxIF0gLiBzcGxpdCAoICc8L2xzcHJvcm9vdCcgKSBbIDAgXQogICAgIGlmIDgzIC0gODM6IElJMWlpSTFpaTFpaWkgLSBpMTFJaUkxSUkgLSBvT08gKiBvbzBPb08gKyBJSUlJCiAgICAgaWYgNDggLSA0ODogSWlpSUlpSUkKICAgIHRyeSA6CiAgICAgSUkxaWkxaUlpaWlJICs9ICdcbjxpdGVtPiVzXG4lczwvaXRlbT4nICUgKCBPTzBvTyAsIE9vTzBvTzAwMG8wbyApCiAgICBleGNlcHQgOiBJSTFpaTFpSWlpaUkgKz0gJ1xuPGl0ZW0+JXNcbiVzPC9pdGVtPicgJSAoIE9PMG9PIC4gZW5jb2RlICggInV0Zi04IiApICwgT29PMG9PMDAwbzBvICkKICAgZXhjZXB0IDogdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggZmlsZSA9IHN5cyAuIHN0ZG91dCApCiAgIGlmIDg4IC0gODg6IElJSUkgKiBPMDBPICUgT29vME9vT28wT09PTyArIE8wMG9vMG8gLyBpaUkgLiBPMDBvbzBvCiAgIGlmIDczIC0gNzM6IE9vbzBPb09vME9PT08gLSBpaWlJMWlpSTFpIC8gSWkgKyBvTzAwb29vMG8wT08KICAgaWYgNzUgLSA3NTogSUkxaTExMWlJMWlpICUgaWlJICUgaWlJIC4gSWlpSUlpSUkgKiBPMDAwT29vMG8wT09vCiAgIGlmIDEwIC0gMTA6IG9vME9vTyAvIG9PMDBvb28wbzBPTwogICBpZiAyNyAtIDI3OiBvTzAwb29vMG8wT08gJSBJaSAlIE8wME8gLyBPMDBvbzBvCiAgaTFpSWlpICggcmVwciAoIElJMWlpMWlJaWlpSSApICkKICBPb29vb28wT08gKCAnJyAsICcnICwgSUkxaWkxaUlpaWlJICkKICB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogZWxzZSA6CiAgSWlJICwgaUlJaUkxaSA9IE8wb08gKCBpSTFpMWlJSUkxSUkgLCBJaUkgKQogIHByaW50IHJlcHIgKCBJaUkgKSAsIGlJSWlJMWkgLCAnaW1oZXJlJwogIGlmIG5vdCAoIGlJMWkxaUlJSTFJSSBhbmQgJ25vdHBsYXlhYmxlJyBpbiBpSTFpMWlJSUkxSUkgYW5kIG5vdCBJaUkgKSA6CiAgIGlmIElpSSA6CiAgICBpZiAnJFBMQVlFUlBST1hZJD0nIGluIElpSSA6CiAgICAgSWlJICwgSTExaUlvT28wT29PbyA9IElpSSAuIHNwbGl0ICggJyRQTEFZRVJQUk9YWSQ9JyApCiAgICAgcHJpbnQgJ3Byb3h5JyAsIEkxMWlJb09vME9vT28KICAgICBpZiAzNiAtIDM2OiBvbzAwb09vTzBvMG8gKiBvTzAwb29vMG8wT08gJSBPMDAwT29vMG8wT09vIC8gSUkxaWlJMWlpMWlpaSAvIE8wMDAwTyAvIG9vMDBvT29PMG8wbwogICAgIElJaWlJMUkxID0gTm9uZQogICAgIE9Pb29PID0gTm9uZQogICAgIGlmIGxlbiAoIEkxMWlJb09vME9vT28gKSA+IDAgYW5kICdAJyBpbiBJMTFpSW9PbzBPb09vIDoKICAgICAgSTExaUlvT28wT29PbyA9IEkxMWlJb09vME9vT28gLiBzcGxpdCAoICc6JyApCiAgICAgIElJaWlJMUkxID0gSTExaUlvT28wT29PbyBbIDAgXQogICAgICBPT29vTyA9IEkxMWlJb09vME9vT28gWyAxIF0gLiBzcGxpdCAoICdAJyApIFsgMCBdCiAgICAgIG9Pb29Pb29vbzAwTyA9IEkxMWlJb09vME9vT28gWyAxIF0gLiBzcGxpdCAoICdAJyApIFsgMSBdCiAgICAgIElJSTEgPSBJMTFpSW9PbzBPb09vIFsgMiBdCiAgICAgZWxzZSA6CiAgICAgIG9Pb29Pb29vbzAwTyAsIElJSTEgPSBJMTFpSW9PbzBPb09vIC4gc3BsaXQgKCAnOicgKQogICAgICBpZiA1OCAtIDU4OiBPMDAwT29vMG8wT09vICogaWlpSTFpaUkxaSAlIGlpSSAqIG9vMDBvT29PMG8wbyAtIGlpaUkxaWlJMWkKICAgICBPb29vbzBPME9vICggSWlJICwgaUlJMUlpMWlpMTEgLCBPbzAgLCBvT29vT29vb28wME8gLCBJSUkxICwgSUlpaUkxSTEgLCBPT29vTyApCiAgICBlbHNlIDoKICAgICBvME9vT09vT29vMCAoIElpSSAsIGlJSTFJaTFpaTExICwgT28wICwgaUlJaUkxaSAsIGlJMWkxaUlJSTFJSSApCiAgIGVsc2UgOgogICAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBsYW5ldGEsRmFpbGVkIHRvIGV4dHJhY3QgcmVnZXguIC0gIiArICJ0aGlzIiArICIsNDAwMCwiICsgT08wME9vbzBvICsgIikiICkKZWxpZiBPTzBvbyA9PSAxOCA6CiBpMWlJaWkgKCAieW91dHViZWRsIiApCiB0cnkgOgogIGltcG9ydCB5b3V0dWJlZGwKIGV4Y2VwdCBFeGNlcHRpb24gOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihQbGFuZXRhLFBsZWFzZSBbQ09MT1IgeWVsbG93XWluc3RhbGwgWW91dHViZS1kbFsvQ09MT1JdIG1vZHVsZSAsMTAwMDAsIiAiKSIgKQogb28wbzBvb08gPSB5b3V0dWJlZGwgLiBzaW5nbGVfWUQgKCBJaUkgKQogbzBPb09Pb09vbzAgKCBvbzBvMG9vTyAsIGlJSTFJaTFpaTExICwgT28wICkKZWxpZiBPTzBvbyA9PSAxOSA6CiBpMWlJaWkgKCAiR2VuZXNpc2NvbW1vbnJlc29sdmVycyIgKQogbzBPb09Pb09vbzAgKCBvMG9PMG9PT28gKCBJaUkgKSAsIGlJSTFJaTFpaTExICwgT28wICwgVHJ1ZSApCiBpZiA0OSAtIDQ5OiBPMDAwME8gKyBvTzAwb29vMG8wT08gLyBvT08KZWxpZiBPTzBvbyA9PSAyMSA6CiBpMWlJaWkgKCAiZG93bmxvYWQgY3VycmVudCBmaWxlIHVzaW5nIHlvdXR1YmUtZGwgc2VydmljZSIgKQogSUlJMWlJSTFpSTExID0gJ3ZpZGVvJwogaWYgJ1ttcDNdJyBpbiBpSUkxSWkxaWkxMSA6CiAgSUlJMWlJSTFpSTExID0gJ2F1ZGlvJwogIGlJSTFJaTFpaTExID0gaUlJMUlpMWlpMTEgLiByZXBsYWNlICggJ1ttcDNdJyAsICcnICkKIGkxMU8wT08wICggJycgLCBpSUkxSWkxaWkxMSAsIElJSTFpSUkxaUkxMSApCmVsaWYgT08wb28gPT0gMjMgOgogaTFpSWlpICggImdldCBpbmZvIHRoZW4gZG93bmxvYWQiICkKIElJSTFpSUkxaUkxMSA9ICd2aWRlbycKIGlmICdbbXAzXScgaW4gaUlJMUlpMWlpMTEgOgogIElJSTFpSUkxaUkxMSA9ICdhdWRpbycKICBpSUkxSWkxaWkxMSA9IGlJSTFJaTFpaTExIC4gcmVwbGFjZSAoICdbbXAzXScgLCAnJyApCiBpMTFPME9PMCAoIElpSSAsIGlJSTFJaTFpaTExICwgSUlJMWlJSTFpSTExICkKZWxpZiBPTzBvbyA9PSAyNCA6CiBpMWlJaWkgKCAiQXVkaW8gb25seSB5b3V0dWJlIGRvd25sb2FkIiApCiBpMTFPME9PMCAoIElpSSAsIGlJSTFJaTFpaTExICwgJ2F1ZGlvJyApCmVsaWYgT08wb28gPT0gMjUgOgogaTFpSWlpICggIlNlYXJjaGluIE90aGVyIHBsdWdpbnMiICkKIEkxMWkxMWlpaTExMWkgKCBJaUkgLCBpSUkxSWkxaWkxMSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQplbGlmIE9PMG9vID09IDU1IDoKIGkxaUlpaSAoICJlbmFibGVkIGxvY2siICkKIE8wME9PTzAwID0gT28wME8gLiBnZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZHBpbicgKQogb28wTyA9IHhibWMgLiBLZXlib2FyZCAoICcnICwgJ0VudGVyIFBpbicgKQogb28wTyAuIGRvTW9kYWwgKCApCiBpZiBub3QgKCBvbzBPIC4gaXNDb25maXJtZWQgKCApID09IEZhbHNlICkgOgogIElJaTFpID0gb28wTyAuIGdldFRleHQgKCApCiAgaWYgSUlpMWkgPT0gTzAwT09PMDAgOgogICBPbzAwTyAuIHNldFNldHRpbmcgKCAncGFyZW50YWxibG9ja2VkJyAsICJmYWxzZSIgKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGxhbmV0YSxCbG9xdWVvIGRlIHNlZ3VyaWRhZCBkZXNhY3RpdmFkbyw1MDAwLCIgKyBPTzAwT29vMG8gKyAiKSIgKQogIGVsc2UgOgogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oUGxhbmV0YSxQZXJkaW8gZWwgcGluPz8sNTAwMCwiICsgT08wME9vbzBvICsgIikiICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgT08wb28gPT0gNTYgOgogaTFpSWlpICggImRpc2FibGUgbG9jayIgKQogT28wME8gLiBzZXRTZXR0aW5nICggJ3BhcmVudGFsYmxvY2tlZCcgLCAidHJ1ZSIgKQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKFBsYW5ldGEsIGJsb3F1ZW8gcGFyYSBhZHVsdG9zIGFjdGl2byw1MDAwLCIgKyBPTzAwT29vMG8gKyAiKSIgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDkxIC0gOTE6IEkxSWkKZWxpZiBPTzBvbyA9PSA1MyA6CiBpMWlJaWkgKCAiUmVxdWVzdGluZyBKU09OLVJQQyBJdGVtcyIgKQogbzBPMDBvTzAwT09vICggSWlJICkKIGlmIDI1IC0gMjU6IGkxMUlpSTFJSSAtIG9vMDBvT29PMG8wbyArIElJMWkxMTFpSTFpaSAqIG9PTyAuIG9PMDBvb28wbzBPTwppZiBub3QgSWlJaUlJSUkxID09IE5vbmUgOgogcHJpbnQgJ3NldHRpbmcgdmlldyBtb2RlJwogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIkNvbnRhaW5lci5TZXRWaWV3TW9kZSglcykiICUgSWlJaUlJSUkxICkKIyA4MDdjYjFiZmZmYjIzNGRhY2UzZjkzMGY1NzFhOTAzOWQ3NmY0Y2Y5Cg==')